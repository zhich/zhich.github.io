<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222"><meta name="generator" content="Hexo 7.2.0">

  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">
  <meta name="google-site-verification" content="uhuV0rnYMUWuzeZrPSHxh_QSZ6tM5AWsUD-fXyEVOOc">
  <meta name="baidu-site-verification" content="codeva-jBfPQBw271">

<link rel="stylesheet" href="/css/main.css">

<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Times+New+Roman:300,300italic,400,400italic,700,700italic%7CConsolas:300,300italic,400,400italic,700,700italic&display=swap&subset=latin,latin-ext">

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css" integrity="sha256-XOqroi11tY4EFQMR9ZYwZWKj5ZXiftSx36RRuC3anlA=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/pace/1.2.4/themes/blue/pace-theme-mac-osx.css">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/pace/1.2.4/pace.min.js" integrity="sha256-gqd7YTjg/BtfqWSwsJOvndl0Bxc8gFImLEkXQT8+qj0=" crossorigin="anonymous"></script>

<script class="next-config" data-name="main" type="application/json">{"hostname":"zhich.github.io","root":"/","images":"/images","scheme":"Gemini","darkmode":false,"version":"8.20.0","exturl":true,"sidebar":{"position":"right","width_expanded":320,"width_dual_column":240,"display":"post","padding":18,"offset":12},"copycode":{"enable":true,"style":"default"},"fold":{"enable":true,"height":500},"bookmark":{"enable":false,"color":"#222","save":"auto"},"mediumzoom":false,"lazyload":true,"pangu":true,"comments":{"style":"tabs","active":"giscus","storage":true,"lazyload":true,"nav":null},"stickytabs":true,"motion":{"enable":true,"async":false,"transition":{"menu_item":"fadeInDown","post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"i18n":{"placeholder":"搜索...","empty":"没有找到任何搜索结果：${query}","hits_time":"找到 ${hits} 个搜索结果（用时 ${time} 毫秒）","hits":"找到 ${hits} 个搜索结果"},"path":"/search.xml","localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":true,"preload":true}}</script><script src="/js/config.js"></script>

    <meta name="description" content="HarmonyOS 项目目录介绍ArkTS 基本语法详解HarmonyOS 4.0 以后可以使用 ArkTS 或者 HTML&#x2F;CSS&#x2F;JS 技术来开发 HarmonyOS 应用，而 ArkTS 是 HarmonyOS 优选的主力应用开发语言。   ArkTS 围绕应用开发在 TypeScript（简称 TS）生态基础上做了进一步扩展，继承了 TS 的所有特性，是 TS">
<meta property="og:type" content="blog">
<meta property="og:title" content="鸿蒙开发教程">
<meta property="og:url" content="https://zhich.github.io/2024/05/18/%E9%B8%BF%E8%92%99%E5%BC%80%E5%8F%91%E6%95%99%E7%A8%8B/index.html">
<meta property="og:site_name" content="明年今日">
<meta property="og:description" content="HarmonyOS 项目目录介绍ArkTS 基本语法详解HarmonyOS 4.0 以后可以使用 ArkTS 或者 HTML&#x2F;CSS&#x2F;JS 技术来开发 HarmonyOS 应用，而 ArkTS 是 HarmonyOS 优选的主力应用开发语言。   ArkTS 围绕应用开发在 TypeScript（简称 TS）生态基础上做了进一步扩展，继承了 TS 的所有特性，是 TS">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://gitee.com/zch0304/images/raw/master/note/1716005497787.jpg">
<meta property="og:image" content="https://gitee.com/zch0304/images/raw/master/note/1716013357130.jpg">
<meta property="og:image" content="https://gitee.com/zch0304/images/raw/master/note/1719469698441.jpg">
<meta property="og:image" content="https://gitee.com/zch0304/images/raw/master/note/1719470597070.png">
<meta property="og:image" content="https://gitee.com/zch0304/images/raw/master/note/1719471011623.jpg">
<meta property="og:image" content="https://gitee.com/zch0304/images/raw/master/note/1719471221476.jpg">
<meta property="og:image" content="https://gitee.com/zch0304/images/raw/master/note/1719471652485.jpg">
<meta property="og:image" content="https://gitee.com/zch0304/images/raw/master/note/1719472196631.jpg">
<meta property="og:image" content="https://gitee.com/zch0304/images/raw/master/note/1719472716279.jpg">
<meta property="og:image" content="https://gitee.com/zch0304/images/raw/master/note/1716389533793.jpg">
<meta property="og:image" content="https://gitee.com/zch0304/images/raw/master/note/1716388652192.jpg">
<meta property="og:image" content="https://gitee.com/zch0304/images/raw/master/note/1716472510603.jpg">
<meta property="og:image" content="https://gitee.com/zch0304/images/raw/master/note/1716473605745.jpg">
<meta property="og:image" content="https://gitee.com/zch0304/images/raw/master/note/1716474425596.jpg">
<meta property="og:image" content="https://gitee.com/zch0304/images/raw/master/note/1716475790377.jpg">
<meta property="og:image" content="https://gitee.com/zch0304/images/raw/master/note/1716477035040.jpg">
<meta property="og:image" content="https://gitee.com/zch0304/images/raw/master/note/1716554468902.jpg">
<meta property="og:image" content="https://gitee.com/zch0304/images/raw/master/note/1716557181764.jpg">
<meta property="og:image" content="https://gitee.com/zch0304/images/raw/master/note/1716557759593.jpg">
<meta property="og:image" content="https://gitee.com/zch0304/images/raw/master/note/1716557759593.jpg">
<meta property="og:image" content="https://gitee.com/zch0304/images/raw/master/note/1716558674189.jpg">
<meta property="og:image" content="https://gitee.com/zch0304/images/raw/master/note/1716558853253.jpg">
<meta property="og:image" content="https://gitee.com/zch0304/images/raw/master/note/1716559329865.jpg">
<meta property="og:image" content="https://gitee.com/zch0304/images/raw/master/note/1716561030772.jpg">
<meta property="og:image" content="https://gitee.com/zch0304/images/raw/master/note/1716561257608.jpg">
<meta property="og:image" content="https://gitee.com/zch0304/images/raw/master/note/1716561389788.jpg">
<meta property="og:image" content="https://gitee.com/zch0304/images/raw/master/note/1716561544100.jpg">
<meta property="og:image" content="https://gitee.com/zch0304/images/raw/master/note/1716561707980.jpg">
<meta property="og:image" content="https://gitee.com/zch0304/images/raw/master/note/1716561851381.jpg">
<meta property="og:image" content="https://gitee.com/zch0304/images/raw/master/note/1716816140506.jpg">
<meta property="og:image" content="https://gitee.com/zch0304/images/raw/master/note/1716816140506.jpg">
<meta property="og:image" content="https://gitee.com/zch0304/images/raw/master/note/1716816486562.jpg">
<meta property="og:image" content="https://gitee.com/zch0304/images/raw/master/note/1716817062907.jpg">
<meta property="og:image" content="https://gitee.com/zch0304/images/raw/master/note/1716817484409.jpg">
<meta property="og:image" content="https://gitee.com/zch0304/images/raw/master/note/1716817697841.jpg">
<meta property="og:image" content="https://gitee.com/zch0304/images/raw/master/note/1716819203162.jpg">
<meta property="og:image" content="https://gitee.com/zch0304/images/raw/master/note/1716821744026.jpg">
<meta property="og:image" content="https://gitee.com/zch0304/images/raw/master/note/1716910862339.jpg">
<meta property="og:image" content="https://gitee.com/zch0304/images/raw/master/note/1716912172452.jpg">
<meta property="og:image" content="https://gitee.com/zch0304/images/raw/master/note/1716991550056.jpg">
<meta property="og:image" content="https://gitee.com/zch0304/images/raw/master/note/1716995097983.jpg">
<meta property="og:image" content="https://gitee.com/zch0304/images/raw/master/note/1717678884319.jpg">
<meta property="og:image" content="https://gitee.com/zch0304/images/raw/master/note/1717682221884.jpg">
<meta property="og:image" content="https://gitee.com/zch0304/images/raw/master/note/1718296042527.jpg">
<meta property="og:image" content="https://gitee.com/zch0304/images/raw/master/note/1718376141035.jpg">
<meta property="og:image" content="https://gitee.com/zch0304/images/raw/master/note/1718381624325.jpg">
<meta property="og:image" content="https://gitee.com/zch0304/images/raw/master/note/1718717571904.jpg">
<meta property="og:image" content="https://gitee.com/zch0304/images/raw/master/note/1718721262849.jpg">
<meta property="og:image" content="https://gitee.com/zch0304/images/raw/master/note/1719025735980.jpg">
<meta property="og:image" content="https://gitee.com/zch0304/images/raw/master/note/1719026155523.jpg">
<meta property="og:image" content="https://gitee.com/zch0304/images/raw/master/note/1719028446980.jpg">
<meta property="og:image" content="https://gitee.com/zch0304/images/raw/master/note/1719029689146.jpg">
<meta property="og:image" content="https://gitee.com/zch0304/images/raw/master/note/1719036279766.jpg">
<meta property="og:image" content="https://gitee.com/zch0304/images/raw/master/note/1719038178166.jpg">
<meta property="og:image" content="https://gitee.com/zch0304/images/raw/master/note/1719301633289.jpg">
<meta property="og:image" content="https://gitee.com/zch0304/images/raw/master/note/1719321422435.jpg">
<meta property="og:image" content="https://gitee.com/zch0304/images/raw/master/note/1719323465787.jpg">
<meta property="og:image" content="https://gitee.com/zch0304/images/raw/master/note/1719480697081.jpg">
<meta property="og:image" content="https://gitee.com/zch0304/images/raw/master/note/1719480390745.jpg">
<meta property="og:image" content="https://gitee.com/zch0304/images/raw/master/note/1719479929105.jpg">
<meta property="og:image" content="https://gitee.com/zch0304/images/raw/master/note/1719479929105.jpg">
<meta property="og:image" content="https://gitee.com/zch0304/images/raw/master/note/1719479760961.jpg">
<meta property="article:published_time" content="2024-05-18T03:17:00.000Z">
<meta property="article:modified_time" content="2024-07-06T03:28:39.585Z">
<meta property="article:author" content="明年今日">
<meta property="article:tag" content="鸿蒙开发">
<meta property="article:tag" content="HarmonyOS">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://gitee.com/zch0304/images/raw/master/note/1716005497787.jpg">


<link rel="canonical" href="https://zhich.github.io/2024/05/18/%E9%B8%BF%E8%92%99%E5%BC%80%E5%8F%91%E6%95%99%E7%A8%8B/">



<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":false,"isPost":true,"lang":"zh-CN","comments":true,"permalink":"https://zhich.github.io/2024/05/18/%E9%B8%BF%E8%92%99%E5%BC%80%E5%8F%91%E6%95%99%E7%A8%8B/","path":"2024/05/18/鸿蒙开发教程/","title":"鸿蒙开发教程"}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>鸿蒙开发教程 | 明年今日</title>
  








  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
</head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <div class="column">
      <header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏" role="button">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <p class="site-title">明年今日</p>
      <i class="logo-line"></i>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger" aria-label="搜索" role="button">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a></li><li class="menu-item menu-item-about"><a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>关于</a></li><li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签</a></li><li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类</a></li><li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档</a></li><li class="menu-item menu-item-links"><a href="/links/" rel="section"><i class="fa fa-globe fa-fw fa-fw"></i>links</a></li><li class="menu-item menu-item-happy"><a href="/happy/" rel="section"><i class="fa fa-th fa-fw"></i>happy</a></li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>搜索
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup"><div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off" maxlength="80"
           placeholder="搜索..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close" role="button">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div class="search-result-container no-result">
  <div class="search-result-icon">
    <i class="fa fa-spinner fa-pulse fa-5x"></i>
  </div>
</div>

    </div>
  </div>

</header>
        
  
  <aside class="sidebar">

    <div class="sidebar-inner sidebar-nav-active sidebar-toc-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
            <div class="post-toc animated"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#HarmonyOS-%E9%A1%B9%E7%9B%AE%E7%9B%AE%E5%BD%95%E4%BB%8B%E7%BB%8D"><span class="nav-number">1.</span> <span class="nav-text">HarmonyOS 项目目录介绍</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#ArkTS-%E5%9F%BA%E6%9C%AC%E8%AF%AD%E6%B3%95%E8%AF%A6%E8%A7%A3"><span class="nav-number">2.</span> <span class="nav-text">ArkTS 基本语法详解</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#ArkTS-%E5%9F%BA%E6%9C%AC%E7%BB%84%E6%88%90"><span class="nav-number">2.1.</span> <span class="nav-text">ArkTS 基本组成</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#ArkTS-%E5%B8%83%E5%B1%80%E7%BB%93%E6%9E%84"><span class="nav-number">2.2.</span> <span class="nav-text">ArkTS 布局结构</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#ArkTS-%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B"><span class="nav-number">2.3.</span> <span class="nav-text">ArkTS 数据类型</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%95%B0%E5%AD%97"><span class="nav-number">2.3.1.</span> <span class="nav-text">数字</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%AD%97%E7%AC%A6%E4%B8%B2"><span class="nav-number">2.3.2.</span> <span class="nav-text">字符串</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%B8%83%E5%B0%94%E5%80%BC"><span class="nav-number">2.3.3.</span> <span class="nav-text">布尔值</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E8%81%94%E5%90%88%E7%B1%BB%E5%9E%8B"><span class="nav-number">2.3.4.</span> <span class="nav-text">联合类型</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%95%B0%E7%BB%84"><span class="nav-number">2.3.5.</span> <span class="nav-text">数组</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%9E%9A%E4%B8%BE"><span class="nav-number">2.3.6.</span> <span class="nav-text">枚举</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%85%83%E7%BB%84"><span class="nav-number">2.3.7.</span> <span class="nav-text">元组</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Any%EF%BC%88%E4%B8%8D%E6%8E%A8%E8%8D%90%E4%BD%BF%E7%94%A8%EF%BC%89"><span class="nav-number">2.3.8.</span> <span class="nav-text">Any（不推荐使用）</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Unknown"><span class="nav-number">2.3.9.</span> <span class="nav-text">Unknown</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Void"><span class="nav-number">2.3.10.</span> <span class="nav-text">Void</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Null-%E5%92%8C-Undefined"><span class="nav-number">2.3.11.</span> <span class="nav-text">Null 和 Undefined</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#ArkTS-%E6%B8%B2%E6%9F%93%E6%8E%A7%E5%88%B6"><span class="nav-number">2.4.</span> <span class="nav-text">ArkTS 渲染控制</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#if-else%EF%BC%9A%E6%9D%A1%E4%BB%B6%E6%B8%B2%E6%9F%93"><span class="nav-number">2.4.1.</span> <span class="nav-text">if&#x2F;else：条件渲染</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#ForEach%EF%BC%9A%E5%BE%AA%E7%8E%AF%E6%B8%B2%E6%9F%93"><span class="nav-number">2.4.2.</span> <span class="nav-text">ForEach：循环渲染</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#LazyForEach%EF%BC%9A%E6%95%B0%E6%8D%AE%E6%87%92%E5%8A%A0%E8%BD%BD"><span class="nav-number">2.4.3.</span> <span class="nav-text">LazyForEach：数据懒加载</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%9F%BA%E7%A1%80%E7%BB%84%E4%BB%B6"><span class="nav-number">3.</span> <span class="nav-text">基础组件</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Image"><span class="nav-number">3.1.</span> <span class="nav-text">Image</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%AD%98%E6%A1%A3%E5%9B%BE%E7%B1%BB%E5%9E%8B%E6%95%B0%E6%8D%AE%E6%BA%90"><span class="nav-number">3.1.1.</span> <span class="nav-text">存档图类型数据源</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%A4%9A%E5%AA%92%E4%BD%93%E5%83%8F%E7%B4%A0%E5%9B%BE"><span class="nav-number">3.1.2.</span> <span class="nav-text">多媒体像素图</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%98%BE%E7%A4%BA%E7%9F%A2%E9%87%8F%E5%9B%BE"><span class="nav-number">3.1.3.</span> <span class="nav-text">显示矢量图</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E8%AE%BE%E7%BD%AE%E5%9B%BE%E7%89%87%E7%BC%A9%E6%94%BE%E7%B1%BB%E5%9E%8B"><span class="nav-number">3.1.4.</span> <span class="nav-text">设置图片缩放类型</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%9B%BE%E7%89%87%E6%8F%92%E5%80%BC"><span class="nav-number">3.1.5.</span> <span class="nav-text">图片插值</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E8%AE%BE%E7%BD%AE%E5%9B%BE%E7%89%87%E9%87%8D%E5%A4%8D%E6%A0%B7%E5%BC%8F"><span class="nav-number">3.1.6.</span> <span class="nav-text">设置图片重复样式</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E8%AE%BE%E7%BD%AE%E5%9B%BE%E7%89%87%E6%B8%B2%E6%9F%93%E6%A8%A1%E5%BC%8F"><span class="nav-number">3.1.7.</span> <span class="nav-text">设置图片渲染模式</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E8%AE%BE%E7%BD%AE%E5%9B%BE%E7%89%87%E8%A7%A3%E7%A0%81%E5%B0%BA%E5%AF%B8"><span class="nav-number">3.1.8.</span> <span class="nav-text">设置图片解码尺寸</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E4%B8%BA%E5%9B%BE%E7%89%87%E6%B7%BB%E5%8A%A0%E6%BB%A4%E9%95%9C%E6%95%88%E6%9E%9C"><span class="nav-number">3.1.9.</span> <span class="nav-text">为图片添加滤镜效果</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%90%8C%E6%AD%A5%E5%8A%A0%E8%BD%BD%E5%9B%BE%E7%89%87"><span class="nav-number">3.1.10.</span> <span class="nav-text">同步加载图片</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E4%BA%8B%E4%BB%B6%E8%B0%83%E7%94%A8"><span class="nav-number">3.1.11.</span> <span class="nav-text">事件调用</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%B8%83%E5%B1%80%E7%BB%84%E4%BB%B6"><span class="nav-number">4.</span> <span class="nav-text">布局组件</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#ArkTS-%E9%80%9A%E7%94%A8%E5%B1%9E%E6%80%A7"><span class="nav-number">4.1.</span> <span class="nav-text">ArkTS 通用属性</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Column-%E8%AF%A6%E8%A7%A3"><span class="nav-number">4.2.</span> <span class="nav-text">Column 详解</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Column-%E6%8E%A5%E5%8F%A3"><span class="nav-number">4.2.1.</span> <span class="nav-text">Column 接口</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Column-%E5%B1%9E%E6%80%A7"><span class="nav-number">4.2.2.</span> <span class="nav-text">Column 属性</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Row-%E8%AF%A6%E8%A7%A3"><span class="nav-number">4.3.</span> <span class="nav-text">Row 详解</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Row-%E6%8E%A5%E5%8F%A3"><span class="nav-number">4.3.1.</span> <span class="nav-text">Row 接口</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Row-%E5%B1%9E%E6%80%A7"><span class="nav-number">4.3.2.</span> <span class="nav-text">Row 属性</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%87%AA%E5%AE%9A%E4%B9%89%E7%BB%84%E4%BB%B6"><span class="nav-number">4.4.</span> <span class="nav-text">自定义组件</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Row%E3%80%81Column-%E7%BB%93%E5%90%88-layoutWeight-%E5%AE%9E%E7%8E%B0%E5%BC%B9%E6%80%A7%E5%B8%83%E5%B1%80"><span class="nav-number">4.5.</span> <span class="nav-text">Row、Column 结合 layoutWeight 实现弹性布局</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%B0%B4%E5%B9%B3%E5%BC%B9%E6%80%A7%E5%B8%83%E5%B1%80"><span class="nav-number">4.5.1.</span> <span class="nav-text">水平弹性布局</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%9E%82%E7%9B%B4%E5%BC%B9%E6%80%A7%E5%B8%83%E5%B1%80"><span class="nav-number">4.5.2.</span> <span class="nav-text">垂直弹性布局</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Stack-%E5%AE%9A%E4%BD%8D%E7%BB%84%E4%BB%B6"><span class="nav-number">4.6.</span> <span class="nav-text">Stack 定位组件</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Stack-%E6%8E%A5%E5%8F%A3"><span class="nav-number">4.6.1.</span> <span class="nav-text">Stack 接口</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Stack-%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8"><span class="nav-number">4.6.2.</span> <span class="nav-text">Stack 基本使用</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Stack-%E5%AD%90%E7%BB%84%E4%BB%B6%E4%B8%AD-zIndex-%E6%8E%A7%E5%88%B6%E5%B1%82%E7%BA%A7"><span class="nav-number">4.6.3.</span> <span class="nav-text">Stack 子组件中 zIndex 控制层级</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Stack-%E7%BB%93%E5%90%88-List-%E5%AE%9E%E7%8E%B0%E5%8A%A8%E6%80%81%E5%88%97%E8%A1%A8"><span class="nav-number">4.6.4.</span> <span class="nav-text">Stack 结合 List 实现动态列表</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Stack-%E7%BB%93%E5%90%88-List-%E5%AE%9E%E7%8E%B0%E6%B5%AE%E5%8A%A8%E5%AF%BC%E8%88%AA"><span class="nav-number">4.6.5.</span> <span class="nav-text">Stack 结合 List 实现浮动导航</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%BC%B9%E6%80%A7%E5%B8%83%E5%B1%80%EF%BC%88Flex%EF%BC%89"><span class="nav-number">4.7.</span> <span class="nav-text">弹性布局（Flex）</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Flex-%E6%8E%A5%E5%8F%A3"><span class="nav-number">4.7.1.</span> <span class="nav-text">Flex 接口</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Flex-%E5%8F%82%E6%95%B0"><span class="nav-number">4.7.2.</span> <span class="nav-text">Flex 参数</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Flex-%E8%BD%B4%E7%9A%84%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5"><span class="nav-number">4.7.3.</span> <span class="nav-text">Flex 轴的基本概念</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#direction-%E5%8F%82%E6%95%B0%E6%8E%A7%E5%88%B6%E5%B8%83%E5%B1%80%E6%96%B9%E5%90%91"><span class="nav-number">4.7.4.</span> <span class="nav-text">direction 参数控制布局方向</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#wrap-%E5%8F%82%E6%95%B0%E6%8E%A7%E5%88%B6%E5%B8%83%E5%B1%80%E6%8D%A2%E8%A1%8C"><span class="nav-number">4.7.5.</span> <span class="nav-text">wrap 参数控制布局换行</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#justifyContent-%E9%85%8D%E7%BD%AE%E4%B8%BB%E8%BD%B4%E5%AF%B9%E9%BD%90%E6%96%B9%E5%BC%8F"><span class="nav-number">4.7.6.</span> <span class="nav-text">justifyContent 配置主轴对齐方式</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#alignContent-%E9%85%8D%E7%BD%AE%E5%86%85%E5%AE%B9%E5%AF%B9%E9%BD%90"><span class="nav-number">4.7.7.</span> <span class="nav-text">alignContent 配置内容对齐</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#alignItems-%E5%8F%82%E6%95%B0%E6%8E%A7%E5%88%B6%E4%BA%A4%E5%8F%89%E8%BD%B4%E5%AF%B9%E9%BD%90%E6%96%B9%E5%BC%8F"><span class="nav-number">4.7.8.</span> <span class="nav-text">alignItems 参数控制交叉轴对齐方式</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Flex-%E8%87%AA%E9%80%82%E5%BA%94%E6%8B%89%E4%BC%B8%E5%B8%83%E5%B1%80%E5%B1%9E%E6%80%A7"><span class="nav-number">4.7.9.</span> <span class="nav-text">Flex 自适应拉伸布局属性</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Flex-%E5%BA%94%E7%94%A8%E6%A1%88%E4%BE%8B"><span class="nav-number">4.7.10.</span> <span class="nav-text">Flex 应用案例</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%9B%B8%E5%AF%B9%E5%B8%83%E5%B1%80%EF%BC%88RelativeContainer%EF%BC%89"><span class="nav-number">4.8.</span> <span class="nav-text">相对布局（RelativeContainer）</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E8%A7%84%E5%88%99%E8%AF%B4%E6%98%8E"><span class="nav-number">4.8.1.</span> <span class="nav-text">规则说明</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8%E6%BC%94%E7%A4%BA"><span class="nav-number">4.8.2.</span> <span class="nav-text">基本使用演示</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%AE%9E%E7%8E%B0%E5%BA%95%E9%83%A8%E5%BC%B9%E5%87%BA%E6%8C%89%E9%92%AE%E6%A1%88%E4%BE%8B"><span class="nav-number">4.8.3.</span> <span class="nav-text">实现底部弹出按钮案例</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#List-%E7%BB%84%E4%BB%B6%E8%AF%A6%E8%A7%A3"><span class="nav-number">4.9.</span> <span class="nav-text">List 组件详解</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#List-%E6%8E%A5%E5%8F%A3"><span class="nav-number">4.9.1.</span> <span class="nav-text">List 接口</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#List-%E5%B1%9E%E6%80%A7"><span class="nav-number">4.9.2.</span> <span class="nav-text">List 属性</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#List-%E4%BA%8B%E4%BB%B6"><span class="nav-number">4.9.3.</span> <span class="nav-text">List 事件</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#List-%E6%99%AE%E9%80%9A%E5%9E%82%E7%9B%B4%E5%88%97%E8%A1%A8"><span class="nav-number">4.9.4.</span> <span class="nav-text">List 普通垂直列表</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#List-%E5%BE%AE%E4%BF%A1%E7%94%A8%E6%88%B7%E4%B8%AD%E5%BF%83%E5%B8%83%E5%B1%80"><span class="nav-number">4.9.5.</span> <span class="nav-text">List 微信用户中心布局</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#List-%E6%96%87%E7%AB%A0%E5%88%97%E8%A1%A8%E5%B8%83%E5%B1%80"><span class="nav-number">4.9.6.</span> <span class="nav-text">List 文章列表布局</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#List-%E6%B0%B4%E5%B9%B3%E6%BB%91%E5%8A%A8%E5%88%97%E8%A1%A8"><span class="nav-number">4.9.7.</span> <span class="nav-text">List 水平滑动列表</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#list-Scroller-%E6%8E%A7%E5%88%B6%E6%BB%9A%E5%8A%A8%E4%BD%8D%E7%BD%AE"><span class="nav-number">4.9.8.</span> <span class="nav-text">list Scroller 控制滚动位置</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#ListItem-%E7%9A%84-swipeAction-%E5%93%8D%E5%BA%94%E5%88%97%E8%A1%A8%E9%A1%B9%E4%BE%A7%E6%BB%91"><span class="nav-number">4.9.9.</span> <span class="nav-text">ListItem 的 swipeAction 响应列表项侧滑</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Badge-%E7%BB%99%E5%88%97%E8%A1%A8%E9%A1%B9%E6%B7%BB%E5%8A%A0%E6%A0%87%E8%AE%B0"><span class="nav-number">4.9.10.</span> <span class="nav-text">Badge 给列表项添加标记</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#ListItemGroup-%E6%B1%BD%E8%BD%A6%E4%B9%8B%E5%AE%B6%E9%80%89%E8%BD%A6%E9%A1%B5%E9%9D%A2%E5%B8%83%E5%B1%80"><span class="nav-number">4.9.11.</span> <span class="nav-text">ListItemGroup 汽车之家选车页面布局</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Grid-%E7%BD%91%E6%A0%BC%E5%B8%83%E5%B1%80"><span class="nav-number">4.10.</span> <span class="nav-text">Grid 网格布局</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Grid-%E6%8E%A5%E5%8F%A3"><span class="nav-number">4.10.1.</span> <span class="nav-text">Grid 接口</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Grid-%E5%B1%9E%E6%80%A7"><span class="nav-number">4.10.2.</span> <span class="nav-text">Grid 属性</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%9B%BA%E5%AE%9A%E6%95%B0%E9%87%8F%E7%9A%84%E7%BD%91%E6%A0%BC"><span class="nav-number">4.10.3.</span> <span class="nav-text">固定数量的网格</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E4%B8%8A%E4%B8%8B%E6%BB%9A%E5%8A%A8%E7%9A%84%E7%BD%91%E6%A0%BC"><span class="nav-number">4.10.4.</span> <span class="nav-text">上下滚动的网格</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E4%B8%8D%E5%9D%87%E5%8C%80%E7%BD%91%E6%A0%BC%E5%B8%83%E5%B1%80"><span class="nav-number">4.10.5.</span> <span class="nav-text">不均匀网格布局</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%B0%B4%E5%B9%B3%E6%BB%9A%E5%8A%A8%E7%9A%84%E7%BD%91%E6%A0%BC"><span class="nav-number">4.10.6.</span> <span class="nav-text">水平滚动的网格</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%BB%84%E4%BB%B6%E5%AF%BC%E8%88%AA%E5%92%8C%E9%A1%B5%E9%9D%A2%E8%B7%AF%E7%94%B1"><span class="nav-number">5.</span> <span class="nav-text">组件导航和页面路由</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%BB%84%E4%BB%B6%E5%AF%BC%E8%88%AA"><span class="nav-number">5.1.</span> <span class="nav-text">组件导航</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Navigation"><span class="nav-number">5.1.1.</span> <span class="nav-text">Navigation</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Tabs"><span class="nav-number">5.1.2.</span> <span class="nav-text">Tabs</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#Tabs-%E7%BB%84%E4%BB%B6%E7%9A%84%E6%8E%A5%E5%8F%A3"><span class="nav-number">5.1.2.1.</span> <span class="nav-text">Tabs 组件的接口</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#Tabs-%E7%BB%84%E4%BB%B6%E5%B1%9E%E6%80%A7"><span class="nav-number">5.1.2.2.</span> <span class="nav-text">Tabs 组件属性</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E5%9F%BA%E6%9C%AC%E5%B8%83%E5%B1%80"><span class="nav-number">5.1.2.3.</span> <span class="nav-text">基本布局</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E9%A1%B6%E9%83%A8%E5%AF%BC%E8%88%AA"><span class="nav-number">5.1.2.4.</span> <span class="nav-text">顶部导航</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E5%BA%95%E9%83%A8%E5%AF%BC%E8%88%AA"><span class="nav-number">5.1.2.5.</span> <span class="nav-text">底部导航</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E4%BE%A7%E8%BE%B9%E5%AF%BC%E8%88%AA"><span class="nav-number">5.1.2.6.</span> <span class="nav-text">侧边导航</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E9%99%90%E5%88%B6%E5%AF%BC%E8%88%AA%E6%A0%8F%E7%9A%84%E6%BB%91%E5%8A%A8%E5%88%87%E6%8D%A2"><span class="nav-number">5.1.2.7.</span> <span class="nav-text">限制导航栏的滑动切换</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E5%8F%AF%E4%BB%A5%E6%BB%9A%E5%8A%A8%E5%AF%BC%E8%88%AA%E6%A0%8F"><span class="nav-number">5.1.2.8.</span> <span class="nav-text">可以滚动导航栏</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E8%87%AA%E5%AE%9A%E4%B9%89%E5%AF%BC%E8%88%AA%E6%A0%8F"><span class="nav-number">5.1.2.9.</span> <span class="nav-text">自定义导航栏</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#Tabs-%E9%A1%B5%E9%9D%A2%E6%A8%A1%E5%9D%97%E5%8C%96"><span class="nav-number">5.1.2.10.</span> <span class="nav-text">Tabs 页面模块化</span></a></li></ol></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%A1%B5%E9%9D%A2%E8%B7%AF%E7%94%B1%EF%BC%88router%EF%BC%89"><span class="nav-number">5.2.</span> <span class="nav-text">页面路由（router）</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E8%B7%AF%E7%94%B1%E8%B7%B3%E8%BD%AC%E7%9A%84%E5%87%A0%E7%A7%8D%E6%96%B9%E6%B3%95"><span class="nav-number">5.2.1.</span> <span class="nav-text">路由跳转的几种方法</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#pushUrl-Standard%E6%A8%A1%E5%BC%8F"><span class="nav-number">5.2.1.1.</span> <span class="nav-text">pushUrl + Standard模式</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#replaceUrl-Standard%E6%A8%A1%E5%BC%8F"><span class="nav-number">5.2.1.2.</span> <span class="nav-text">replaceUrl+ Standard模式</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#pushUrl-Single%E6%A8%A1%E5%BC%8F"><span class="nav-number">5.2.1.3.</span> <span class="nav-text">pushUrl + Single模式</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#replaceUrl-Single%E6%A8%A1%E5%BC%8F"><span class="nav-number">5.2.1.4.</span> <span class="nav-text">replaceUrl + Single模式</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E8%B7%AF%E7%94%B1%E8%B7%B3%E8%BD%AC%E4%BC%A0%E5%80%BC"><span class="nav-number">5.2.2.</span> <span class="nav-text">路由跳转传值</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E9%A1%B5%E9%9D%A2%E8%BF%94%E5%9B%9E"><span class="nav-number">5.2.3.</span> <span class="nav-text">页面返回</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E9%A1%B5%E9%9D%A2%E8%BF%94%E5%9B%9E%E5%89%8D%E5%A2%9E%E5%8A%A0%E4%B8%80%E4%B8%AA%E8%AF%A2%E9%97%AE%E6%A1%86"><span class="nav-number">5.2.4.</span> <span class="nav-text">页面返回前增加一个询问框</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%91%BD%E5%90%8D%E8%B7%AF%E7%94%B1"><span class="nav-number">5.2.5.</span> <span class="nav-text">命名路由</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%8A%B6%E6%80%81%E7%AE%A1%E7%90%86"><span class="nav-number">6.</span> <span class="nav-text">状态管理</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%AE%A1%E7%90%86%E7%BB%84%E4%BB%B6%E6%8B%A5%E6%9C%89%E7%9A%84%E7%8A%B6%E6%80%81"><span class="nav-number">6.1.</span> <span class="nav-text">管理组件拥有的状态</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#State"><span class="nav-number">6.1.1.</span> <span class="nav-text">@State</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Prop"><span class="nav-number">6.1.2.</span> <span class="nav-text">@Prop</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Link"><span class="nav-number">6.1.3.</span> <span class="nav-text">@Link</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Provide-Consume"><span class="nav-number">6.1.4.</span> <span class="nav-text">@Provide @Consume</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Watch"><span class="nav-number">6.1.5.</span> <span class="nav-text">@Watch</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%AE%A1%E7%90%86%E5%BA%94%E7%94%A8%E6%8B%A5%E6%9C%89%E7%9A%84%E7%8A%B6%E6%80%81"><span class="nav-number">6.2.</span> <span class="nav-text">管理应用拥有的状态</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%A6%82%E8%BF%B0"><span class="nav-number">6.2.1.</span> <span class="nav-text">概述</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#LocalStorage%EF%BC%9A%E9%A1%B5%E9%9D%A2%E7%BA%A7-UI-%E7%8A%B6%E6%80%81%E5%AD%98%E5%82%A8"><span class="nav-number">6.2.2.</span> <span class="nav-text">LocalStorage：页面级 UI 状态存储</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#%E6%A6%82%E8%BF%B0-1"><span class="nav-number">6.2.2.1.</span> <span class="nav-text">概述</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E9%99%90%E5%88%B6%E6%9D%A1%E4%BB%B6"><span class="nav-number">6.2.2.2.</span> <span class="nav-text">限制条件</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#LocalStorageProp"><span class="nav-number">6.2.2.3.</span> <span class="nav-text">@LocalStorageProp</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#LocalStorageLink"><span class="nav-number">6.2.2.4.</span> <span class="nav-text">@LocalStorageLink</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E4%BD%BF%E7%94%A8%E5%9C%BA%E6%99%AF"><span class="nav-number">6.2.2.5.</span> <span class="nav-text">使用场景</span></a><ol class="nav-child"><li class="nav-item nav-level-6"><a class="nav-link" href="#%E5%BA%94%E7%94%A8%E9%80%BB%E8%BE%91%E4%BD%BF%E7%94%A8-LocalStorage"><span class="nav-number">6.2.2.5.1.</span> <span class="nav-text">应用逻辑使用 LocalStorage</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#%E4%BB%8E-UI-%E5%86%85%E9%83%A8%E4%BD%BF%E7%94%A8-LocalStorage"><span class="nav-number">6.2.2.5.2.</span> <span class="nav-text">从 UI 内部使用 LocalStorage</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#LocalStorageProp-%E5%92%8C-LocalStorage-%E5%8D%95%E5%90%91%E5%90%8C%E6%AD%A5%E7%9A%84%E7%AE%80%E5%8D%95%E5%9C%BA%E6%99%AF"><span class="nav-number">6.2.2.5.3.</span> <span class="nav-text">@LocalStorageProp 和 LocalStorage 单向同步的简单场景</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#LocalStorageLink-%E5%92%8C-LocalStorage-%E5%8F%8C%E5%90%91%E5%90%8C%E6%AD%A5%E7%9A%84%E7%AE%80%E5%8D%95%E5%9C%BA%E6%99%AF"><span class="nav-number">6.2.2.5.4.</span> <span class="nav-text">@LocalStorageLink 和 LocalStorage 双向同步的简单场景</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#%E5%85%84%E5%BC%9F%E7%BB%84%E4%BB%B6%E4%B9%8B%E9%97%B4%E5%90%8C%E6%AD%A5%E7%8A%B6%E6%80%81%E5%8F%98%E9%87%8F"><span class="nav-number">6.2.2.5.5.</span> <span class="nav-text">兄弟组件之间同步状态变量</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#%E5%B0%86-LocalStorage-%E5%AE%9E%E4%BE%8B%E4%BB%8E-UIAbility-%E5%85%B1%E4%BA%AB%E5%88%B0%E4%B8%80%E4%B8%AA%E6%88%96%E5%A4%9A%E4%B8%AA%E8%A7%86%E5%9B%BE"><span class="nav-number">6.2.2.5.6.</span> <span class="nav-text">将 LocalStorage 实例从 UIAbility 共享到一个或多个视图</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#%E8%87%AA%E5%AE%9A%E4%B9%89%E7%BB%84%E4%BB%B6%E6%8E%A5%E6%94%B6LocalStorage%E5%AE%9E%E4%BE%8B"><span class="nav-number">6.2.2.5.7.</span> <span class="nav-text">自定义组件接收LocalStorage实例</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#%E5%BD%93%E8%87%AA%E5%AE%9A%E4%B9%89%E7%BB%84%E4%BB%B6%E6%B2%A1%E6%9C%89%E5%AE%9A%E4%B9%89%E5%B1%9E%E6%80%A7%E6%97%B6%EF%BC%8C%E5%8F%AF%E4%BB%A5%E5%8F%AA%E4%BC%A0%E5%85%A5%E4%B8%80%E4%B8%AALocalStorage%E5%AE%9E%E4%BE%8B%E4%BD%9C%E4%B8%BA%E5%85%A5%E5%8F%82"><span class="nav-number">6.2.2.5.8.</span> <span class="nav-text">当自定义组件没有定义属性时，可以只传入一个LocalStorage实例作为入参</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#%E5%BD%93%E5%AE%9A%E4%B9%89%E7%9A%84%E5%B1%9E%E6%80%A7%E4%B8%8D%E9%9C%80%E8%A6%81%E4%BB%8E%E7%88%B6%E7%BB%84%E4%BB%B6%E5%88%9D%E5%A7%8B%E5%8C%96%E5%8F%98%E9%87%8F%E6%97%B6%EF%BC%8C%E7%AC%AC%E4%B8%80%E4%B8%AA%E5%8F%82%E6%95%B0%E9%9C%80%E8%A6%81%E4%BC%A0"><span class="nav-number">6.2.2.5.9.</span> <span class="nav-text">当定义的属性不需要从父组件初始化变量时，第一个参数需要传{}</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#Navigation%E7%BB%84%E4%BB%B6%E5%92%8CLocalStorage%E8%81%94%E5%90%88%E4%BD%BF%E7%94%A8"><span class="nav-number">6.2.2.5.10.</span> <span class="nav-text">Navigation组件和LocalStorage联合使用</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#LocalStorage%E6%94%AF%E6%8C%81%E8%81%94%E5%90%88%E7%B1%BB%E5%9E%8B"><span class="nav-number">6.2.2.5.11.</span> <span class="nav-text">LocalStorage支持联合类型</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#%E8%A3%85%E9%A5%B0Date%E7%B1%BB%E5%9E%8B%E5%8F%98%E9%87%8F"><span class="nav-number">6.2.2.5.12.</span> <span class="nav-text">装饰Date类型变量</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#%E8%A3%85%E9%A5%B0Map%E7%B1%BB%E5%9E%8B%E5%8F%98%E9%87%8F"><span class="nav-number">6.2.2.5.13.</span> <span class="nav-text">装饰Map类型变量</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#%E8%A3%85%E9%A5%B0Set%E7%B1%BB%E5%9E%8B%E5%8F%98%E9%87%8F"><span class="nav-number">6.2.2.5.14.</span> <span class="nav-text">装饰Set类型变量</span></a></li></ol></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#AppStorage%EF%BC%9A%E5%BA%94%E7%94%A8%E5%85%A8%E5%B1%80%E7%9A%84-UI-%E7%8A%B6%E6%80%81%E5%AD%98%E5%82%A8"><span class="nav-number">6.2.3.</span> <span class="nav-text">AppStorage：应用全局的 UI 状态存储</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#%E6%A6%82%E8%BF%B0-2"><span class="nav-number">6.2.3.1.</span> <span class="nav-text">概述</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#StorageProp"><span class="nav-number">6.2.3.2.</span> <span class="nav-text">@StorageProp</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#StorageLink"><span class="nav-number">6.2.3.3.</span> <span class="nav-text">@StorageLink</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E4%BD%BF%E7%94%A8%E5%9C%BA%E6%99%AF-1"><span class="nav-number">6.2.3.4.</span> <span class="nav-text">使用场景</span></a><ol class="nav-child"><li class="nav-item nav-level-6"><a class="nav-link" href="#%E4%BB%8E%E5%BA%94%E7%94%A8%E9%80%BB%E8%BE%91%E4%BD%BF%E7%94%A8AppStorage%E5%92%8CLocalStorage"><span class="nav-number">6.2.3.4.1.</span> <span class="nav-text">从应用逻辑使用AppStorage和LocalStorage</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#%E4%BB%8EUI%E5%86%85%E9%83%A8%E4%BD%BF%E7%94%A8AppStorage%E5%92%8CLocalStorage"><span class="nav-number">6.2.3.4.2.</span> <span class="nav-text">从UI内部使用AppStorage和LocalStorage</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#%E4%B8%8D%E5%BB%BA%E8%AE%AE%E5%80%9F%E5%8A%A9-StorageLink%E7%9A%84%E5%8F%8C%E5%90%91%E5%90%8C%E6%AD%A5%E6%9C%BA%E5%88%B6%E5%AE%9E%E7%8E%B0%E4%BA%8B%E4%BB%B6%E9%80%9A%E7%9F%A5"><span class="nav-number">6.2.3.4.3.</span> <span class="nav-text">不建议借助@StorageLink的双向同步机制实现事件通知</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#AppStorage%E6%94%AF%E6%8C%81%E8%81%94%E5%90%88%E7%B1%BB%E5%9E%8B"><span class="nav-number">6.2.3.4.4.</span> <span class="nav-text">AppStorage支持联合类型</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#%E8%A3%85%E9%A5%B0Date%E7%B1%BB%E5%9E%8B%E5%8F%98%E9%87%8F-1"><span class="nav-number">6.2.3.4.5.</span> <span class="nav-text">装饰Date类型变量</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#%E8%A3%85%E9%A5%B0Map%E7%B1%BB%E5%9E%8B%E5%8F%98%E9%87%8F-1"><span class="nav-number">6.2.3.4.6.</span> <span class="nav-text">装饰Map类型变量</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#%E8%A3%85%E9%A5%B0Set%E7%B1%BB%E5%9E%8B%E5%8F%98%E9%87%8F-1"><span class="nav-number">6.2.3.4.7.</span> <span class="nav-text">装饰Set类型变量</span></a></li></ol></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E9%99%90%E5%88%B6%E6%9D%A1%E4%BB%B6-1"><span class="nav-number">6.2.3.5.</span> <span class="nav-text">限制条件</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#PersistentStorage%EF%BC%9A%E6%8C%81%E4%B9%85%E5%8C%96%E5%AD%98%E5%82%A8UI%E7%8A%B6%E6%80%81"><span class="nav-number">6.2.4.</span> <span class="nav-text">PersistentStorage：持久化存储UI状态</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#%E6%A6%82%E8%BF%B0-3"><span class="nav-number">6.2.4.1.</span> <span class="nav-text">概述</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E9%99%90%E5%88%B6%E6%9D%A1%E4%BB%B6-2"><span class="nav-number">6.2.4.2.</span> <span class="nav-text">限制条件</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E4%BD%BF%E7%94%A8%E5%9C%BA%E6%99%AF-2"><span class="nav-number">6.2.4.3.</span> <span class="nav-text">使用场景</span></a><ol class="nav-child"><li class="nav-item nav-level-6"><a class="nav-link" href="#%E4%BB%8EAppStorage%E4%B8%AD%E8%AE%BF%E9%97%AEPersistentStorage%E5%88%9D%E5%A7%8B%E5%8C%96%E7%9A%84%E5%B1%9E%E6%80%A7"><span class="nav-number">6.2.4.3.1.</span> <span class="nav-text">从AppStorage中访问PersistentStorage初始化的属性</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#%E5%9C%A8PersistentStorage%E4%B9%8B%E5%89%8D%E8%AE%BF%E9%97%AEAppStorage%E4%B8%AD%E7%9A%84%E5%B1%9E%E6%80%A7"><span class="nav-number">6.2.4.3.2.</span> <span class="nav-text">在PersistentStorage之前访问AppStorage中的属性</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#%E5%9C%A8PersistentStorage%E4%B9%8B%E5%90%8E%E8%AE%BF%E9%97%AEAppStorage%E4%B8%AD%E7%9A%84%E5%B1%9E%E6%80%A7"><span class="nav-number">6.2.4.3.3.</span> <span class="nav-text">在PersistentStorage之后访问AppStorage中的属性</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#%E6%94%AF%E6%8C%81%E8%81%94%E5%90%88%E7%B1%BB%E5%9E%8B"><span class="nav-number">6.2.4.3.4.</span> <span class="nav-text">支持联合类型</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#%E8%A3%85%E9%A5%B0Date%E7%B1%BB%E5%9E%8B%E5%8F%98%E9%87%8F-2"><span class="nav-number">6.2.4.3.5.</span> <span class="nav-text">装饰Date类型变量</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#%E8%A3%85%E9%A5%B0Map%E7%B1%BB%E5%9E%8B%E5%8F%98%E9%87%8F-2"><span class="nav-number">6.2.4.3.6.</span> <span class="nav-text">装饰Map类型变量</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#%E8%A3%85%E9%A5%B0Set%E7%B1%BB%E5%9E%8B%E5%8F%98%E9%87%8F-2"><span class="nav-number">6.2.4.3.7.</span> <span class="nav-text">装饰Set类型变量</span></a></li></ol></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Environment%EF%BC%9A%E8%AE%BE%E5%A4%87%E7%8E%AF%E5%A2%83%E6%9F%A5%E8%AF%A2"><span class="nav-number">6.2.5.</span> <span class="nav-text">Environment：设备环境查询</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#Environment%E5%86%85%E7%BD%AE%E5%8F%82%E6%95%B0"><span class="nav-number">6.2.5.1.</span> <span class="nav-text">Environment内置参数</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E4%BD%BF%E7%94%A8%E5%9C%BA%E6%99%AF-3"><span class="nav-number">6.2.5.2.</span> <span class="nav-text">使用场景</span></a><ol class="nav-child"><li class="nav-item nav-level-6"><a class="nav-link" href="#%E4%BB%8EUI%E4%B8%AD%E8%AE%BF%E9%97%AEEnvironment%E5%8F%82%E6%95%B0"><span class="nav-number">6.2.5.2.1.</span> <span class="nav-text">从UI中访问Environment参数</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#%E5%BA%94%E7%94%A8%E9%80%BB%E8%BE%91%E4%BD%BF%E7%94%A8Environment"><span class="nav-number">6.2.5.2.2.</span> <span class="nav-text">应用逻辑使用Environment</span></a></li></ol></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E9%99%90%E5%88%B6%E6%9D%A1%E4%BB%B6-3"><span class="nav-number">6.2.5.3.</span> <span class="nav-text">限制条件</span></a></li></ol></li></ol></li></ol></li></ol></div>
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="明年今日"
      src="/images/avatar.jpg">
  <p class="site-author-name" itemprop="name">明年今日</p>
  <div class="site-description" itemprop="description">终身学习者。</div>
</div>
<div class="site-state-wrap animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        <a href="/archives/">
          <span class="site-state-item-count">27</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
          <a href="/categories/">
        <span class="site-state-item-count">12</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
          <a href="/tags/">
        <span class="site-state-item-count">25</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author animated">
      <span class="links-of-author-item">
        <span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL3poaWNo" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;zhich"><i class="fab fa-github fa-fw"></i>GitHub</span>
      </span>
      <span class="links-of-author-item">
        <span class="exturl" data-url="bWFpbHRvOnpoaWNoMTEyMTM0QGdtYWlsLmNvbQ==" title="E-Mail → mailto:zhich112134@gmail.com"><i class="fa fa-envelope fa-fw"></i>E-Mail</span>
      </span>
  </div>
  <div class="cc-license animated" itemprop="license">
    <span class="exturl cc-opacity" data-url="aHR0cHM6Ly9jcmVhdGl2ZWNvbW1vbnMub3JnL2xpY2Vuc2VzL2J5LW5jLXNhLzQuMC9kZWVkLnpo"><img src="https://cdnjs.cloudflare.com/ajax/libs/creativecommons-vocabulary/2020.11.3/assets/license_badges/big/by_nc_sa.svg" alt="Creative Commons"></span>
  </div>

        </div>
      </div>
    </div>

    
  </aside>


    </div>

    <div class="main-inner post posts-expand">


  


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://zhich.github.io/2024/05/18/%E9%B8%BF%E8%92%99%E5%BC%80%E5%8F%91%E6%95%99%E7%A8%8B/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="明年今日">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="明年今日">
      <meta itemprop="description" content="终身学习者。">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="鸿蒙开发教程 | 明年今日">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          鸿蒙开发教程
        </h1>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2024-05-18 11:17:00" itemprop="dateCreated datePublished" datetime="2024-05-18T11:17:00+08:00">2024-05-18</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2024-07-06 11:28:39" itemprop="dateModified" datetime="2024-07-06T11:28:39+08:00">2024-07-06</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E9%B8%BF%E8%92%99%E5%BC%80%E5%8F%91/" itemprop="url" rel="index"><span itemprop="name">鸿蒙开发</span></a>
        </span>
    </span>

  
    <span class="post-meta-item" title="阅读次数" id="busuanzi_container_page_pv">
      <span class="post-meta-item-icon">
        <i class="far fa-eye"></i>
      </span>
      <span class="post-meta-item-text">阅读次数：</span>
      <span id="busuanzi_value_page_pv"></span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody"><meta name="referrer" content="no-referrer" />



<h2 id="HarmonyOS-项目目录介绍"><a href="#HarmonyOS-项目目录介绍" class="headerlink" title="HarmonyOS 项目目录介绍"></a>HarmonyOS 项目目录介绍</h2><h2 id="ArkTS-基本语法详解"><a href="#ArkTS-基本语法详解" class="headerlink" title="ArkTS 基本语法详解"></a>ArkTS 基本语法详解</h2><p>HarmonyOS 4.0 以后可以使用 ArkTS 或者 HTML&#x2F;CSS&#x2F;JS 技术来开发 HarmonyOS 应用，而 ArkTS 是 HarmonyOS 优选的主力应用开发语言。  </p>
<p>ArkTS 围绕应用开发在 TypeScript（简称 TS）生态基础上做了进一步扩展，继承了 TS 的所有特性，是 TS 的超集。因此，在学习 ArkTS 语言之前，建议首先具备 TS 语言开发能力。</p>
<p>当前，ArkTS 在 TS 的基础上主要扩展了如下能力：</p>
<ul>
<li><strong>基本语法</strong>：ArkTS 定义了声明式 UI 描述、自定义组件和动态扩展 UI 元素的能力，再配合 ArkUI 开发框架中的系统组件及其相关的事件方法、属性方法等共同构成了 UI 开发的主体。</li>
<li><strong>状态管理</strong>：ArkTS 提供了多维度的状态管理机制。在 UI 开发框架中，与 UI 相关联的数据可以在组件内使用，也可以在不同组件层级间传递，比如父子组件之间、爷孙组件之间，还可以在应用全局范围内传递或跨设备传递。另外，从数据的传递形式来看，可分为只读的单向传递和可变更的双向传递。开发者可以灵活的利用这些能力来实现数据和 UI 的联动。</li>
<li><strong>渲染控制</strong>：ArkTS 提供了渲染控制的能力。条件渲染可根据应用的不同状态，渲染对应状态下的 UI 内容。循环渲染可从数据源中迭代获取数据，并在每次迭代过程中创建相应的组件。数据懒加载从数据源中按需迭代数据，并在每次迭代过程中创建相应的组件。</li>
</ul>
<p>未来，ArkTS 会结合应用开发&#x2F;运行的需求持续演进，逐步提供并行和并发能力增强、系统类型增强、分布式开发范式等更多特性。  </p>
<h3 id="ArkTS-基本组成"><a href="#ArkTS-基本组成" class="headerlink" title="ArkTS 基本组成"></a>ArkTS 基本组成</h3><img data-src="https://gitee.com/zch0304/images/raw/master/note/1716005497787.jpg" style="zoom:50%;" /> 

<ul>
<li><strong>装饰器</strong>： 用于装饰类、结构、方法以及变量，并赋予其特殊的含义。如上述示例中 @Entry、@Component 和 @State 都是装饰器，@Component 表示自定义组件，@Entry 表示该自定义组件为入口组件，@State 表示组件中的状态变量，状态变量变化会触发 UI 刷新。  </li>
<li><strong>自定义组件</strong>：可复用的 UI 单元，可组合其它组件，如上述被 @Component 装饰的 struct Index。  </li>
<li><strong>UI 描述</strong>：以声明式的方式来描述 UI 的结构，例如 build() 方法中的代码块  。</li>
<li><strong>系统组件</strong>：ArkUI 框架中默认内置的基础和容器组件，可直接被开发者调用，比如示例中的 Column、Text、Divider、Button。  </li>
<li><strong>事件方法</strong>：组件可以通过链式调用设置多个事件的响应逻辑，如跟随在 Button 后面的 onClick()。  </li>
<li><strong>属性方法</strong>：组件可以通过链式调用配置多项属性，如 fontSize()、width()、height()、backgroundColor() 等。</li>
</ul>
<p>系统组件、属性方法、事件方法具体使用可参考<span class="exturl" data-url="aHR0cHM6Ly9kZXZlbG9wZXIuaHVhd2VpLmNvbS9jb25zdW1lci9jbi9kb2MvaGFybW9ueW9zLXJlZmVyZW5jZXMtVjIvdHMtY29tcG9uZW50cy1zdW1tYXJ5LTAwMDAwMDE0NzgxODEzNjktVjI=">基于 ArkTS 的声明式开发范式<i class="fa fa-external-link-alt"></i></span>。</p>
<h3 id="ArkTS-布局结构"><a href="#ArkTS-布局结构" class="headerlink" title="ArkTS 布局结构"></a>ArkTS 布局结构</h3><p>布局的结构通常是分层级的，代表了用户界面中的整体架构。一个常见的页面结构如下所示：</p>
<img data-src="https://gitee.com/zch0304/images/raw/master/note/1716013357130.jpg" style="zoom:50%;" /> 

<p>为实现上述效果，需要在页面中声明对应的元素。其中，Page 表示页面的根节点，Column&#x2F;Row 等元素为系统组件。针对不同的页面结构，ArkUI 提供了不同的布局组件来帮助我们实现对应布局的效果，例如 Row 用于实现线性布局等。  </p>
<h3 id="ArkTS-数据类型"><a href="#ArkTS-数据类型" class="headerlink" title="ArkTS 数据类型"></a>ArkTS 数据类型</h3><p>TypeScript 支持一些基础的数据类型，如布尔型、数组、字符串等。</p>
<h4 id="数字"><a href="#数字" class="headerlink" title="数字"></a>数字</h4><p>TypeScript 里的所有数字都是浮点数，这些浮点数的类型是 <code>number</code>。除了支持十进制，还支持二进制、八进制、十六进制。  </p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 数值类型</span></span><br><span class="line"><span class="keyword">let</span> <span class="attr">num1</span>: <span class="built_in">number</span> = <span class="number">18</span> <span class="comment">// 十进制</span></span><br><span class="line"><span class="keyword">let</span> <span class="attr">num2</span>: <span class="built_in">number</span> = <span class="number">0b10111</span> <span class="comment">// ob 二进制</span></span><br><span class="line"><span class="keyword">let</span> <span class="attr">num3</span>: <span class="built_in">number</span> = <span class="number">0o14</span> <span class="comment">// 0o 八进制</span></span><br><span class="line"><span class="keyword">let</span> <span class="attr">num4</span>: <span class="built_in">number</span> = <span class="number">0x1f</span> <span class="comment">// 0x 十六进制</span></span><br></pre></td></tr></table></figure>

<h4 id="字符串"><a href="#字符串" class="headerlink" title="字符串"></a>字符串</h4><p>TypeScript 里使用 <code>string</code> 表示文本数据类型， 可以使用双引号（ “ ）或单引号（ ‘ ）表示字符串或者反引号（&#96;）。</p>
<blockquote>
<p>反引号中可以配合 ${} 解析变量。</p>
</blockquote>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 字符串类型</span></span><br><span class="line"><span class="keyword">let</span> <span class="attr">str1</span>: <span class="built_in">string</span> = <span class="string">&#x27;HarmonyOS Next不支持Android 应用了&#x27;</span></span><br><span class="line"><span class="keyword">let</span> <span class="attr">str2</span>: <span class="built_in">string</span> = <span class="string">&quot;ArkTS&quot;</span></span><br><span class="line"><span class="keyword">let</span> <span class="attr">str3</span>: <span class="built_in">string</span> = <span class="string">`马总今年<span class="subst">$&#123;num1&#125;</span>岁了`</span></span><br></pre></td></tr></table></figure>

<h4 id="布尔值"><a href="#布尔值" class="headerlink" title="布尔值"></a>布尔值</h4><p>TypeScript 中可以使用 <code>boolean</code> 来表示这个变量是布尔值，可以赋值为 true 或者 false。</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 布尔类型 true、false</span></span><br><span class="line"><span class="keyword">let</span> <span class="attr">stateOn</span>: <span class="built_in">boolean</span> = <span class="literal">true</span></span><br><span class="line"><span class="keyword">let</span> <span class="attr">stateOff</span>: <span class="built_in">boolean</span> = <span class="literal">false</span></span><br></pre></td></tr></table></figure>

<h4 id="联合类型"><a href="#联合类型" class="headerlink" title="联合类型"></a>联合类型</h4><p>联合类型（Union Types）表示取值可以为多种类型中的一种。如果一个数据可能有多重类型，或者当下还没想好用哪个类型 …</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="attr">flag</span>: <span class="built_in">string</span> | <span class="built_in">number</span> | <span class="built_in">boolean</span></span><br><span class="line">flag = <span class="string">&#x27;1&#x27;</span></span><br><span class="line">flag = <span class="number">1</span></span><br><span class="line">flag = <span class="literal">true</span></span><br></pre></td></tr></table></figure>

<h4 id="数组"><a href="#数组" class="headerlink" title="数组"></a>数组</h4><p>TypeScrip 有两种方式可以定义数组。</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 第一种是使用数组泛型，Array&lt;元素类型&gt;。</span></span><br><span class="line"><span class="keyword">let</span> <span class="attr">course1</span>: <span class="title class_">Array</span>&lt;<span class="built_in">string</span>&gt; = [<span class="string">&#x27;Flutter&#x27;</span>, <span class="string">&quot;HarmonyOS&quot;</span>, <span class="string">`Golang`</span>]</span><br><span class="line"></span><br><span class="line"><span class="comment">// 第二种是在元素类型后面接上 []，表示由此类型元素组成的一个数组。</span></span><br><span class="line"><span class="keyword">let</span> <span class="attr">course2</span>: <span class="built_in">string</span>[] = [<span class="string">&#x27;Flutter&#x27;</span>, <span class="string">&quot;HarmonyOS&quot;</span>, <span class="string">`Golang`</span>]</span><br></pre></td></tr></table></figure>

<h4 id="枚举"><a href="#枚举" class="headerlink" title="枚举"></a>枚举</h4><p>enum 类型是对 JavaScript 标准数据类型的一个补充，使用枚举类型可以为一组数值赋予友好的名字。</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">enum</span> <span class="title class_">Color</span> &#123;<span class="title class_">Red</span>, <span class="title class_">Green</span>, <span class="title class_">Blue</span>&#125;</span><br><span class="line"><span class="keyword">let</span> <span class="attr">c</span>: <span class="title class_">Color</span> = <span class="title class_">Color</span>.<span class="property">Green</span></span><br></pre></td></tr></table></figure>

<h4 id="元组"><a href="#元组" class="headerlink" title="元组"></a>元组</h4><p>元组类型允许表示一个已知元素数量和类型的数组，各元素的类型不必相同。 比如，你可以定义一对值分别为 string 和 number 类型的元组。</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="attr">x</span>: [<span class="built_in">string</span>, <span class="built_in">number</span>]</span><br><span class="line">x = [<span class="string">&#x27;hello&#x27;</span>, <span class="number">10</span>] <span class="comment">// OK</span></span><br><span class="line">x = [<span class="number">10</span>, <span class="string">&#x27;hello&#x27;</span>] <span class="comment">// Error</span></span><br></pre></td></tr></table></figure>

<h4 id="Any（不推荐使用）"><a href="#Any（不推荐使用）" class="headerlink" title="Any（不推荐使用）"></a>Any（不推荐使用）</h4><p>any 类型，表示的是变量可以是任意类型，相当于关闭了 ts 的类型检测功能，不建议使用。如果是 any 类型，则允许被赋值为任意类型。</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="attr">a</span>: <span class="built_in">any</span> = <span class="number">666</span></span><br><span class="line">a = <span class="string">&quot;Semlinker&quot;</span> <span class="comment">// 通过，any 类型可以被赋任意值</span></span><br><span class="line">a = <span class="literal">false</span> <span class="comment">// 通过，any 类型可以被赋任意值</span></span><br><span class="line">a = <span class="number">66</span> <span class="comment">// 通过，any 类型可以被赋任意值</span></span><br><span class="line">a = <span class="literal">undefined</span> <span class="comment">// 通过，any 类型可以被赋任意值</span></span><br><span class="line">a = <span class="literal">null</span> <span class="comment">// 通过，any 类型可以被赋任意值</span></span><br><span class="line">a = [] <span class="comment">// 通过，any 类型可以被赋任意值</span></span><br><span class="line">a = &#123;&#125; <span class="comment">// 通过，any 类型可以被赋任意值</span></span><br></pre></td></tr></table></figure>

<h4 id="Unknown"><a href="#Unknown" class="headerlink" title="Unknown"></a>Unknown</h4><p>unknown 与 any 一样，也相当于关闭了 ts 的类型检测功能。有时候，我们会想要为那些在编程阶段还不清楚类型的变量指定一个类型。这种情况下，我们不希望类型检查器对这些值进行检查而是直接让它们通过编译阶段的检查。那么我们可以使用 unknown 类型来标记这些变量。（同 any ）。</p>
 <figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="attr">notSure</span>: <span class="built_in">unknown</span> = <span class="number">4</span></span><br><span class="line">notSure = <span class="string">&#x27;maybe a string instead&#x27;</span></span><br><span class="line">notSure = <span class="literal">false</span></span><br></pre></td></tr></table></figure>

<h4 id="Void"><a href="#Void" class="headerlink" title="Void"></a>Void</h4><p>当一个函数没有返回值时，你通常会见到其返回值类型是 void。</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">test</span>(<span class="params"></span>): <span class="built_in">void</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;This is function is void&#x27;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="Null-和-Undefined"><a href="#Null-和-Undefined" class="headerlink" title="Null 和 Undefined"></a>Null 和 Undefined</h4><p>TypeScript 里，null 和 undefined 两者各自有自己的类型分别叫做 null 和 undefined。  </p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="attr">u</span>: <span class="literal">undefined</span> = <span class="literal">undefined</span></span><br><span class="line"><span class="keyword">let</span> <span class="attr">n</span>: <span class="literal">null</span> = <span class="literal">null</span></span><br></pre></td></tr></table></figure>

<h3 id="ArkTS-渲染控制"><a href="#ArkTS-渲染控制" class="headerlink" title="ArkTS 渲染控制"></a>ArkTS 渲染控制</h3><h4 id="if-else：条件渲染"><a href="#if-else：条件渲染" class="headerlink" title="if&#x2F;else：条件渲染"></a>if&#x2F;else：条件渲染</h4><ul>
<li>支持 if、else 和 else if 语句。</li>
<li>if、else if 后跟随的条件语句可以使用状态变量。</li>
<li>允许在容器组件内使用，通过条件渲染语句构建不同的子组件。</li>
<li>当 if、else if 后跟随的状态判断中使用的状态变量值变化时，条件渲染语句会进行更新条件可以包括 Typescript 表达式。</li>
</ul>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (条件表达式) &#123;</span><br><span class="line">  组件内容<span class="number">1</span></span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">  组件内容<span class="number">2</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="ForEach：循环渲染"><a href="#ForEach：循环渲染" class="headerlink" title="ForEach：循环渲染"></a>ForEach：循环渲染</h4><p>ForEach 接口基于数组类型数据来进行循环渲染，需要与容器组件配合使用，且接口返回的组件应当是允许包含在 ForEach 父容器组件中的子组件。例如，ListItem 组件要求 ForEach 的父容器组件必须为 List 组件。</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> arr 要遍历的数组</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> itemGenerator 页面的生成函数</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> keyGenerator 键生成函数，提供唯一标识，如果后续数组中数据发生变化，会判断元素的唯一标识是否发生变化，有变更再去做渲染，这样减少了不必要的渲染，提高了页面的渲染效率（可选参数，如果不填会会有默认的键生成函数，生成规则是用角标拼上数组元素的数据）</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="title class_">ForEach</span>(</span><br><span class="line">  <span class="attr">arr</span>:<span class="title class_">Array</span>&lt;<span class="built_in">any</span>&gt;,</span><br><span class="line">  <span class="attr">itemGenerator</span>:<span class="function">(<span class="params">item: <span class="built_in">any</span>, index: <span class="built_in">number</span></span>) =&gt;</span> <span class="built_in">void</span>,</span><br><span class="line">  keyGenerator ? : <span class="function">(<span class="params">item: <span class="built_in">any</span>, index: <span class="built_in">number</span></span>) =&gt;</span> <span class="built_in">string</span></span><br><span class="line">)</span><br></pre></td></tr></table></figure>

<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="attr">arr</span>: <span class="built_in">number</span>[] = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">4</span>, <span class="number">8</span>, <span class="number">16</span>]</span><br><span class="line"></span><br><span class="line"><span class="meta">@Entry</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line">struct <span class="title class_">ArrayPage</span> &#123;</span><br><span class="line">  </span><br><span class="line">  <span class="attr">arr2</span>: <span class="built_in">string</span>[] = [<span class="string">&#x27;HarmonyOS&#x27;</span>, <span class="string">&#x27;Flutter&#x27;</span>, <span class="string">&#x27;Android&#x27;</span>]</span><br><span class="line"></span><br><span class="line">  <span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">List</span>(&#123; <span class="attr">space</span>: <span class="number">10</span> &#125;) &#123;</span><br><span class="line">      <span class="comment">// 访问全局变量 arr 不要加 this</span></span><br><span class="line">      <span class="title class_">ForEach</span>(arr, <span class="function">(<span class="params">item: <span class="built_in">number</span>, key: <span class="built_in">number</span></span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="title class_">ListItem</span>() &#123;</span><br><span class="line">          <span class="title class_">Text</span>(<span class="string">`<span class="subst">$&#123;item&#125;</span>--<span class="subst">$&#123;key&#125;</span>`</span>)</span><br><span class="line">            .<span class="title function_">fontSize</span>(<span class="number">20</span>)</span><br><span class="line">            .<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">            .<span class="title function_">height</span>(<span class="number">50</span>)</span><br><span class="line">            .<span class="title function_">textAlign</span>(<span class="title class_">TextAlign</span>.<span class="property">Center</span>)</span><br><span class="line">            .<span class="title function_">backgroundColor</span>(<span class="string">&quot;#eee&quot;</span>)</span><br><span class="line">            .<span class="title function_">borderRadius</span>(<span class="number">10</span>)</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;, <span class="function">(<span class="params">item: <span class="built_in">number</span></span>) =&gt;</span> item.<span class="title function_">toString</span>())</span><br><span class="line"></span><br><span class="line">      <span class="comment">// 访问局部变量 arr2 要加 this</span></span><br><span class="line">      <span class="title class_">ForEach</span>(<span class="variable language_">this</span>.<span class="property">arr2</span>, <span class="function">(<span class="params">item: <span class="built_in">string</span></span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="title class_">ListItem</span>() &#123;</span><br><span class="line">          <span class="title class_">Text</span>(item)</span><br><span class="line">            .<span class="title function_">fontSize</span>(<span class="number">20</span>)</span><br><span class="line">            .<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">            .<span class="title function_">height</span>(<span class="number">50</span>)</span><br><span class="line">            .<span class="title function_">textAlign</span>(<span class="title class_">TextAlign</span>.<span class="property">Center</span>)</span><br><span class="line">            .<span class="title function_">backgroundColor</span>(<span class="title class_">Color</span>.<span class="property">Gray</span>)</span><br><span class="line">            .<span class="title function_">borderRadius</span>(<span class="number">10</span>)</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;, <span class="function">(<span class="params">item: <span class="built_in">string</span></span>) =&gt;</span> item)</span><br><span class="line">    &#125;.<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">    .<span class="title function_">height</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">    .<span class="title function_">padding</span>(<span class="number">10</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>实际开发中尽量不要使用全局变量，组件中使用全局变量不需要加 this。</p>
</blockquote>
<h4 id="LazyForEach：数据懒加载"><a href="#LazyForEach：数据懒加载" class="headerlink" title="LazyForEach：数据懒加载"></a>LazyForEach：数据懒加载</h4><p>LazyForEach 从提供的数据源中按需迭代数据，并在每次迭代过程中创建相应的组件。当 LazyForEach 在滚动容器中使用，框架会根据滚动容器可视区域按需创建组件，当组件滑出可视区域外时，框架会进行组件销毁回收以降低内存占用。</p>
<h2 id="基础组件"><a href="#基础组件" class="headerlink" title="基础组件"></a>基础组件</h2><h3 id="Image"><a href="#Image" class="headerlink" title="Image"></a>Image</h3><p>应用中显示图片需要使用 Image 组件实现，Image 支持多种图片格式，包括 png、jpg、bmp、svg 和 gif，具体用法请参考 <span class="exturl" data-url="aHR0cHM6Ly9kZXZlbG9wZXIuaHVhd2VpLmNvbS9jb25zdW1lci9jbi9kb2MvaGFybW9ueW9zLXJlZmVyZW5jZXMvdHMtYmFzaWMtY29tcG9uZW50cy1pbWFnZS0wMDAwMDAxODE1OTI3NTcy">Image<i class="fa fa-external-link-alt"></i></span> 组件。</p>
<p>Image 通过调用接口来创建，接口调用形式如下：</p>
<figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Image</span>(<span class="attr">src</span>: <span class="title class_">PixelMap</span> | <span class="title class_">ResourceStr</span> | <span class="title class_">DrawableDescriptor</span>)</span><br></pre></td></tr></table></figure>

<p>该接口通过图片数据源获取图片，支持本地图片和网络图片的渲染展示。其中，src 是图片的数据源，加载方式请参考<span class="exturl" data-url="aHR0cHM6Ly9kZXZlbG9wZXIuaHVhd2VpLmNvbS9jb25zdW1lci9jbi9kb2MvaGFybW9ueW9zLWd1aWRlcy9hcmt0cy1ncmFwaGljcy1kaXNwbGF5LTAwMDAwMDE4MTM0MTYwODgjWkgtQ05fVE9QSUNfMDAwMDAwMTgxMzQxNjA4OF9fJUU1JThBJUEwJUU4JUJEJUJEJUU1JTlCJUJFJUU3JTg5JTg3JUU4JUI1JTg0JUU2JUJBJTkw">加载图片资源<i class="fa fa-external-link-alt"></i></span>。</p>
<h4 id="存档图类型数据源"><a href="#存档图类型数据源" class="headerlink" title="存档图类型数据源"></a>存档图类型数据源</h4><p>存档图类型的数据源可以分为本地资源、网络资源、Resource 资源、媒体库资源和 base64。</p>
<ul>
<li><p>本地资源</p>
<p>创建文件夹，将本地图片放入 ets 文件夹下的任意位置。</p>
<p>Image 组件引入本地图片路径，即可显示图片（根目录为 ets 文件夹）。</p>
<figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Image</span>(<span class="string">&#x27;images/view.jpg&#x27;</span>)</span><br><span class="line">.<span class="title function_">width</span>(<span class="number">200</span>)</span><br></pre></td></tr></table></figure>
</li>
<li><p>网络资源</p>
<p>引入网络图片需申请权限 ohos.permission.INTERNET，具体申请方式请参考<span class="exturl" data-url="aHR0cHM6Ly9kZXZlbG9wZXIuaHVhd2VpLmNvbS9jb25zdW1lci9jbi9kb2MvaGFybW9ueW9zLWd1aWRlcy9kZWNsYXJlLXBlcm1pc3Npb25zLTAwMDAwMDE4MjA5OTk2NjU=">声明权限<i class="fa fa-external-link-alt"></i></span>。此时，Image 组件的 src 参数为网络图片的链接。</p>
<p>Image 组件首次加载网络图片时，需要请求网络资源，非首次加载时，默认从缓存中直接读取图片，更多图片缓存设置请参考 <span class="exturl" data-url="aHR0cHM6Ly9kZXZlbG9wZXIuaHVhd2VpLmNvbS9jb25zdW1lci9jbi9kb2MvaGFybW9ueW9zLXJlZmVyZW5jZXMvanMtYXBpcy1zeXN0ZW0tYXBwLTAwMDAwMDE4MjEwMDA3NjUjWkgtQ05fVE9QSUNfMDAwMDAwMTg1Nzg3NjE2NV9fc2V0aW1hZ2VjYWNoZWNvdW50Nw==">setImageCacheCount<i class="fa fa-external-link-alt"></i></span>、<span class="exturl" data-url="aHR0cHM6Ly9kZXZlbG9wZXIuaHVhd2VpLmNvbS9jb25zdW1lci9jbi9kb2MvaGFybW9ueW9zLXJlZmVyZW5jZXMvanMtYXBpcy1zeXN0ZW0tYXBwLTAwMDAwMDE4MjEwMDA3NjUjWkgtQ05fVE9QSUNfMDAwMDAwMTg1Nzg3NjE2NV9fc2V0aW1hZ2VyYXdkYXRhY2FjaGVzaXplNw==">setImageRawDataCacheSize<i class="fa fa-external-link-alt"></i></span>、<span class="exturl" data-url="aHR0cHM6Ly9kZXZlbG9wZXIuaHVhd2VpLmNvbS9jb25zdW1lci9jbi9kb2MvaGFybW9ueW9zLXJlZmVyZW5jZXMvanMtYXBpcy1zeXN0ZW0tYXBwLTAwMDAwMDE4MjEwMDA3NjUjWkgtQ05fVE9QSUNfMDAwMDAwMTg1Nzg3NjE2NV9fc2V0aW1hZ2VmaWxlY2FjaGVzaXplNw==">setImageFileCacheSize<i class="fa fa-external-link-alt"></i></span>。</p>
<p>1、在 src&#x2F;main&#x2F;module.json5 中申请网络权限。</p>
<figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;requestPermissions&quot;</span>: [</span><br><span class="line"> &#123;</span><br><span class="line">    <span class="string">&quot;name&quot;</span>: <span class="string">&quot;ohos.permission.INTERNET&quot;</span></span><br><span class="line"> &#125;</span><br><span class="line">]</span><br></pre></td></tr></table></figure>

<p>2、加载网络图片。</p>
<figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Image</span>(<span class="string">&#x27;https://gitee.com/zch0304/images/raw/master/note/test_icon1.jpg&#x27;</span>)</span><br></pre></td></tr></table></figure>
</li>
<li><p>Resource 资源</p>
<p>使用资源格式可以跨包&#x2F;跨模块引入图片，resources 文件夹下的图片都可以通过 $r 资源接口读取到并转换到 Resource 格式。</p>
<figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// src/main/resources/base/media/icon.png</span></span><br><span class="line"><span class="title class_">Image</span>($r(<span class="string">&#x27;app.media.icon&#x27;</span>))</span><br></pre></td></tr></table></figure>

<p>还可以将图片放在 rawfile 文件夹下。</p>
<figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// src/main/resources/rawfile/example1.png</span></span><br><span class="line"><span class="title class_">Image</span>($rawfile(<span class="string">&#x27;example1.png&#x27;</span>))</span><br></pre></td></tr></table></figure>
</li>
<li><p>媒体库 file:&#x2F;&#x2F;data&#x2F;storage</p>
<p>支持 file:&#x2F;&#x2F;路径前缀的字符串，用于访问通过<span class="exturl" data-url="aHR0cHM6Ly9kZXZlbG9wZXIuaHVhd2VpLmNvbS9jb25zdW1lci9jbi9kb2MvaGFybW9ueW9zLXJlZmVyZW5jZXMvanMtYXBpcy1maWxlLXBpY2tlci0wMDAwMDAxNzc0MTIxNzY2">媒体库<i class="fa fa-external-link-alt"></i></span>提供的图片路径。</p>
<p>1、调用接口获取图库的照片 url。</p>
<figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> picker <span class="keyword">from</span> <span class="string">&#x27;@ohos.file.picker&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">BusinessError</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;@ohos.base&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Entry</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line">struct <span class="title class_">Index</span> &#123;</span><br><span class="line">  <span class="meta">@State</span> <span class="attr">imgDatas</span>: <span class="built_in">string</span>[] = [];</span><br><span class="line">  <span class="comment">// 获取照片 url 集</span></span><br><span class="line">  <span class="title function_">getAllImg</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">      <span class="keyword">let</span> <span class="title class_">PhotoSelectOptions</span>:picker.<span class="property">PhotoSelectOptions</span> = <span class="keyword">new</span> picker.<span class="title class_">PhotoSelectOptions</span>();</span><br><span class="line">      <span class="title class_">PhotoSelectOptions</span>.<span class="property">MIMEType</span> = picker.<span class="property">PhotoViewMIMETypes</span>.<span class="property">IMAGE_TYPE</span>;</span><br><span class="line">      <span class="title class_">PhotoSelectOptions</span>.<span class="property">maxSelectNumber</span> = <span class="number">5</span>;</span><br><span class="line">      <span class="keyword">let</span> <span class="attr">photoPicker</span>:picker.<span class="property">PhotoViewPicker</span> = <span class="keyword">new</span> picker.<span class="title class_">PhotoViewPicker</span>();</span><br><span class="line">      photoPicker.<span class="title function_">select</span>(<span class="title class_">PhotoSelectOptions</span>).<span class="title function_">then</span>(<span class="function">(<span class="params">PhotoSelectResult:picker.PhotoSelectResult</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">imgDatas</span> = <span class="title class_">PhotoSelectResult</span>.<span class="property">photoUris</span>;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">info</span>(<span class="string">&#x27;PhotoViewPicker.select successfully, PhotoSelectResult uri: &#x27;</span> + <span class="title class_">JSON</span>.<span class="title function_">stringify</span>(<span class="title class_">PhotoSelectResult</span>));</span><br><span class="line">      &#125;).<span class="title function_">catch</span>(<span class="function">(<span class="params">err:<span class="built_in">Error</span></span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">let</span> message = (err <span class="keyword">as</span> <span class="title class_">BusinessError</span>).<span class="property">message</span>;</span><br><span class="line">        <span class="keyword">let</span> code = (err <span class="keyword">as</span> <span class="title class_">BusinessError</span>).<span class="property">code</span>;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">`PhotoViewPicker.select failed with. Code: <span class="subst">$&#123;code&#125;</span>, message: <span class="subst">$&#123;message&#125;</span>`</span>);</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125; <span class="keyword">catch</span> (err) &#123;</span><br><span class="line">      <span class="keyword">let</span> message = (err <span class="keyword">as</span> <span class="title class_">BusinessError</span>).<span class="property">message</span>;</span><br><span class="line">      <span class="keyword">let</span> code = (err <span class="keyword">as</span> <span class="title class_">BusinessError</span>).<span class="property">code</span>;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">`PhotoViewPicker failed with. Code: <span class="subst">$&#123;code&#125;</span>, message: <span class="subst">$&#123;message&#125;</span>`</span>);    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// aboutToAppear 中调用上述函数，获取图库的所有图片 url，存在 imgDatas 中</span></span><br><span class="line">  <span class="keyword">async</span> <span class="title function_">aboutToAppear</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="title function_">getAllImg</span>();</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// 使用 imgDatas 的 url 加载图片。</span></span><br><span class="line">  <span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">Column</span>() &#123;</span><br><span class="line">      <span class="title class_">Grid</span>() &#123;</span><br><span class="line">        <span class="title class_">ForEach</span>(<span class="variable language_">this</span>.<span class="property">imgDatas</span>, <span class="function">(<span class="params">item:<span class="built_in">string</span></span>) =&gt;</span> &#123;</span><br><span class="line">          <span class="title class_">GridItem</span>() &#123;</span><br><span class="line">            <span class="title class_">Image</span>(item)</span><br><span class="line">              .<span class="title function_">width</span>(<span class="number">200</span>)</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;, (<span class="attr">item</span>:<span class="built_in">string</span>):<span class="function"><span class="params">string</span> =&gt;</span> <span class="title class_">JSON</span>.<span class="title function_">stringify</span>(item))</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;.<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>).<span class="title function_">height</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>2、从媒体库获取的 url 格式通常如下。</p>
<figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Image</span>(<span class="string">&#x27;file://media/Photos/5&#x27;</span>)</span><br><span class="line">.<span class="title function_">width</span>(<span class="number">200</span>)</span><br></pre></td></tr></table></figure>
</li>
<li><p>base64</p>
<p>路径格式为 data:image&#x2F;[png|jpeg|bmp|webp];base64,[base64 data]，其中 [base64 data] 为 Base64 字符串数据。</p>
<p>Base64 格式字符串可用于存储图片的像素数据，在网页上使用较为广泛。</p>
</li>
</ul>
<h4 id="多媒体像素图"><a href="#多媒体像素图" class="headerlink" title="多媒体像素图"></a>多媒体像素图</h4><p>PixelMap 是图片解码后的像素图，具体用法请参考<span class="exturl" data-url="aHR0cHM6Ly9kZXZlbG9wZXIuaHVhd2VpLmNvbS9jb25zdW1lci9jbi9kb2MvaGFybW9ueW9zLWd1aWRlcy9pbWFnZS1vdmVydmlldy0wMDAwMDAxODIxMDAwMTI5">图片开发指导<i class="fa fa-external-link-alt"></i></span>。以下示例将加载的网络图片返回的数据解码成 PixelMap 格式，再显示在 Image 组件上。</p>
<p>1、创建 PixelMap 状态变量。</p>
<figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@State</span> <span class="attr">image</span>: <span class="title class_">PixelMap</span> | <span class="literal">undefined</span> = <span class="literal">undefined</span>;</span><br></pre></td></tr></table></figure>

<p>2、引用多媒体。</p>
<p>请求网络图片，解码编码 PixelMap。</p>
<p>a. 引用网络权限与媒体库权限。</p>
<figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> http <span class="keyword">from</span> <span class="string">&#x27;@ohos.net.http&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="title class_">ResponseCode</span> <span class="keyword">from</span> <span class="string">&#x27;@ohos.net.http&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> image <span class="keyword">from</span> <span class="string">&#x27;@ohos.multimedia.image&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">BusinessError</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;@ohos.base&#x27;</span>;</span><br></pre></td></tr></table></figure>

<p>b. 填写网络图片地址。</p>
<figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="title class_">OutData</span>: http.<span class="property">HttpResponse</span></span><br><span class="line">http.<span class="title function_">createHttp</span>().<span class="title function_">request</span>(<span class="string">&quot;https://www.example.com/xxx.png&quot;</span>,</span><br><span class="line">  <span class="function">(<span class="params">error: BusinessError, data: http.HttpResponse</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (error) &#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">`http reqeust failed with. Code: <span class="subst">$&#123;error.code&#125;</span>, message: <span class="subst">$&#123;error.message&#125;</span>`</span>);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="title class_">OutData</span> = data</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">)</span><br></pre></td></tr></table></figure>

<p>c. 将网络地址成功返回的数据，编码转码成 pixelMap 的图片格式。</p>
<figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="attr">code</span>: http.<span class="property">ResponseCode</span> | <span class="built_in">number</span> = <span class="title class_">OutData</span>.<span class="property">responseCode</span></span><br><span class="line"><span class="keyword">if</span> (<span class="title class_">ResponseCode</span>.<span class="property">ResponseCode</span>.<span class="property">OK</span> === code) &#123;</span><br><span class="line">  <span class="keyword">let</span> <span class="attr">imageData</span>: <span class="title class_">ArrayBuffer</span> = <span class="title class_">OutData</span>.<span class="property">result</span> <span class="keyword">as</span> <span class="title class_">ArrayBuffer</span>;</span><br><span class="line">  <span class="keyword">let</span> <span class="attr">imageSource</span>: image.<span class="property">ImageSource</span> = image.<span class="title function_">createImageSource</span>(imageData);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">class</span> <span class="title class_">tmp</span> &#123;</span><br><span class="line">    <span class="attr">height</span>: <span class="built_in">number</span> = <span class="number">100</span></span><br><span class="line">    <span class="attr">width</span>: <span class="built_in">number</span> = <span class="number">100</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">let</span> <span class="attr">si</span>: tmp = <span class="keyword">new</span> <span class="title function_">tmp</span>()</span><br><span class="line">  <span class="keyword">let</span> <span class="attr">options</span>: <span class="title class_">Record</span>&lt;<span class="built_in">string</span>, <span class="built_in">number</span> | <span class="built_in">boolean</span> | tmp&gt; = &#123;</span><br><span class="line">    <span class="string">&#x27;alphaType&#x27;</span>: <span class="number">0</span>, <span class="comment">// 透明度</span></span><br><span class="line">    <span class="string">&#x27;editable&#x27;</span>: <span class="literal">false</span>, <span class="comment">// 是否可编辑</span></span><br><span class="line">    <span class="string">&#x27;pixelFormat&#x27;</span>: <span class="number">3</span>, <span class="comment">// 像素格式</span></span><br><span class="line">    <span class="string">&#x27;scaleMode&#x27;</span>: <span class="number">1</span>, <span class="comment">// 缩略值</span></span><br><span class="line">    <span class="string">&#x27;size&#x27;</span>: &#123; <span class="attr">height</span>: <span class="number">100</span>, <span class="attr">width</span>: <span class="number">100</span> &#125;</span><br><span class="line">  &#125; <span class="comment">// 创建图片大小</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">class</span> <span class="title class_">imagetmp</span> &#123;</span><br><span class="line">    <span class="attr">image</span>: <span class="title class_">PixelMap</span> | <span class="literal">undefined</span> = <span class="literal">undefined</span></span><br><span class="line">    <span class="title function_">set</span>(<span class="params">val: PixelMap</span>) &#123;</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">image</span> = val</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  imageSource.<span class="title function_">createPixelMap</span>(options).<span class="title function_">then</span>(<span class="function">(<span class="params">pixelMap: PixelMap</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">let</span> im = <span class="keyword">new</span> <span class="title function_">imagetmp</span>()</span><br><span class="line">    im.<span class="title function_">set</span>(pixelMap)</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>d. 显示图片。</p>
<figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">htp</span>&#123;</span><br><span class="line"> <span class="attr">httpRequest</span>: <span class="title class_">Function</span> | <span class="literal">undefined</span> = <span class="literal">undefined</span></span><br><span class="line"> <span class="title function_">set</span>(<span class="params"></span>)&#123;</span><br><span class="line">   <span class="keyword">if</span>(<span class="variable language_">this</span>.<span class="property">httpRequest</span>)&#123;</span><br><span class="line">     <span class="variable language_">this</span>.<span class="title function_">httpRequest</span>()</span><br><span class="line">   &#125;</span><br><span class="line"> &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="title class_">Button</span>(<span class="string">&quot;获取网络图片&quot;</span>)</span><br><span class="line">  .<span class="title function_">onClick</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">let</span> sethtp = <span class="keyword">new</span> <span class="title function_">htp</span>()</span><br><span class="line">    sethtp.<span class="title function_">set</span>()</span><br><span class="line">  &#125;)</span><br><span class="line"><span class="title class_">Image</span>(<span class="variable language_">this</span>.<span class="property">image</span>).<span class="title function_">height</span>(<span class="number">100</span>).<span class="title function_">width</span>(<span class="number">100</span>)</span><br></pre></td></tr></table></figure>

<h4 id="显示矢量图"><a href="#显示矢量图" class="headerlink" title="显示矢量图"></a>显示矢量图</h4><p>Image 组件可显示矢量图（svg 格式的图片），支持的 svg 标签为：svg、rect、circle、ellipse、path、line、polyline、polygon 和 animate。</p>
<p>svg 格式的图片可以使用 fillColor 属性改变图片的绘制颜色。</p>
<figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Image</span>($r(<span class="string">&#x27;app.media.cloud&#x27;</span>))</span><br><span class="line">  .<span class="title function_">width</span>(<span class="number">50</span>)</span><br><span class="line">  .<span class="title function_">fillColor</span>(<span class="title class_">Color</span>.<span class="property">Blue</span>) </span><br></pre></td></tr></table></figure>

<h4 id="设置图片缩放类型"><a href="#设置图片缩放类型" class="headerlink" title="设置图片缩放类型"></a>设置图片缩放类型</h4><p>通过 objectFit 属性使图片缩放到高度和宽度确定的框内。</p>
<figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Entry</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line">struct <span class="title class_">MyComponent</span> &#123;</span><br><span class="line">  <span class="attr">scroller</span>: <span class="title class_">Scroller</span> = <span class="keyword">new</span> <span class="title class_">Scroller</span>()</span><br><span class="line"></span><br><span class="line">  <span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">Scroll</span>(<span class="variable language_">this</span>.<span class="property">scroller</span>) &#123;</span><br><span class="line">      <span class="title class_">Column</span>() &#123;</span><br><span class="line">        <span class="title class_">Row</span>() &#123;</span><br><span class="line">          <span class="title class_">Image</span>($r(<span class="string">&#x27;app.media.img_2&#x27;</span>))</span><br><span class="line">            .<span class="title function_">width</span>(<span class="number">200</span>)</span><br><span class="line">            .<span class="title function_">height</span>(<span class="number">150</span>)</span><br><span class="line">            .<span class="title function_">border</span>(&#123; <span class="attr">width</span>: <span class="number">1</span> &#125;)</span><br><span class="line">              <span class="comment">// 保持宽高比进行缩小或者放大，使得图片完全显示在显示边界内。</span></span><br><span class="line">            .<span class="title function_">objectFit</span>(<span class="title class_">ImageFit</span>.<span class="property">Contain</span>)</span><br><span class="line">            .<span class="title function_">margin</span>(<span class="number">15</span>)</span><br><span class="line">            .<span class="title function_">overlay</span>(<span class="string">&#x27;Contain&#x27;</span>, &#123; <span class="attr">align</span>: <span class="title class_">Alignment</span>.<span class="property">Bottom</span>, <span class="attr">offset</span>: &#123; <span class="attr">x</span>: <span class="number">0</span>, <span class="attr">y</span>: <span class="number">20</span> &#125; &#125;)</span><br><span class="line">          <span class="title class_">Image</span>($r(<span class="string">&#x27;app.media.ic_img_2&#x27;</span>))</span><br><span class="line">            .<span class="title function_">width</span>(<span class="number">200</span>)</span><br><span class="line">            .<span class="title function_">height</span>(<span class="number">150</span>)</span><br><span class="line">            .<span class="title function_">border</span>(&#123; <span class="attr">width</span>: <span class="number">1</span> &#125;)</span><br><span class="line">            .<span class="title function_">objectFit</span>(<span class="title class_">ImageFit</span>.<span class="property">Cover</span>)</span><br><span class="line">            .<span class="title function_">margin</span>(<span class="number">15</span>)</span><br><span class="line">              <span class="comment">// 保持宽高比进行缩小或者放大，使得图片两边都大于或等于显示边界。</span></span><br><span class="line">            .<span class="title function_">overlay</span>(<span class="string">&#x27;Cover&#x27;</span>, &#123; <span class="attr">align</span>: <span class="title class_">Alignment</span>.<span class="property">Bottom</span>, <span class="attr">offset</span>: &#123; <span class="attr">x</span>: <span class="number">0</span>, <span class="attr">y</span>: <span class="number">20</span> &#125; &#125;)</span><br><span class="line">          <span class="title class_">Image</span>($r(<span class="string">&#x27;app.media.img_2&#x27;</span>))</span><br><span class="line">            .<span class="title function_">width</span>(<span class="number">200</span>)</span><br><span class="line">            .<span class="title function_">height</span>(<span class="number">150</span>)</span><br><span class="line">            .<span class="title function_">border</span>(&#123; <span class="attr">width</span>: <span class="number">1</span> &#125;)</span><br><span class="line">              <span class="comment">// 自适应显示。</span></span><br><span class="line">            .<span class="title function_">objectFit</span>(<span class="title class_">ImageFit</span>.<span class="property">Auto</span>)</span><br><span class="line">            .<span class="title function_">margin</span>(<span class="number">15</span>)</span><br><span class="line">            .<span class="title function_">overlay</span>(<span class="string">&#x27;Auto&#x27;</span>, &#123; <span class="attr">align</span>: <span class="title class_">Alignment</span>.<span class="property">Bottom</span>, <span class="attr">offset</span>: &#123; <span class="attr">x</span>: <span class="number">0</span>, <span class="attr">y</span>: <span class="number">20</span> &#125; &#125;)</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="title class_">Row</span>() &#123;</span><br><span class="line">          <span class="title class_">Image</span>($r(<span class="string">&#x27;app.media.img_2&#x27;</span>))</span><br><span class="line">            .<span class="title function_">width</span>(<span class="number">200</span>)</span><br><span class="line">            .<span class="title function_">height</span>(<span class="number">150</span>)</span><br><span class="line">            .<span class="title function_">border</span>(&#123; <span class="attr">width</span>: <span class="number">1</span> &#125;)</span><br><span class="line">            .<span class="title function_">objectFit</span>(<span class="title class_">ImageFit</span>.<span class="property">Fill</span>)</span><br><span class="line">            .<span class="title function_">margin</span>(<span class="number">15</span>)</span><br><span class="line">              <span class="comment">// 不保持宽高比进行放大缩小，使得图片充满显示边界。</span></span><br><span class="line">            .<span class="title function_">overlay</span>(<span class="string">&#x27;Fill&#x27;</span>, &#123; <span class="attr">align</span>: <span class="title class_">Alignment</span>.<span class="property">Bottom</span>, <span class="attr">offset</span>: &#123; <span class="attr">x</span>: <span class="number">0</span>, <span class="attr">y</span>: <span class="number">20</span> &#125; &#125;)</span><br><span class="line">          <span class="title class_">Image</span>($r(<span class="string">&#x27;app.media.img_2&#x27;</span>))</span><br><span class="line">            .<span class="title function_">width</span>(<span class="number">200</span>)</span><br><span class="line">            .<span class="title function_">height</span>(<span class="number">150</span>)</span><br><span class="line">            .<span class="title function_">border</span>(&#123; <span class="attr">width</span>: <span class="number">1</span> &#125;)</span><br><span class="line">              <span class="comment">// 保持宽高比显示，图片缩小或者保持不变。</span></span><br><span class="line">            .<span class="title function_">objectFit</span>(<span class="title class_">ImageFit</span>.<span class="property">ScaleDown</span>)</span><br><span class="line">            .<span class="title function_">margin</span>(<span class="number">15</span>)</span><br><span class="line">            .<span class="title function_">overlay</span>(<span class="string">&#x27;ScaleDown&#x27;</span>, &#123; <span class="attr">align</span>: <span class="title class_">Alignment</span>.<span class="property">Bottom</span>, <span class="attr">offset</span>: &#123; <span class="attr">x</span>: <span class="number">0</span>, <span class="attr">y</span>: <span class="number">20</span> &#125; &#125;)</span><br><span class="line">          <span class="title class_">Image</span>($r(<span class="string">&#x27;app.media.img_2&#x27;</span>))</span><br><span class="line">            .<span class="title function_">width</span>(<span class="number">200</span>)</span><br><span class="line">            .<span class="title function_">height</span>(<span class="number">150</span>)</span><br><span class="line">            .<span class="title function_">border</span>(&#123; <span class="attr">width</span>: <span class="number">1</span> &#125;)</span><br><span class="line">              <span class="comment">// 保持原有尺寸显示。</span></span><br><span class="line">            .<span class="title function_">objectFit</span>(<span class="title class_">ImageFit</span>.<span class="property">None</span>)</span><br><span class="line">            .<span class="title function_">margin</span>(<span class="number">15</span>)</span><br><span class="line">            .<span class="title function_">overlay</span>(<span class="string">&#x27;None&#x27;</span>, &#123; <span class="attr">align</span>: <span class="title class_">Alignment</span>.<span class="property">Bottom</span>, <span class="attr">offset</span>: &#123; <span class="attr">x</span>: <span class="number">0</span>, <span class="attr">y</span>: <span class="number">20</span> &#125; &#125;)</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<img data-src="https://gitee.com/zch0304/images/raw/master/note/1719469698441.jpg" style="zoom: 80%;" /> 

<h4 id="图片插值"><a href="#图片插值" class="headerlink" title="图片插值"></a>图片插值</h4><p>当原图分辨率较低并且放大显示时，图片会模糊出现锯齿。这时可以使用 interpolation 属性对图片进行插值，使图片显示得更清晰。</p>
<figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Entry</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line">struct <span class="title class_">Index</span> &#123;</span><br><span class="line">  <span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">Column</span>() &#123;</span><br><span class="line">      <span class="title class_">Row</span>() &#123;</span><br><span class="line">        <span class="title class_">Image</span>($r(<span class="string">&#x27;app.media.grass&#x27;</span>))</span><br><span class="line">          .<span class="title function_">width</span>(<span class="string">&#x27;40%&#x27;</span>)</span><br><span class="line">          .<span class="title function_">interpolation</span>(<span class="title class_">ImageInterpolation</span>.<span class="property">None</span>)</span><br><span class="line">          .<span class="title function_">borderWidth</span>(<span class="number">1</span>)</span><br><span class="line">          .<span class="title function_">overlay</span>(<span class="string">&quot;Interpolation.None&quot;</span>, &#123; <span class="attr">align</span>: <span class="title class_">Alignment</span>.<span class="property">Bottom</span>, <span class="attr">offset</span>: &#123; <span class="attr">x</span>: <span class="number">0</span>, <span class="attr">y</span>: <span class="number">20</span> &#125; &#125;)</span><br><span class="line">          .<span class="title function_">margin</span>(<span class="number">10</span>)</span><br><span class="line">        <span class="title class_">Image</span>($r(<span class="string">&#x27;app.media.grass&#x27;</span>))</span><br><span class="line">          .<span class="title function_">width</span>(<span class="string">&#x27;40%&#x27;</span>)</span><br><span class="line">          .<span class="title function_">interpolation</span>(<span class="title class_">ImageInterpolation</span>.<span class="property">Low</span>)</span><br><span class="line">          .<span class="title function_">borderWidth</span>(<span class="number">1</span>)</span><br><span class="line">          .<span class="title function_">overlay</span>(<span class="string">&quot;Interpolation.Low&quot;</span>, &#123; <span class="attr">align</span>: <span class="title class_">Alignment</span>.<span class="property">Bottom</span>, <span class="attr">offset</span>: &#123; <span class="attr">x</span>: <span class="number">0</span>, <span class="attr">y</span>: <span class="number">20</span> &#125; &#125;)</span><br><span class="line">          .<span class="title function_">margin</span>(<span class="number">10</span>)</span><br><span class="line">      &#125;.<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">      .<span class="title function_">justifyContent</span>(<span class="title class_">FlexAlign</span>.<span class="property">Center</span>)</span><br><span class="line"></span><br><span class="line">      <span class="title class_">Row</span>() &#123;</span><br><span class="line">        <span class="title class_">Image</span>($r(<span class="string">&#x27;app.media.grass&#x27;</span>))</span><br><span class="line">          .<span class="title function_">width</span>(<span class="string">&#x27;40%&#x27;</span>)</span><br><span class="line">          .<span class="title function_">interpolation</span>(<span class="title class_">ImageInterpolation</span>.<span class="property">Medium</span>)</span><br><span class="line">          .<span class="title function_">borderWidth</span>(<span class="number">1</span>)</span><br><span class="line">          .<span class="title function_">overlay</span>(<span class="string">&quot;Interpolation.Medium&quot;</span>, &#123; <span class="attr">align</span>: <span class="title class_">Alignment</span>.<span class="property">Bottom</span>, <span class="attr">offset</span>: &#123; <span class="attr">x</span>: <span class="number">0</span>, <span class="attr">y</span>: <span class="number">20</span> &#125; &#125;)</span><br><span class="line">          .<span class="title function_">margin</span>(<span class="number">10</span>)</span><br><span class="line">        <span class="title class_">Image</span>($r(<span class="string">&#x27;app.media.grass&#x27;</span>))</span><br><span class="line">          .<span class="title function_">width</span>(<span class="string">&#x27;40%&#x27;</span>)</span><br><span class="line">          .<span class="title function_">interpolation</span>(<span class="title class_">ImageInterpolation</span>.<span class="property">High</span>)</span><br><span class="line">          .<span class="title function_">borderWidth</span>(<span class="number">1</span>)</span><br><span class="line">          .<span class="title function_">overlay</span>(<span class="string">&quot;Interpolation.High&quot;</span>, &#123; <span class="attr">align</span>: <span class="title class_">Alignment</span>.<span class="property">Bottom</span>, <span class="attr">offset</span>: &#123; <span class="attr">x</span>: <span class="number">0</span>, <span class="attr">y</span>: <span class="number">20</span> &#125; &#125;)</span><br><span class="line">          .<span class="title function_">margin</span>(<span class="number">10</span>)</span><br><span class="line">      &#125;.<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">      .<span class="title function_">justifyContent</span>(<span class="title class_">FlexAlign</span>.<span class="property">Center</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    .<span class="title function_">height</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<img data-src="https://gitee.com/zch0304/images/raw/master/note/1719470597070.png"  /> 

<h4 id="设置图片重复样式"><a href="#设置图片重复样式" class="headerlink" title="设置图片重复样式"></a>设置图片重复样式</h4><p>通过 objectRepeat 属性设置图片的重复样式方式，重复样式请参考 <span class="exturl" data-url="aHR0cHM6Ly9kZXZlbG9wZXIuaHVhd2VpLmNvbS9jb25zdW1lci9jbi9kb2MvaGFybW9ueW9zLXJlZmVyZW5jZXMvdHMtYXBwZW5kaXgtZW51bXMtMDAwMDAwMTgxNTkyNzcxMiNaSC1DTl9UT1BJQ18wMDAwMDAxODE1OTI3NzEyX19pbWFnZXJlcGVhdA==">ImageRepeat<i class="fa fa-external-link-alt"></i></span> 枚举说明。</p>
<figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Entry</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line">struct <span class="title class_">MyComponent</span> &#123;</span><br><span class="line">  <span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">Column</span>(&#123; <span class="attr">space</span>: <span class="number">10</span> &#125;) &#123;</span><br><span class="line">      <span class="title class_">Row</span>(&#123; <span class="attr">space</span>: <span class="number">5</span> &#125;) &#123;</span><br><span class="line">        <span class="title class_">Image</span>($r(<span class="string">&#x27;app.media.ic_public_favor_filled_1&#x27;</span>))</span><br><span class="line">          .<span class="title function_">width</span>(<span class="number">110</span>)</span><br><span class="line">          .<span class="title function_">height</span>(<span class="number">115</span>)</span><br><span class="line">          .<span class="title function_">border</span>(&#123; <span class="attr">width</span>: <span class="number">1</span> &#125;)</span><br><span class="line">          .<span class="title function_">objectRepeat</span>(<span class="title class_">ImageRepeat</span>.<span class="property">XY</span>)</span><br><span class="line">          .<span class="title function_">objectFit</span>(<span class="title class_">ImageFit</span>.<span class="property">ScaleDown</span>)</span><br><span class="line">          <span class="comment">// 在水平轴和竖直轴上同时重复绘制图片</span></span><br><span class="line">          .<span class="title function_">overlay</span>(<span class="string">&#x27;ImageRepeat.XY&#x27;</span>, &#123; <span class="attr">align</span>: <span class="title class_">Alignment</span>.<span class="property">Bottom</span>, <span class="attr">offset</span>: &#123; <span class="attr">x</span>: <span class="number">0</span>, <span class="attr">y</span>: <span class="number">20</span> &#125; &#125;)</span><br><span class="line">        <span class="title class_">Image</span>($r(<span class="string">&#x27;app.media.ic_public_favor_filled_1&#x27;</span>))</span><br><span class="line">          .<span class="title function_">width</span>(<span class="number">110</span>)</span><br><span class="line">          .<span class="title function_">height</span>(<span class="number">115</span>)</span><br><span class="line">          .<span class="title function_">border</span>(&#123; <span class="attr">width</span>: <span class="number">1</span> &#125;)</span><br><span class="line">          .<span class="title function_">objectRepeat</span>(<span class="title class_">ImageRepeat</span>.<span class="property">Y</span>)</span><br><span class="line">          .<span class="title function_">objectFit</span>(<span class="title class_">ImageFit</span>.<span class="property">ScaleDown</span>)</span><br><span class="line">          <span class="comment">// 只在竖直轴上重复绘制图片</span></span><br><span class="line">          .<span class="title function_">overlay</span>(<span class="string">&#x27;ImageRepeat.Y&#x27;</span>, &#123; <span class="attr">align</span>: <span class="title class_">Alignment</span>.<span class="property">Bottom</span>, <span class="attr">offset</span>: &#123; <span class="attr">x</span>: <span class="number">0</span>, <span class="attr">y</span>: <span class="number">20</span> &#125; &#125;)</span><br><span class="line">        <span class="title class_">Image</span>($r(<span class="string">&#x27;app.media.ic_public_favor_filled_1&#x27;</span>))</span><br><span class="line">          .<span class="title function_">width</span>(<span class="number">110</span>)</span><br><span class="line">          .<span class="title function_">height</span>(<span class="number">115</span>)</span><br><span class="line">          .<span class="title function_">border</span>(&#123; <span class="attr">width</span>: <span class="number">1</span> &#125;)</span><br><span class="line">          .<span class="title function_">objectRepeat</span>(<span class="title class_">ImageRepeat</span>.<span class="property">X</span>)</span><br><span class="line">          .<span class="title function_">objectFit</span>(<span class="title class_">ImageFit</span>.<span class="property">ScaleDown</span>)</span><br><span class="line">          <span class="comment">// 只在水平轴上重复绘制图片</span></span><br><span class="line">          .<span class="title function_">overlay</span>(<span class="string">&#x27;ImageRepeat.X&#x27;</span>, &#123; <span class="attr">align</span>: <span class="title class_">Alignment</span>.<span class="property">Bottom</span>, <span class="attr">offset</span>: &#123; <span class="attr">x</span>: <span class="number">0</span>, <span class="attr">y</span>: <span class="number">20</span> &#125; &#125;)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;.<span class="title function_">height</span>(<span class="number">150</span>).<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>).<span class="title function_">padding</span>(<span class="number">8</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img data-src="https://gitee.com/zch0304/images/raw/master/note/1719471011623.jpg"> </p>
<h4 id="设置图片渲染模式"><a href="#设置图片渲染模式" class="headerlink" title="设置图片渲染模式"></a>设置图片渲染模式</h4><p>通过 renderMode 属性设置图片的渲染模式为原色或黑白。</p>
<figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Entry</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line">struct <span class="title class_">MyComponent</span> &#123;</span><br><span class="line">  <span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">Column</span>(&#123; <span class="attr">space</span>: <span class="number">10</span> &#125;) &#123;</span><br><span class="line">      <span class="title class_">Row</span>(&#123; <span class="attr">space</span>: <span class="number">50</span> &#125;) &#123;</span><br><span class="line">        <span class="title class_">Image</span>($r(<span class="string">&#x27;app.media.example&#x27;</span>))</span><br><span class="line">          <span class="comment">// 设置图片的渲染模式为原色 </span></span><br><span class="line">          .<span class="title function_">renderMode</span>(<span class="title class_">ImageRenderMode</span>.<span class="property">Original</span>)</span><br><span class="line">          .<span class="title function_">width</span>(<span class="number">100</span>)</span><br><span class="line">          .<span class="title function_">height</span>(<span class="number">100</span>)</span><br><span class="line">          .<span class="title function_">border</span>(&#123; <span class="attr">width</span>: <span class="number">1</span> &#125;)</span><br><span class="line">            <span class="comment">// overlay 是通用属性，用于在组件上显示说明文字</span></span><br><span class="line">          .<span class="title function_">overlay</span>(<span class="string">&#x27;Original&#x27;</span>, &#123; <span class="attr">align</span>: <span class="title class_">Alignment</span>.<span class="property">Bottom</span>, <span class="attr">offset</span>: &#123; <span class="attr">x</span>: <span class="number">0</span>, <span class="attr">y</span>: <span class="number">20</span> &#125; &#125;)</span><br><span class="line">        <span class="title class_">Image</span>($r(<span class="string">&#x27;app.media.example&#x27;</span>))</span><br><span class="line">          <span class="comment">// 设置图片的渲染模式为黑白</span></span><br><span class="line">          .<span class="title function_">renderMode</span>(<span class="title class_">ImageRenderMode</span>.<span class="property">Template</span>)</span><br><span class="line">          .<span class="title function_">width</span>(<span class="number">100</span>)</span><br><span class="line">          .<span class="title function_">height</span>(<span class="number">100</span>)</span><br><span class="line">          .<span class="title function_">border</span>(&#123; <span class="attr">width</span>: <span class="number">1</span> &#125;)</span><br><span class="line">          .<span class="title function_">overlay</span>(<span class="string">&#x27;Template&#x27;</span>, &#123; <span class="attr">align</span>: <span class="title class_">Alignment</span>.<span class="property">Bottom</span>, <span class="attr">offset</span>: &#123; <span class="attr">x</span>: <span class="number">0</span>, <span class="attr">y</span>: <span class="number">20</span> &#125; &#125;)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;.<span class="title function_">height</span>(<span class="number">150</span>).<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>).<span class="title function_">padding</span>(&#123; <span class="attr">top</span>: <span class="number">20</span>,<span class="attr">right</span>: <span class="number">10</span> &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img data-src="https://gitee.com/zch0304/images/raw/master/note/1719471221476.jpg"> </p>
<h4 id="设置图片解码尺寸"><a href="#设置图片解码尺寸" class="headerlink" title="设置图片解码尺寸"></a>设置图片解码尺寸</h4><p>通过 sourceSize 属性设置图片解码尺寸，降低图片的分辨率。</p>
<p>原图尺寸为 1280x960，该示例将图片解码为 40x40 和 90x90。</p>
<figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Entry</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line">struct <span class="title class_">Index</span> &#123;</span><br><span class="line">  <span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">Column</span>() &#123;</span><br><span class="line">      <span class="title class_">Row</span>(&#123; <span class="attr">space</span>: <span class="number">50</span> &#125;) &#123;</span><br><span class="line">        <span class="title class_">Image</span>($r(<span class="string">&#x27;app.media.example&#x27;</span>))</span><br><span class="line">          .<span class="title function_">sourceSize</span>(&#123;</span><br><span class="line">            <span class="attr">width</span>: <span class="number">40</span>,</span><br><span class="line">            <span class="attr">height</span>: <span class="number">40</span></span><br><span class="line">          &#125;)</span><br><span class="line">          .<span class="title function_">objectFit</span>(<span class="title class_">ImageFit</span>.<span class="property">ScaleDown</span>)</span><br><span class="line">          .<span class="title function_">aspectRatio</span>(<span class="number">1</span>)</span><br><span class="line">          .<span class="title function_">width</span>(<span class="string">&#x27;25%&#x27;</span>)</span><br><span class="line">          .<span class="title function_">border</span>(&#123; <span class="attr">width</span>: <span class="number">1</span> &#125;)</span><br><span class="line">          .<span class="title function_">overlay</span>(<span class="string">&#x27;width:40 height:40&#x27;</span>, &#123; <span class="attr">align</span>: <span class="title class_">Alignment</span>.<span class="property">Bottom</span>, <span class="attr">offset</span>: &#123; <span class="attr">x</span>: <span class="number">0</span>, <span class="attr">y</span>: <span class="number">40</span> &#125; &#125;)</span><br><span class="line">        <span class="title class_">Image</span>($r(<span class="string">&#x27;app.media.example&#x27;</span>))</span><br><span class="line">          .<span class="title function_">sourceSize</span>(&#123;</span><br><span class="line">            <span class="attr">width</span>: <span class="number">90</span>,</span><br><span class="line">            <span class="attr">height</span>: <span class="number">90</span></span><br><span class="line">          &#125;)</span><br><span class="line">          .<span class="title function_">objectFit</span>(<span class="title class_">ImageFit</span>.<span class="property">ScaleDown</span>)</span><br><span class="line">          .<span class="title function_">width</span>(<span class="string">&#x27;25%&#x27;</span>)</span><br><span class="line">          .<span class="title function_">aspectRatio</span>(<span class="number">1</span>)</span><br><span class="line">          .<span class="title function_">border</span>(&#123; <span class="attr">width</span>: <span class="number">1</span> &#125;)</span><br><span class="line">          .<span class="title function_">overlay</span>(<span class="string">&#x27;width:90 height:90&#x27;</span>, &#123; <span class="attr">align</span>: <span class="title class_">Alignment</span>.<span class="property">Bottom</span>, <span class="attr">offset</span>: &#123; <span class="attr">x</span>: <span class="number">0</span>, <span class="attr">y</span>: <span class="number">40</span> &#125; &#125;)</span><br><span class="line">      &#125;.<span class="title function_">height</span>(<span class="number">150</span>).<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>).<span class="title function_">padding</span>(<span class="number">20</span>)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img data-src="https://gitee.com/zch0304/images/raw/master/note/1719471652485.jpg"> </p>
<h4 id="为图片添加滤镜效果"><a href="#为图片添加滤镜效果" class="headerlink" title="为图片添加滤镜效果"></a>为图片添加滤镜效果</h4><p>通过 colorFilter 修改图片的像素颜色，为图片添加滤镜。</p>
<figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Entry</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line">struct <span class="title class_">Index</span> &#123;</span><br><span class="line">  <span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">Column</span>() &#123;</span><br><span class="line">      <span class="title class_">Row</span>() &#123;</span><br><span class="line">        <span class="title class_">Image</span>($r(<span class="string">&#x27;app.media.example&#x27;</span>))</span><br><span class="line">          .<span class="title function_">width</span>(<span class="string">&#x27;40%&#x27;</span>)</span><br><span class="line">          .<span class="title function_">margin</span>(<span class="number">10</span>)</span><br><span class="line">        <span class="title class_">Image</span>($r(<span class="string">&#x27;app.media.example&#x27;</span>))</span><br><span class="line">          .<span class="title function_">width</span>(<span class="string">&#x27;40%&#x27;</span>)</span><br><span class="line">          .<span class="title function_">colorFilter</span>(</span><br><span class="line">            [<span class="number">1</span>, <span class="number">1</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>,</span><br><span class="line">             <span class="number">0</span>, <span class="number">1</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>,</span><br><span class="line">             <span class="number">0</span>, <span class="number">0</span>, <span class="number">1</span>, <span class="number">0</span>, <span class="number">0</span>,</span><br><span class="line">             <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">1</span>, <span class="number">0</span>])</span><br><span class="line">          .<span class="title function_">margin</span>(<span class="number">10</span>)</span><br><span class="line">      &#125;.<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">      .<span class="title function_">justifyContent</span>(<span class="title class_">FlexAlign</span>.<span class="property">Center</span>)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img data-src="https://gitee.com/zch0304/images/raw/master/note/1719472196631.jpg"> </p>
<h4 id="同步加载图片"><a href="#同步加载图片" class="headerlink" title="同步加载图片"></a>同步加载图片</h4><p>一般情况下，图片加载流程会异步进行，以避免阻塞主线程，影响 UI 交互。但是特定情况下，图片刷新时会出现闪烁，这时可以使用 syncLoad 属性，使图片同步加载，从而避免出现闪烁。不建议图片加载较长时间时使用，会导致页面无法响应。</p>
<figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Image</span>($r(<span class="string">&#x27;app.media.icon&#x27;</span>))</span><br><span class="line">  .<span class="title function_">syncLoad</span>(<span class="literal">true</span>)</span><br></pre></td></tr></table></figure>

<h4 id="事件调用"><a href="#事件调用" class="headerlink" title="事件调用"></a>事件调用</h4><p>通过在 Image 组件上绑定 onComplete 事件，图片加载成功后可以获取图片的必要信息。如果图片加载失败，也可以通过绑定 onError 回调来获得结果。</p>
<figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Entry</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line">struct <span class="title class_">MyComponent</span> &#123;</span><br><span class="line">  <span class="meta">@State</span> <span class="attr">widthValue</span>: <span class="built_in">number</span> = <span class="number">0</span></span><br><span class="line">  <span class="meta">@State</span> <span class="attr">heightValue</span>: <span class="built_in">number</span> = <span class="number">0</span></span><br><span class="line">  <span class="meta">@State</span> <span class="attr">componentWidth</span>: <span class="built_in">number</span> = <span class="number">0</span></span><br><span class="line">  <span class="meta">@State</span> <span class="attr">componentHeight</span>: <span class="built_in">number</span> = <span class="number">0</span></span><br><span class="line"></span><br><span class="line">  <span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">Column</span>() &#123;</span><br><span class="line">      <span class="title class_">Row</span>() &#123;</span><br><span class="line">        <span class="title class_">Image</span>($r(<span class="string">&#x27;app.media.ic_img_2&#x27;</span>))</span><br><span class="line">          .<span class="title function_">width</span>(<span class="number">200</span>)</span><br><span class="line">          .<span class="title function_">height</span>(<span class="number">150</span>)</span><br><span class="line">          .<span class="title function_">margin</span>(<span class="number">15</span>)</span><br><span class="line">          .<span class="title function_">onComplete</span>(<span class="function"><span class="params">msg</span> =&gt;</span> &#123;</span><br><span class="line">            <span class="keyword">if</span>(msg)&#123;</span><br><span class="line">              <span class="variable language_">this</span>.<span class="property">widthValue</span> = msg.<span class="property">width</span></span><br><span class="line">              <span class="variable language_">this</span>.<span class="property">heightValue</span> = msg.<span class="property">height</span></span><br><span class="line">              <span class="variable language_">this</span>.<span class="property">componentWidth</span> = msg.<span class="property">componentWidth</span></span><br><span class="line">              <span class="variable language_">this</span>.<span class="property">componentHeight</span> = msg.<span class="property">componentHeight</span></span><br><span class="line">            &#125;</span><br><span class="line">          &#125;)</span><br><span class="line">            <span class="comment">// 图片获取失败，打印结果</span></span><br><span class="line">          .<span class="title function_">onError</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">info</span>(<span class="string">&#x27;load image fail&#x27;</span>)</span><br><span class="line">          &#125;)</span><br><span class="line">          .<span class="title function_">overlay</span>(<span class="string">&#x27;\nwidth: &#x27;</span> + <span class="title class_">String</span>(<span class="variable language_">this</span>.<span class="property">widthValue</span>) + <span class="string">&#x27;, height: &#x27;</span> + <span class="title class_">String</span>(<span class="variable language_">this</span>.<span class="property">heightValue</span>) + <span class="string">&#x27;\ncomponentWidth: &#x27;</span> + <span class="title class_">String</span>(<span class="variable language_">this</span>.<span class="property">componentWidth</span>) + <span class="string">&#x27;\ncomponentHeight: &#x27;</span> + <span class="title class_">String</span>(<span class="variable language_">this</span>.<span class="property">componentHeight</span>), &#123;</span><br><span class="line">            <span class="attr">align</span>: <span class="title class_">Alignment</span>.<span class="property">Bottom</span>,</span><br><span class="line">            <span class="attr">offset</span>: &#123; <span class="attr">x</span>: <span class="number">0</span>, <span class="attr">y</span>: <span class="number">60</span> &#125;</span><br><span class="line">          &#125;)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img data-src="https://gitee.com/zch0304/images/raw/master/note/1719472716279.jpg"> </p>
<h2 id="布局组件"><a href="#布局组件" class="headerlink" title="布局组件"></a>布局组件</h2><h3 id="ArkTS-通用属性"><a href="#ArkTS-通用属性" class="headerlink" title="ArkTS 通用属性"></a>ArkTS 通用属性</h3><p>ArkTS 通用属性用于设置组件的宽高、边距。</p>
<table>
<thead>
<tr>
<th>名称</th>
<th>参数说明</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td>width</td>
<td>Length</td>
<td>设置组件自身的宽度，缺省时使用元素自身内容需要 的宽度。若子组件的宽大于父组件的宽，则会画出父 组件的范围。从 API version 9 开始，该接口支持在 ArkTS 卡片中使用。</td>
</tr>
<tr>
<td>height</td>
<td>Length</td>
<td>设置组件自身的高度，缺省时使用元素自身内容需要 的高度。若子组件的高大于父组件的高，则会画出父 组件的范围。从 API version 9 开始，该接口支持在 ArkTS 卡片中使用。</td>
</tr>
<tr>
<td>size</td>
<td>{   width ? : Length,   height ? : Length }</td>
<td>设置高宽尺寸。</td>
</tr>
<tr>
<td>padding</td>
<td>Padding &#124; Length</td>
<td>设置内边距属性。参数为 Length 类型时，四个方向内边距同时生效。默认值：0。padding 设置百分比时，上下左右内边距均以父容器的 width 作为基础值。从 API version 9 开始，该接口支持在 ArkTS 卡片中使用。</td>
</tr>
<tr>
<td>margin</td>
<td>Margin &#124; Length</td>
<td>设置外边距属性。参数为 Length 类型时，四个方向外边距同时生效。默认值：0。margin 设置百分比时，上下左右外边距均以父容器的 width 作为基础值。从 API version 9 开始，该接口支持在 ArkTS 卡片中使用。</td>
</tr>
<tr>
<td>constraintSize</td>
<td>{   minWidth ? : Length,   maxWidth ? : Length,   minHeight ? : Length,   maxHeight ? : Length }</td>
<td>设置约束尺寸，组件布局时，进行尺寸范围限制。 constraintSize 的优先级高于 Width 和 Height。若设置的 minWidth 大于 maxWidth，则 minWidth 生效， minHeight 与 maxHeight 同理。默认值：{   minWidth: 0, maxWidth:   Infinity, minHeight:   0, maxHeight:   Infinity }。</td>
</tr>
</tbody></table>
<p><strong>Length 长度类型，用于描述尺寸单位。</strong></p>
<table>
<thead>
<tr>
<th>类型</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>string</td>
<td>需要显式指定像素单位，如 ‘10px’，也可设置百分比字符串，如 ‘100%’。</td>
</tr>
<tr>
<td>number</td>
<td>默认单位 vp。</td>
</tr>
<tr>
<td>Resource</td>
<td>资源引用类型，引入系统资源或者应用资源中的尺寸。</td>
</tr>
</tbody></table>
<p><strong>vp 为虚拟像素单位</strong>：vp 使用虚拟像素，使元素在不同密度的设备上具有一致的视觉体量。</p>
<p><strong>fp 字体像素单位</strong>：字体像素（font pixel）大小默认情况下与 vp 相同，即默认情况下 1 fp &#x3D; 1 vp。如果用户在设置中选择了更大的字体，字体的实际显示大小就会在 vp 的基础上乘以用户设置的缩放系数，即 1 fp &#x3D; 1 vp * 缩放系数。</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Entry</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line">struct <span class="title class_">Index</span> &#123;</span><br><span class="line">  <span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">Column</span>(&#123; <span class="attr">space</span>: <span class="number">10</span> &#125;) &#123;</span><br><span class="line">      <span class="title class_">Row</span>() &#123;</span><br><span class="line">        <span class="comment">// 宽度 200，高度 200，外边距 20（蓝色区域），内边距 10（白色区域）</span></span><br><span class="line">        <span class="title class_">Row</span>() &#123;</span><br><span class="line">          <span class="title class_">Row</span>().<span class="title function_">size</span>(&#123;</span><br><span class="line">            <span class="attr">width</span>: <span class="string">&#x27;100%&#x27;</span>, <span class="attr">height</span>: <span class="string">&#x27;100%&#x27;</span></span><br><span class="line">          &#125;).<span class="title function_">backgroundColor</span>(<span class="title class_">Color</span>.<span class="property">Yellow</span>)</span><br><span class="line">        &#125;</span><br><span class="line">        .<span class="title function_">width</span>(<span class="number">200</span>)</span><br><span class="line">        .<span class="title function_">height</span>(<span class="number">200</span>)</span><br><span class="line">        .<span class="title function_">padding</span>(<span class="number">10</span>)</span><br><span class="line">        .<span class="title function_">margin</span>(<span class="number">20</span>)</span><br><span class="line">        .<span class="title function_">backgroundColor</span>(<span class="title class_">Color</span>.<span class="property">White</span>)</span><br><span class="line">      &#125;.<span class="title function_">backgroundColor</span>(<span class="title class_">Color</span>.<span class="property">Blue</span>)</span><br><span class="line"></span><br><span class="line">      <span class="title class_">Text</span>(<span class="string">`This is a text.This is a text.This is a text.This is a text.This is a text`</span>)</span><br><span class="line">        .<span class="title function_">width</span>(<span class="string">&#x27;90%&#x27;</span>)</span><br><span class="line">        .<span class="title function_">backgroundColor</span>(<span class="title class_">Color</span>.<span class="property">Orange</span>)</span><br><span class="line">        .<span class="title function_">constraintSize</span>(&#123; <span class="attr">maxWidth</span>: <span class="number">200</span> &#125;)</span><br><span class="line"></span><br><span class="line">      <span class="comment">// 父容器尺寸确定时，设置了 layoutWeight 的子元素在主轴布局尺寸按照权重进行分配，忽略本身尺寸设置。</span></span><br><span class="line">      <span class="title class_">Row</span>() &#123;</span><br><span class="line">        <span class="comment">// 权重 1，占主轴剩余空间 1/3</span></span><br><span class="line">        <span class="title class_">Text</span>(<span class="string">&#x27;layoutWeight(1)&#x27;</span>)</span><br><span class="line">          .<span class="title function_">size</span>(&#123; <span class="attr">height</span>: <span class="number">110</span> &#125;)</span><br><span class="line">          .<span class="title function_">backgroundColor</span>(<span class="title class_">Color</span>.<span class="property">Orange</span>)</span><br><span class="line">          .<span class="title function_">textAlign</span>(<span class="title class_">TextAlign</span>.<span class="property">Center</span>)</span><br><span class="line">          .<span class="title function_">layoutWeight</span>(<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 权重 2，占主轴剩余空间 2/3</span></span><br><span class="line">        <span class="title class_">Text</span>(<span class="string">&#x27;layoutWeight(2)&#x27;</span>)</span><br><span class="line">          .<span class="title function_">size</span>(&#123;</span><br><span class="line">            <span class="attr">width</span>: <span class="string">&#x27;30%&#x27;</span>, <span class="attr">height</span>: <span class="number">110</span></span><br><span class="line">          &#125;)</span><br><span class="line">          .<span class="title function_">backgroundColor</span>(<span class="title class_">Color</span>.<span class="property">Green</span>)</span><br><span class="line">          .<span class="title function_">textAlign</span>(<span class="title class_">TextAlign</span>.<span class="property">Center</span>)</span><br><span class="line">          .<span class="title function_">layoutWeight</span>(<span class="number">2</span>)</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 未设置 layoutWeight 属性，组件按照自身尺寸渲染</span></span><br><span class="line">        <span class="title class_">Text</span>(<span class="string">&#x27;no layoutWeight&#x27;</span>)</span><br><span class="line">          .<span class="title function_">size</span>(&#123;</span><br><span class="line">            <span class="attr">width</span>: <span class="string">&#x27;33%&#x27;</span>, <span class="attr">height</span>: <span class="number">110</span></span><br><span class="line">          &#125;)</span><br><span class="line">          .<span class="title function_">backgroundColor</span>(<span class="title class_">Color</span>.<span class="property">Brown</span>)</span><br><span class="line">          .<span class="title function_">textAlign</span>(<span class="title class_">TextAlign</span>.<span class="property">Center</span>)</span><br><span class="line">      &#125;.<span class="title function_">size</span>(&#123; <span class="attr">width</span>: <span class="string">&#x27;100%&#x27;</span>, <span class="attr">height</span>: <span class="number">140</span> &#125;)</span><br><span class="line">      .<span class="title function_">backgroundColor</span>(<span class="number">0xCCCCCC</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    .<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">    .<span class="title function_">height</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">    .<span class="title function_">margin</span>(&#123; <span class="attr">top</span>: <span class="number">5</span> &#125;)</span><br><span class="line">    .<span class="title function_">alignItems</span>(<span class="title class_">HorizontalAlign</span>.<span class="property">Center</span>)</span><br><span class="line">    .<span class="title function_">justifyContent</span>(<span class="title class_">FlexAlign</span>.<span class="property">Start</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<img data-src="https://gitee.com/zch0304/images/raw/master/note/1716389533793.jpg" style="zoom:80%;" /> 

<h3 id="Column-详解"><a href="#Column-详解" class="headerlink" title="Column 详解"></a>Column 详解</h3><p>Column 是沿垂直方向布局的容器，可以包含多个子组件，多个子组件会在垂直方向上按照顺序排列。</p>
<h4 id="Column-接口"><a href="#Column-接口" class="headerlink" title="Column 接口"></a>Column 接口</h4><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Column</span>(value?: &#123;space?: <span class="built_in">string</span> | <span class="built_in">number</span>&#125;)</span><br></pre></td></tr></table></figure>

<p>参数：</p>
<table>
<thead>
<tr>
<th>参数名</th>
<th>参数类型</th>
<th>必填</th>
<th>参数描述</th>
</tr>
</thead>
<tbody><tr>
<td>space</td>
<td>string &#124; number</td>
<td>否</td>
<td>纵向布局元素垂直方向间距。从 API version 9 开始，space 为负数或者 justifyContent 设置为 FlexAlign.SpaceBetween、 FlexAlign.SpaceAround、FlexAlign.SpaceEvenly 时不生效。默认值：0，单位 vp。说明：可选值为大于等于 0 的数字，或者可以转换为数字的字符串。</td>
</tr>
</tbody></table>
<h4 id="Column-属性"><a href="#Column-属性" class="headerlink" title="Column 属性"></a>Column 属性</h4><table>
<thead>
<tr>
<th>名称</th>
<th>参数类型</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td>alignItems</td>
<td>HorizontalAlign</td>
<td>设置子组件在水平方向上的对齐格式。默认值：HorizontalAlign.Center 从 API version 9 开始，该接口支持在 ArkTS 卡片中使用。</td>
</tr>
<tr>
<td>justifyContent8+</td>
<td>FlexAlign</td>
<td>设置子组件在垂直方向上的对齐格式。默认值：FlexAlign.Start 从 API version 9 开始，该接口支持在 ArkTS 卡片中使用。</td>
</tr>
</tbody></table>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Entry</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line">struct <span class="title class_">Index</span> &#123;</span><br><span class="line">  <span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">Column</span>(&#123; <span class="attr">space</span>: <span class="number">10</span> &#125;) &#123;</span><br><span class="line">      <span class="title class_">Row</span>() &#123;</span><br><span class="line">        ($r(<span class="string">&#x27;app.media.app_icon&#x27;</span>)).<span class="title function_">width</span>(<span class="number">100</span>).<span class="title function_">height</span>(<span class="number">100</span>)</span><br><span class="line">      &#125;</span><br><span class="line">      .<span class="title function_">width</span>(<span class="number">140</span>)</span><br><span class="line">      .<span class="title function_">height</span>(<span class="number">140</span>)</span><br><span class="line">      .<span class="title function_">backgroundColor</span>(<span class="title class_">Color</span>.<span class="property">Red</span>)</span><br><span class="line">      .<span class="title function_">alignItems</span>(<span class="title class_">VerticalAlign</span>.<span class="property">Center</span>)</span><br><span class="line">      .<span class="title function_">justifyContent</span>(<span class="title class_">FlexAlign</span>.<span class="property">Center</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    .<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">    .<span class="title function_">height</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">    .<span class="title function_">margin</span>(&#123; <span class="attr">top</span>: <span class="number">5</span> &#125;)</span><br><span class="line">    .<span class="title function_">alignItems</span>(<span class="title class_">HorizontalAlign</span>.<span class="property">Center</span>)</span><br><span class="line">    .<span class="title function_">justifyContent</span>(<span class="title class_">FlexAlign</span>.<span class="property">Start</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="Row-详解"><a href="#Row-详解" class="headerlink" title="Row 详解"></a>Row 详解</h3><p>Row 为沿水平方向布局容器，可以包含多个子组件，多个子组件会在水平方向上按照顺序排列。</p>
<h4 id="Row-接口"><a href="#Row-接口" class="headerlink" title="Row 接口"></a>Row 接口</h4><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Row</span>(value?: &#123;space?: <span class="built_in">string</span> | <span class="built_in">number</span>&#125;)</span><br></pre></td></tr></table></figure>

<p>参数：</p>
<table>
<thead>
<tr>
<th>参数 名</th>
<th>参数类 型</th>
<th>必 填</th>
<th>参数描述</th>
</tr>
</thead>
<tbody><tr>
<td>space</td>
<td>string &#124; number</td>
<td>否</td>
<td>横向布局元素间距。从 API version 9 开始，space 为负数或者 justifyContent 设置为 FlexAlign.SpaceBetween、FlexAlign.SpaceAround、FlexAlign.SpaceEvenly 时不生效。默认值：0，单位 vp。说明：可选值为大于等于 0 的数字，或者可以转换为 数字的字符串。</td>
</tr>
</tbody></table>
<h4 id="Row-属性"><a href="#Row-属性" class="headerlink" title="Row 属性"></a>Row 属性</h4><table>
<thead>
<tr>
<th>名称</th>
<th>参数类型</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td>alignItems</td>
<td>VerticalAlign</td>
<td>设置子组件在垂直方向上的对齐格式。默认值：VerticalAlign.Center 从 API version 9 开始，该接口支持在 ArkTS 卡片中使用。</td>
</tr>
<tr>
<td>justifyContent8+</td>
<td>FlexAlign</td>
<td>设置子组件在水平方向上的对齐格式。默认值：FlexAlign.Start 从 API version 9 开始，该接口支持在 ArkTS 卡片中使用。</td>
</tr>
</tbody></table>
<h3 id="自定义组件"><a href="#自定义组件" class="headerlink" title="自定义组件"></a>自定义组件</h3><p>自定义组件传值。</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Entry</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line">struct <span class="title class_">Index</span> &#123;</span><br><span class="line">  <span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">Column</span>(&#123; <span class="attr">space</span>: <span class="number">10</span> &#125;) &#123;</span><br><span class="line">      <span class="title class_">Container</span>()</span><br><span class="line">      <span class="title class_">Container</span>(&#123; <span class="attr">color</span>: <span class="title class_">Color</span>.<span class="property">Orange</span>, <span class="attr">icon</span>: $r(<span class="string">&#x27;app.media.user&#x27;</span>) &#125;)</span><br><span class="line">      <span class="title class_">Container</span>(&#123; <span class="attr">color</span>: <span class="title class_">Color</span>.<span class="property">Brown</span>, <span class="attr">icon</span>: $r(<span class="string">&#x27;app.media.settings&#x27;</span>) &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">    .<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">    .<span class="title function_">height</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">    .<span class="title function_">alignItems</span>(<span class="title class_">HorizontalAlign</span>.<span class="property">Center</span>)</span><br><span class="line">    .<span class="title function_">justifyContent</span>(<span class="title class_">FlexAlign</span>.<span class="property">SpaceBetween</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line">struct <span class="title class_">Container</span> &#123;</span><br><span class="line">  <span class="attr">color</span>: <span class="title class_">Color</span> = <span class="title class_">Color</span>.<span class="property">Red</span></span><br><span class="line">  <span class="attr">icon</span>: <span class="title class_">Resource</span> = $r(<span class="string">&#x27;app.media.app_icon&#x27;</span>)</span><br><span class="line"></span><br><span class="line">  <span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">Row</span>() &#123;</span><br><span class="line">      <span class="title class_">Image</span>(<span class="variable language_">this</span>.<span class="property">icon</span>).<span class="title function_">width</span>(<span class="number">100</span>).<span class="title function_">height</span>(<span class="number">100</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    .<span class="title function_">width</span>(<span class="number">140</span>)</span><br><span class="line">    .<span class="title function_">height</span>(<span class="number">140</span>)</span><br><span class="line">    .<span class="title function_">backgroundColor</span>(<span class="variable language_">this</span>.<span class="property">color</span>)</span><br><span class="line">    .<span class="title function_">alignItems</span>(<span class="title class_">VerticalAlign</span>.<span class="property">Center</span>)</span><br><span class="line">    .<span class="title function_">justifyContent</span>(<span class="title class_">FlexAlign</span>.<span class="property">Center</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="Row、Column-结合-layoutWeight-实现弹性布局"><a href="#Row、Column-结合-layoutWeight-实现弹性布局" class="headerlink" title="Row、Column 结合 layoutWeight 实现弹性布局"></a>Row、Column 结合 layoutWeight 实现弹性布局</h3><p>ArkTS 中使用 Row、Column 结合 layoutWeight 属性可以实现弹性布局。</p>
<h4 id="水平弹性布局"><a href="#水平弹性布局" class="headerlink" title="水平弹性布局"></a>水平弹性布局</h4><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Entry</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line">struct <span class="title class_">Index</span> &#123;</span><br><span class="line">  <span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">Row</span>() &#123;</span><br><span class="line">      <span class="title class_">Row</span>().<span class="title function_">height</span>(<span class="number">100</span>).<span class="title function_">backgroundColor</span>(<span class="title class_">Color</span>.<span class="property">Red</span>).<span class="title function_">layoutWeight</span>(<span class="number">1</span>)</span><br><span class="line">      <span class="title class_">Row</span>().<span class="title function_">height</span>(<span class="number">100</span>).<span class="title function_">backgroundColor</span>(<span class="title class_">Color</span>.<span class="property">Green</span>).<span class="title function_">layoutWeight</span>(<span class="number">1</span>)</span><br><span class="line">      <span class="title class_">Row</span>() &#123;</span><br><span class="line">        <span class="title class_">Text</span>(<span class="string">&#x27;no layoutWeight&#x27;</span>).<span class="title function_">textAlign</span>(<span class="title class_">TextAlign</span>.<span class="property">Center</span>).<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">      &#125;.<span class="title function_">height</span>(<span class="number">100</span>).<span class="title function_">backgroundColor</span>(<span class="title class_">Color</span>.<span class="property">Orange</span>).<span class="title function_">size</span>(&#123; <span class="attr">height</span>: <span class="number">100</span>, <span class="attr">width</span>: <span class="number">200</span> &#125;)</span><br><span class="line">    &#125;.<span class="title function_">size</span>(&#123; <span class="attr">width</span>: <span class="string">&#x27;100%&#x27;</span>, <span class="attr">height</span>: <span class="number">100</span> &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img data-src="https://gitee.com/zch0304/images/raw/master/note/1716388652192.jpg"> </p>
<h4 id="垂直弹性布局"><a href="#垂直弹性布局" class="headerlink" title="垂直弹性布局"></a>垂直弹性布局</h4><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Entry</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line">struct <span class="title class_">Index</span> &#123;</span><br><span class="line">  <span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">Column</span>(&#123; <span class="attr">space</span>: <span class="number">10</span> &#125;) &#123;</span><br><span class="line">      <span class="title class_">Row</span>() &#123;</span><br><span class="line">        <span class="title class_">Image</span>(<span class="string">&quot;https://gitee.com/zch0304/images/raw/master/note/test_icon1.jpg&quot;</span>).<span class="title function_">objectFit</span>(<span class="title class_">ImageFit</span>.<span class="property">Fill</span>)</span><br><span class="line">      &#125;.<span class="title function_">size</span>(&#123; <span class="attr">width</span>: <span class="string">&#x27;100%&#x27;</span>, <span class="attr">height</span>: <span class="number">160</span> &#125;)</span><br><span class="line"></span><br><span class="line">      <span class="title class_">Row</span>(&#123; <span class="attr">space</span>: <span class="number">10</span> &#125;) &#123;</span><br><span class="line">        <span class="title class_">Row</span>() &#123;</span><br><span class="line">          <span class="title class_">Image</span>(<span class="string">&quot;https://gitee.com/zch0304/images/raw/master/note/test_icon2.jpg&quot;</span>).<span class="title function_">objectFit</span>(<span class="title class_">ImageFit</span>.<span class="property">Fill</span>)</span><br><span class="line">        &#125;.<span class="title function_">layoutWeight</span>(<span class="number">2</span>)</span><br><span class="line">        </span><br><span class="line">        <span class="title class_">Row</span>() &#123;</span><br><span class="line">          <span class="title class_">Column</span>(&#123; <span class="attr">space</span>: <span class="number">10</span> &#125;) &#123;</span><br><span class="line">            <span class="title class_">Row</span>() &#123;</span><br><span class="line">              <span class="title class_">Image</span>(<span class="string">&quot;https://gitee.com/zch0304/images/raw/master/note/test_icon3.jpg&quot;</span>).<span class="title function_">objectFit</span>(<span class="title class_">ImageFit</span>.<span class="property">Fill</span>)</span><br><span class="line">            &#125;.<span class="title function_">layoutWeight</span>(<span class="number">1</span>).<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line"></span><br><span class="line">            <span class="title class_">Row</span>() &#123;</span><br><span class="line">              <span class="title class_">Image</span>(<span class="string">&quot;https://gitee.com/zch0304/images/raw/master/note/test_icon4.jpg&quot;</span>).<span class="title function_">objectFit</span>(<span class="title class_">ImageFit</span>.<span class="property">Fill</span>)</span><br><span class="line">            &#125;.<span class="title function_">layoutWeight</span>(<span class="number">1</span>).<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;.<span class="title function_">layoutWeight</span>(<span class="number">1</span>)</span><br><span class="line">      &#125;.<span class="title function_">size</span>(&#123; <span class="attr">width</span>: <span class="string">&#x27;100%&#x27;</span>, <span class="attr">height</span>: <span class="number">140</span> &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">    .<span class="title function_">margin</span>(<span class="number">5</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img data-src="https://gitee.com/zch0304/images/raw/master/note/1716472510603.jpg"> </p>
<h3 id="Stack-定位组件"><a href="#Stack-定位组件" class="headerlink" title="Stack 定位组件"></a>Stack 定位组件</h3><p>Stack 组件可以实现容器堆叠，子组件按照顺序依次入栈，后一个子组件覆盖前一个子组件。</p>
<h4 id="Stack-接口"><a href="#Stack-接口" class="headerlink" title="Stack 接口"></a>Stack 接口</h4><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Stack</span>(value?: &#123; alignContent?: <span class="title class_">Alignment</span> &#125;)</span><br></pre></td></tr></table></figure>

<p>参数：</p>
<table>
<thead>
<tr>
<th>参数名</th>
<th>参数类型</th>
<th>必 填</th>
<th>参数描述</th>
</tr>
</thead>
<tbody><tr>
<td>alignContent</td>
<td>Alignment</td>
<td>否</td>
<td>设置子组件在容器内的对齐方式。默认值：Alignment.Center。</td>
</tr>
</tbody></table>
<h4 id="Stack-基本使用"><a href="#Stack-基本使用" class="headerlink" title="Stack 基本使用"></a>Stack 基本使用</h4><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Entry</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line">struct <span class="title class_">Index</span> &#123;</span><br><span class="line">  <span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">Column</span>(&#123; <span class="attr">space</span>: <span class="number">10</span> &#125;) &#123;</span><br><span class="line">      <span class="title class_">Stack</span>(&#123; <span class="attr">alignContent</span>: <span class="title class_">Alignment</span>.<span class="property">BottomStart</span> &#125;) &#123;</span><br><span class="line">        <span class="title class_">Row</span>() &#123;</span><br><span class="line">          <span class="title class_">Text</span>(<span class="string">&quot;HarmonyOS&quot;</span>).<span class="title function_">fontSize</span>(<span class="number">40</span>).<span class="title function_">textAlign</span>(<span class="title class_">TextAlign</span>.<span class="property">Center</span>)</span><br><span class="line">        &#125;.<span class="title function_">width</span>(<span class="number">300</span>).<span class="title function_">height</span>(<span class="number">300</span>).<span class="title function_">backgroundColor</span>(<span class="title class_">Color</span>.<span class="property">Orange</span>)</span><br><span class="line"></span><br><span class="line">        <span class="title class_">Row</span>().<span class="title function_">width</span>(<span class="number">100</span>).<span class="title function_">height</span>(<span class="number">100</span>).<span class="title function_">backgroundColor</span>(<span class="title class_">Color</span>.<span class="property">Blue</span>)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    .<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">    .<span class="title function_">height</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">    .<span class="title function_">alignItems</span>(<span class="title class_">HorizontalAlign</span>.<span class="property">Center</span>)</span><br><span class="line">    .<span class="title function_">justifyContent</span>(<span class="title class_">FlexAlign</span>.<span class="property">Center</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img data-src="https://gitee.com/zch0304/images/raw/master/note/1716473605745.jpg"> </p>
<h4 id="Stack-子组件中-zIndex-控制层级"><a href="#Stack-子组件中-zIndex-控制层级" class="headerlink" title="Stack 子组件中 zIndex 控制层级"></a>Stack 子组件中 zIndex 控制层级</h4><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Entry</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line">struct <span class="title class_">Index</span> &#123;</span><br><span class="line">  <span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">Stack</span>(&#123; <span class="attr">alignContent</span>: <span class="title class_">Alignment</span>.<span class="property">BottomStart</span> &#125;) &#123;</span><br><span class="line">      <span class="title class_">Column</span>() &#123;</span><br><span class="line">        <span class="title class_">Text</span>(<span class="string">&quot;Stack子元素1&quot;</span>).<span class="title function_">fontSize</span>(<span class="number">20</span>)</span><br><span class="line">      &#125;.<span class="title function_">width</span>(<span class="number">100</span>).<span class="title function_">height</span>(<span class="number">100</span>).<span class="title function_">backgroundColor</span>(<span class="title class_">Color</span>.<span class="property">Orange</span>).<span class="title function_">zIndex</span>(<span class="number">2</span>)</span><br><span class="line"></span><br><span class="line">      <span class="title class_">Column</span>() &#123;</span><br><span class="line">        <span class="title class_">Text</span>(<span class="string">&quot;Stack子元素2&quot;</span>).<span class="title function_">fontSize</span>(<span class="number">20</span>)</span><br><span class="line">      &#125;.<span class="title function_">width</span>(<span class="number">150</span>).<span class="title function_">height</span>(<span class="number">150</span>).<span class="title function_">backgroundColor</span>(<span class="title class_">Color</span>.<span class="property">Yellow</span>).<span class="title function_">zIndex</span>(<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line">      <span class="title class_">Column</span>() &#123;</span><br><span class="line">        <span class="title class_">Text</span>(<span class="string">&quot;Stack子元素3&quot;</span>).<span class="title function_">fontSize</span>(<span class="number">20</span>)</span><br><span class="line">      &#125;.<span class="title function_">width</span>(<span class="number">200</span>).<span class="title function_">height</span>(<span class="number">200</span>).<span class="title function_">backgroundColor</span>(<span class="title class_">Color</span>.<span class="property">Pink</span>)</span><br><span class="line">    &#125;.<span class="title function_">width</span>(<span class="number">350</span>).<span class="title function_">height</span>(<span class="number">350</span>).<span class="title function_">backgroundColor</span>(<span class="title class_">Color</span>.<span class="property">Gray</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img data-src="https://gitee.com/zch0304/images/raw/master/note/1716474425596.jpg"> </p>
<h4 id="Stack-结合-List-实现动态列表"><a href="#Stack-结合-List-实现动态列表" class="headerlink" title="Stack 结合 List 实现动态列表"></a>Stack 结合 List 实现动态列表</h4><p>要实现的功能：<br>1、实现浮动按钮。<br>2、点击按钮让列表的数字加一。</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Entry</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line">struct <span class="title class_">Index</span> &#123;</span><br><span class="line">  <span class="meta">@State</span> <span class="attr">list</span>: <span class="built_in">number</span>[] = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]</span><br><span class="line"></span><br><span class="line">  <span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">Column</span>() &#123;</span><br><span class="line">      <span class="title class_">Stack</span>(&#123; <span class="attr">alignContent</span>: <span class="title class_">Alignment</span>.<span class="property">BottomEnd</span> &#125;) &#123;</span><br><span class="line">        <span class="title class_">List</span>(&#123; <span class="attr">space</span>: <span class="number">10</span> &#125;) &#123;</span><br><span class="line">          <span class="title class_">ForEach</span>(<span class="variable language_">this</span>.<span class="property">list</span>, <span class="function">(<span class="params">item: <span class="built_in">number</span></span>) =&gt;</span> &#123;</span><br><span class="line">            <span class="title class_">ListItem</span>() &#123;</span><br><span class="line">              <span class="title class_">Text</span>(<span class="string">`<span class="subst">$&#123;item&#125;</span>`</span>)</span><br><span class="line">                .<span class="title function_">fontSize</span>(<span class="number">20</span>)</span><br><span class="line">                .<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">                .<span class="title function_">height</span>(<span class="number">50</span>)</span><br><span class="line">                .<span class="title function_">backgroundColor</span>(<span class="string">&#x27;#eee&#x27;</span>)</span><br><span class="line">                .<span class="title function_">textAlign</span>(<span class="title class_">TextAlign</span>.<span class="property">Center</span>)</span><br><span class="line">            &#125;</span><br><span class="line">          &#125;)</span><br><span class="line">        &#125;.<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>).<span class="title function_">height</span>(<span class="string">&#x27;100%&#x27;</span>).<span class="title function_">padding</span>(<span class="number">10</span>)</span><br><span class="line"></span><br><span class="line">        <span class="title class_">Button</span>(&#123; <span class="attr">type</span>: <span class="title class_">ButtonType</span>.<span class="property">Circle</span>, <span class="attr">stateEffect</span>: <span class="literal">true</span> &#125;) &#123;</span><br><span class="line">          <span class="title class_">Text</span>(<span class="string">&#x27;+&#x27;</span>).<span class="title function_">fontSize</span>(<span class="number">40</span>).<span class="title function_">fontColor</span>(<span class="title class_">Color</span>.<span class="property">White</span>)</span><br><span class="line">        &#125;.<span class="title function_">width</span>(<span class="number">55</span>).<span class="title function_">height</span>(<span class="number">55</span>).<span class="title function_">margin</span>(&#123; <span class="attr">right</span>: <span class="number">20</span>, <span class="attr">bottom</span>: <span class="number">20</span> &#125;).<span class="title function_">onClick</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">          <span class="variable language_">this</span>.<span class="title function_">doAdd</span>()</span><br><span class="line">        &#125;)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;.<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>).<span class="title function_">height</span>(<span class="string">&#x27;100%&#x27;</span>).<span class="title function_">alignItems</span>(<span class="title class_">HorizontalAlign</span>.<span class="property">Center</span>)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">doAdd</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">list</span>.<span class="title function_">push</span>(<span class="variable language_">this</span>.<span class="property">list</span>[<span class="variable language_">this</span>.<span class="property">list</span>.<span class="property">length</span>-<span class="number">1</span>] + <span class="number">1</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<img data-src="https://gitee.com/zch0304/images/raw/master/note/1716475790377.jpg" style="zoom: 50%;" /> 

<h4 id="Stack-结合-List-实现浮动导航"><a href="#Stack-结合-List-实现浮动导航" class="headerlink" title="Stack 结合 List 实现浮动导航"></a>Stack 结合 List 实现浮动导航</h4><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Entry</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line">struct <span class="title class_">Index</span> &#123;</span><br><span class="line">  <span class="meta">@State</span> <span class="attr">list</span>: <span class="built_in">number</span>[] = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]</span><br><span class="line"></span><br><span class="line">  <span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">Column</span>() &#123;</span><br><span class="line">      <span class="title class_">Stack</span>(&#123; <span class="attr">alignContent</span>: <span class="title class_">Alignment</span>.<span class="property">BottomEnd</span> &#125;) &#123;</span><br><span class="line">        <span class="title class_">Stack</span>(&#123; <span class="attr">alignContent</span>: <span class="title class_">Alignment</span>.<span class="property">TopEnd</span> &#125;) &#123;</span><br><span class="line">          <span class="title class_">List</span>(&#123; <span class="attr">space</span>: <span class="number">10</span> &#125;) &#123;</span><br><span class="line">            <span class="title class_">ForEach</span>(<span class="variable language_">this</span>.<span class="property">list</span>, <span class="function">(<span class="params">item: <span class="built_in">number</span></span>) =&gt;</span> &#123;</span><br><span class="line">              <span class="title class_">ListItem</span>() &#123;</span><br><span class="line">                <span class="title class_">Text</span>(<span class="string">`<span class="subst">$&#123;item&#125;</span>`</span>)</span><br><span class="line">                  .<span class="title function_">fontSize</span>(<span class="number">20</span>)</span><br><span class="line">                  .<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">                  .<span class="title function_">height</span>(<span class="number">50</span>)</span><br><span class="line">                  .<span class="title function_">backgroundColor</span>(<span class="string">&#x27;#eee&#x27;</span>)</span><br><span class="line">                  .<span class="title function_">textAlign</span>(<span class="title class_">TextAlign</span>.<span class="property">Center</span>)</span><br><span class="line">              &#125;</span><br><span class="line">            &#125;)</span><br><span class="line">          &#125;.<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>).<span class="title function_">height</span>(<span class="string">&#x27;100%&#x27;</span>).<span class="title function_">padding</span>(&#123; <span class="attr">left</span>: <span class="number">10</span>, <span class="attr">top</span>: <span class="number">70</span>, <span class="attr">right</span>: <span class="number">10</span>, <span class="attr">bottom</span>: <span class="number">10</span> &#125;)</span><br><span class="line"></span><br><span class="line">          <span class="title class_">Row</span>() &#123;</span><br><span class="line">            <span class="title class_">Text</span>(<span class="string">&quot;导航&quot;</span>).<span class="title function_">fontSize</span>(<span class="number">16</span>).<span class="title function_">textAlign</span>(<span class="title class_">TextAlign</span>.<span class="property">Center</span>).<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">          &#125;.<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>).<span class="title function_">height</span>(<span class="number">60</span>).<span class="title function_">backgroundColor</span>(<span class="title class_">Color</span>.<span class="property">Orange</span>)</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="title class_">Button</span>(&#123; <span class="attr">type</span>: <span class="title class_">ButtonType</span>.<span class="property">Circle</span>, <span class="attr">stateEffect</span>: <span class="literal">true</span> &#125;) &#123;</span><br><span class="line">          <span class="title class_">Text</span>(<span class="string">&#x27;+&#x27;</span>).<span class="title function_">fontSize</span>(<span class="number">40</span>).<span class="title function_">fontColor</span>(<span class="title class_">Color</span>.<span class="property">White</span>)</span><br><span class="line">        &#125;.<span class="title function_">width</span>(<span class="number">55</span>).<span class="title function_">height</span>(<span class="number">55</span>).<span class="title function_">margin</span>(&#123; <span class="attr">right</span>: <span class="number">20</span>, <span class="attr">bottom</span>: <span class="number">20</span> &#125;).<span class="title function_">onClick</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">          <span class="variable language_">this</span>.<span class="title function_">doAdd</span>()</span><br><span class="line">        &#125;)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;.<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>).<span class="title function_">height</span>(<span class="string">&#x27;100%&#x27;</span>).<span class="title function_">alignItems</span>(<span class="title class_">HorizontalAlign</span>.<span class="property">Center</span>)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">doAdd</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">list</span>.<span class="title function_">push</span>(<span class="variable language_">this</span>.<span class="property">list</span>[<span class="variable language_">this</span>.<span class="property">list</span>.<span class="property">length</span>-<span class="number">1</span>] + <span class="number">1</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<img data-src="https://gitee.com/zch0304/images/raw/master/note/1716477035040.jpg" style="zoom:50%;" /> 

<h3 id="弹性布局（Flex）"><a href="#弹性布局（Flex）" class="headerlink" title="弹性布局（Flex）"></a>弹性布局（Flex）</h3><p>Flex 弹性布局可以更加方便的对容器中的子元素进行排列、对齐和分配剩余空间等。单行的 Flex 跟 Row 组件的表现几乎一致，单列的 Flex 则跟 Column 组件表现几乎一致。但 Row 与 Column 都是单行单列的，Flex 则可以突破了这个限制，当主轴上空间不足时，则向纵轴上去扩展显示。</p>
<img data-src="https://gitee.com/zch0304/images/raw/master/note/1716554468902.jpg" style="zoom:50%;" /> 

<h4 id="Flex-接口"><a href="#Flex-接口" class="headerlink" title="Flex 接口"></a>Flex 接口</h4><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Flex</span>(value?: &#123; direction?: <span class="title class_">FlexDirection</span>, wrap?: <span class="title class_">FlexWrap</span>, justifyContent?: <span class="title class_">FlexAlign</span>, alignItems?: <span class="title class_">ItemAlign</span>, alignContent?: <span class="title class_">FlexAlign</span> &#125;)</span><br></pre></td></tr></table></figure>

<p>标准 Flex 布局容器。从 API version 9 开始，该接口支持在 ArkTS 片中使用。</p>
<h4 id="Flex-参数"><a href="#Flex-参数" class="headerlink" title="Flex 参数"></a>Flex 参数</h4><table>
<thead>
<tr>
<th>参数名</th>
<th>参数类型</th>
<th>必 填</th>
<th>默认值</th>
<th>参数描述</th>
</tr>
</thead>
<tbody><tr>
<td>direction</td>
<td>FlexDirection</td>
<td>否</td>
<td>FlexDirection.Row</td>
<td>子组件在 Flex 容器上排列的方向，即主轴的方向。</td>
</tr>
<tr>
<td>wrap</td>
<td>FlexWrap</td>
<td>否</td>
<td>FlexWrap.NoWrap</td>
<td>Flex 容器是单行&#x2F;列还是多行&#x2F;列排列。说明：在多行布局时，通过交叉轴方向，确认新行堆叠方向。</td>
</tr>
<tr>
<td>justifyContent</td>
<td>FlexAlign</td>
<td>否</td>
<td>FlexAlign.Start</td>
<td>子组件在 Flex 容器主轴上的对齐格式。</td>
</tr>
<tr>
<td>alignItems</td>
<td>ItemAlign</td>
<td>否</td>
<td>ItemAlign.Start</td>
<td>子组件在 Flex 容器交叉轴上的对齐格式。</td>
</tr>
<tr>
<td>alignContent</td>
<td>FlexAlign</td>
<td>否</td>
<td>FlexAlign.Start</td>
<td>交叉轴中有额外的空间时，多行内容的对齐方式。仅在 wrap 为 Wrap 或 WrapReverse 下生效。</td>
</tr>
</tbody></table>
<h4 id="Flex-轴的基本概念"><a href="#Flex-轴的基本概念" class="headerlink" title="Flex 轴的基本概念"></a>Flex 轴的基本概念</h4><ul>
<li><strong>主轴</strong>：Flex 组件布局方向的轴线，子元素默认沿着主轴排列。主轴开始的位置称为主轴起始点，结束位置称为主轴结束点。</li>
<li><strong>交叉轴</strong>：垂直于主轴方向的轴线。交叉轴开始的位置称为交叉轴起始点，结束位置称为交叉轴结束点。</li>
</ul>
<h4 id="direction-参数控制布局方向"><a href="#direction-参数控制布局方向" class="headerlink" title="direction 参数控制布局方向"></a>direction 参数控制布局方向</h4><p>Flex 布局中通过 direction 可以改变布局方向，在弹性布局中，容器的子元素可以按照任意方向排列。通过设置参数 direction，可以决定主轴的方向，从而控制子组件的排列方向。</p>
<img data-src="https://gitee.com/zch0304/images/raw/master/note/1716557181764.jpg" style="zoom:50%;" /> 

<ul>
<li>FlexDirection.Row：主轴为水平方向，子组件从起始端沿着水平方向开始排布。</li>
<li>FlexDirection.RowReverse：主轴为水平方向，子组件从终点端沿着 FlexDirection. Row 相反的方向开始排布。</li>
<li>FlexDirection.Column：主轴为垂直方向，子组件从起始端沿着垂直方向开始排布。</li>
<li>FlexDirection.ColumnReverse：主轴为垂直方向，子组件从终点端沿着 FlexDirection. Column 相反的方向开始排布。</li>
</ul>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Entry</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line">struct <span class="title class_">Index</span> &#123;</span><br><span class="line">  <span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">Flex</span>(&#123; <span class="attr">direction</span>: <span class="title class_">FlexDirection</span>.<span class="property">Row</span> &#125;) &#123;</span><br><span class="line">      <span class="title class_">Text</span>(<span class="string">&#x27;1&#x27;</span>).<span class="title function_">width</span>(<span class="string">&#x27;33%&#x27;</span>).<span class="title function_">height</span>(<span class="number">50</span>).<span class="title function_">backgroundColor</span>(<span class="title class_">Color</span>.<span class="property">Red</span>)</span><br><span class="line">      <span class="title class_">Text</span>(<span class="string">&#x27;2&#x27;</span>).<span class="title function_">width</span>(<span class="string">&#x27;33%&#x27;</span>).<span class="title function_">height</span>(<span class="number">50</span>).<span class="title function_">backgroundColor</span>(<span class="title class_">Color</span>.<span class="property">Green</span>)</span><br><span class="line">      <span class="title class_">Text</span>(<span class="string">&#x27;3&#x27;</span>).<span class="title function_">width</span>(<span class="string">&#x27;33%&#x27;</span>).<span class="title function_">height</span>(<span class="number">50</span>).<span class="title function_">backgroundColor</span>(<span class="title class_">Color</span>.<span class="property">Orange</span>)</span><br><span class="line">    &#125;.<span class="title function_">width</span>(<span class="string">&#x27;90%&#x27;</span>).<span class="title function_">height</span>(<span class="number">70</span>).<span class="title function_">padding</span>(<span class="number">10</span>).<span class="title function_">backgroundColor</span>(<span class="string">&#x27;#ccc&#x27;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img data-src="https://gitee.com/zch0304/images/raw/master/note/1716557759593.jpg"> </p>
<h4 id="wrap-参数控制布局换行"><a href="#wrap-参数控制布局换行" class="headerlink" title="wrap 参数控制布局换行"></a>wrap 参数控制布局换行</h4><p>弹性布局分为单行布局和多行布局。默认情况下，Flex 容器中的子元素都排在一条线（又称“轴线”） 上。wrap 属性控制当子元素主轴尺寸之和大于容器主轴尺寸时，Flex 是单行布局还是多行布局。在多行布局时，通过交叉轴方向，确认新行堆叠方向。 </p>
<p><strong>FlexWrap. NoWrap</strong>（默认值）：不换行。如果子组件的宽度总和大于父元素的宽度，则子组件会被压缩宽度。</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Entry</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line">struct <span class="title class_">Index</span> &#123;</span><br><span class="line">  <span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">Flex</span>(&#123; <span class="attr">wrap</span>: <span class="title class_">FlexWrap</span>.<span class="property">NoWrap</span> &#125;) &#123;</span><br><span class="line">      <span class="title class_">Text</span>(<span class="string">&#x27;1&#x27;</span>).<span class="title function_">width</span>(<span class="string">&#x27;50%&#x27;</span>).<span class="title function_">height</span>(<span class="number">50</span>).<span class="title function_">backgroundColor</span>(<span class="title class_">Color</span>.<span class="property">Red</span>)</span><br><span class="line">      <span class="title class_">Text</span>(<span class="string">&#x27;2&#x27;</span>).<span class="title function_">width</span>(<span class="string">&#x27;50%&#x27;</span>).<span class="title function_">height</span>(<span class="number">50</span>).<span class="title function_">backgroundColor</span>(<span class="title class_">Color</span>.<span class="property">Green</span>)</span><br><span class="line">      <span class="title class_">Text</span>(<span class="string">&#x27;3&#x27;</span>).<span class="title function_">width</span>(<span class="string">&#x27;50%&#x27;</span>).<span class="title function_">height</span>(<span class="number">50</span>).<span class="title function_">backgroundColor</span>(<span class="title class_">Color</span>.<span class="property">Orange</span>)</span><br><span class="line">    &#125;.<span class="title function_">width</span>(<span class="string">&#x27;90%&#x27;</span>).<span class="title function_">padding</span>(<span class="number">10</span>).<span class="title function_">backgroundColor</span>(<span class="string">&#x27;#ccc&#x27;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img data-src="https://gitee.com/zch0304/images/raw/master/note/1716557759593.jpg"> </p>
<p><strong>FlexWrap. Wrap</strong>：换行，每一行子组件按照主轴方向排列。</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Entry</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line">struct <span class="title class_">Index</span> &#123;</span><br><span class="line">  <span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">Flex</span>(&#123; <span class="attr">wrap</span>: <span class="title class_">FlexWrap</span>.<span class="property">Wrap</span> &#125;) &#123;</span><br><span class="line">      <span class="title class_">Text</span>(<span class="string">&#x27;1&#x27;</span>).<span class="title function_">width</span>(<span class="string">&#x27;50%&#x27;</span>).<span class="title function_">height</span>(<span class="number">50</span>).<span class="title function_">backgroundColor</span>(<span class="title class_">Color</span>.<span class="property">Red</span>)</span><br><span class="line">      <span class="title class_">Text</span>(<span class="string">&#x27;2&#x27;</span>).<span class="title function_">width</span>(<span class="string">&#x27;50%&#x27;</span>).<span class="title function_">height</span>(<span class="number">50</span>).<span class="title function_">backgroundColor</span>(<span class="title class_">Color</span>.<span class="property">Green</span>)</span><br><span class="line">      <span class="title class_">Text</span>(<span class="string">&#x27;3&#x27;</span>).<span class="title function_">width</span>(<span class="string">&#x27;50%&#x27;</span>).<span class="title function_">height</span>(<span class="number">50</span>).<span class="title function_">backgroundColor</span>(<span class="title class_">Color</span>.<span class="property">Orange</span>)</span><br><span class="line">    &#125;.<span class="title function_">width</span>(<span class="string">&#x27;90%&#x27;</span>).<span class="title function_">padding</span>(<span class="number">10</span>).<span class="title function_">backgroundColor</span>(<span class="string">&#x27;#ccc&#x27;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img data-src="https://gitee.com/zch0304/images/raw/master/note/1716558674189.jpg"> </p>
<p><strong>FlexWrap. WrapReverse</strong>：换行，每一行子组件按照主轴反方向排列。</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Entry</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line">struct <span class="title class_">Index</span> &#123;</span><br><span class="line">  <span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">Flex</span>(&#123; <span class="attr">wrap</span>: <span class="title class_">FlexWrap</span>.<span class="property">WrapReverse</span> &#125;) &#123;</span><br><span class="line">      <span class="title class_">Text</span>(<span class="string">&#x27;1&#x27;</span>).<span class="title function_">width</span>(<span class="string">&#x27;50%&#x27;</span>).<span class="title function_">height</span>(<span class="number">50</span>).<span class="title function_">backgroundColor</span>(<span class="title class_">Color</span>.<span class="property">Red</span>)</span><br><span class="line">      <span class="title class_">Text</span>(<span class="string">&#x27;2&#x27;</span>).<span class="title function_">width</span>(<span class="string">&#x27;50%&#x27;</span>).<span class="title function_">height</span>(<span class="number">50</span>).<span class="title function_">backgroundColor</span>(<span class="title class_">Color</span>.<span class="property">Green</span>)</span><br><span class="line">      <span class="title class_">Text</span>(<span class="string">&#x27;3&#x27;</span>).<span class="title function_">width</span>(<span class="string">&#x27;50%&#x27;</span>).<span class="title function_">height</span>(<span class="number">50</span>).<span class="title function_">backgroundColor</span>(<span class="title class_">Color</span>.<span class="property">Orange</span>)</span><br><span class="line">    &#125;.<span class="title function_">width</span>(<span class="string">&#x27;90%&#x27;</span>).<span class="title function_">padding</span>(<span class="number">10</span>).<span class="title function_">backgroundColor</span>(<span class="string">&#x27;#ccc&#x27;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<img data-src="https://gitee.com/zch0304/images/raw/master/note/1716558853253.jpg" style="zoom:80%;" /> 

<h4 id="justifyContent-配置主轴对齐方式"><a href="#justifyContent-配置主轴对齐方式" class="headerlink" title="justifyContent 配置主轴对齐方式"></a>justifyContent 配置主轴对齐方式</h4><img data-src="https://gitee.com/zch0304/images/raw/master/note/1716559329865.jpg" style="zoom: 67%;" /> 

<p><strong>FlexAlign.Start</strong>（默认值）：子组件在主轴方向起始端对齐，第一个子组件与父元素边沿对齐，其他元素与前一个元素对齐。</p>
<p><strong>FlexAlign.Center</strong>：子组件在主轴方向居中对齐。</p>
<p><strong>FlexAlign.End</strong>：子组件在主轴方向终点端对齐，最后一个子组件与父元素边沿对齐，其它元素与后一个元素对齐。</p>
<p><strong>FlexAlign.SpaceBetween</strong>：Flex 主轴方向均匀分配弹性元素，相邻子组件之间距离相同。第一个子组件和最后一个子组件与父元素边沿对齐。</p>
<p><strong>FlexAlign.SpaceAround</strong>：Flex 主轴方向均匀分配弹性元素，相邻子组件之间距离相同。第一个子组件到主轴起始端的距离和最后一个子组件到主轴终点端的距离是相邻元素之间距离的一半。</p>
<p><strong>FlexAlign.SpaceEvenly</strong>：Flex 主轴方向元素等间距布局，相邻子组件之间的间距、第一个子组件与主轴起始端的间距、最后一个子组件到主轴终点端的间距均相等。</p>
<h4 id="alignContent-配置内容对齐"><a href="#alignContent-配置内容对齐" class="headerlink" title="alignContent 配置内容对齐"></a>alignContent 配置内容对齐</h4><p>可以通过 alignContent 参数设置子组件各行在交叉轴剩余空间内的对齐方式，只在多行的 ﬂex 布局中生效（仅在 wrap 为 Wrap 或 WrapReverse 下生效），可选值有：</p>
<p><strong>FlexAlign.Start</strong>：子组件各行与交叉轴起点对齐，默认值。</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Entry</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line">struct <span class="title class_">Index</span> &#123;</span><br><span class="line">  <span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">Flex</span>(&#123; <span class="attr">justifyContent</span>: <span class="title class_">FlexAlign</span>.<span class="property">SpaceBetween</span>, <span class="attr">wrap</span>: <span class="title class_">FlexWrap</span>.<span class="property">Wrap</span>, <span class="attr">alignContent</span>: <span class="title class_">FlexAlign</span>.<span class="property">Start</span> &#125;) &#123;</span><br><span class="line">      <span class="title class_">Text</span>(<span class="string">&#x27;1&#x27;</span>).<span class="title function_">width</span>(<span class="string">&#x27;30%&#x27;</span>).<span class="title function_">height</span>(<span class="number">20</span>).<span class="title function_">backgroundColor</span>(<span class="title class_">Color</span>.<span class="property">Red</span>)</span><br><span class="line">      <span class="title class_">Text</span>(<span class="string">&#x27;2&#x27;</span>).<span class="title function_">width</span>(<span class="string">&#x27;60%&#x27;</span>).<span class="title function_">height</span>(<span class="number">20</span>).<span class="title function_">backgroundColor</span>(<span class="title class_">Color</span>.<span class="property">Green</span>)</span><br><span class="line">      <span class="title class_">Text</span>(<span class="string">&#x27;3&#x27;</span>).<span class="title function_">width</span>(<span class="string">&#x27;40%&#x27;</span>).<span class="title function_">height</span>(<span class="number">20</span>).<span class="title function_">backgroundColor</span>(<span class="title class_">Color</span>.<span class="property">Orange</span>)</span><br><span class="line">      <span class="title class_">Text</span>(<span class="string">&#x27;4&#x27;</span>).<span class="title function_">width</span>(<span class="string">&#x27;30%&#x27;</span>).<span class="title function_">height</span>(<span class="number">20</span>).<span class="title function_">backgroundColor</span>(<span class="title class_">Color</span>.<span class="property">Pink</span>)</span><br><span class="line">      <span class="title class_">Text</span>(<span class="string">&#x27;5&#x27;</span>).<span class="title function_">width</span>(<span class="string">&#x27;20%&#x27;</span>).<span class="title function_">height</span>(<span class="number">20</span>).<span class="title function_">backgroundColor</span>(<span class="title class_">Color</span>.<span class="property">Yellow</span>)</span><br><span class="line">    &#125;.<span class="title function_">height</span>(<span class="number">100</span>).<span class="title function_">backgroundColor</span>(<span class="string">&#x27;#ccc&#x27;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img data-src="https://gitee.com/zch0304/images/raw/master/note/1716561030772.jpg"> </p>
<p><strong>FlexAlign.Center</strong>：子组件各行在交叉轴方向居中对齐。</p>
<p><img data-src="https://gitee.com/zch0304/images/raw/master/note/1716561257608.jpg"> </p>
<p><strong>FlexAlign.End</strong>：子组件各行与交叉轴终点对齐。</p>
<p><img data-src="https://gitee.com/zch0304/images/raw/master/note/1716561389788.jpg"> </p>
<p><strong>FlexAlign.SpaceBetween</strong>：子组件各行与交叉轴两端对齐，各行间垂直间距平均分布。</p>
<p><img data-src="https://gitee.com/zch0304/images/raw/master/note/1716561544100.jpg"> </p>
<p><strong>FlexAlign.SpaceAround</strong>：子组件各行间距相等，是元素首尾行与交叉轴两端距离的两倍。</p>
<img data-src="https://gitee.com/zch0304/images/raw/master/note/1716561707980.jpg" style="zoom:80%;" /> 

<p><strong>FlexAlign.SpaceEvenly</strong>：子组件各行间距，子组件首尾行与交叉轴两端距离都相等。</p>
<img data-src="https://gitee.com/zch0304/images/raw/master/note/1716561851381.jpg" style="zoom:80%;" /> 

<h4 id="alignItems-参数控制交叉轴对齐方式"><a href="#alignItems-参数控制交叉轴对齐方式" class="headerlink" title="alignItems 参数控制交叉轴对齐方式"></a>alignItems 参数控制交叉轴对齐方式</h4><p>容器和子元素都可以设置交叉轴对齐方式，且子元素设置的对齐方式优先级较高。可以通过 Flex 组件的 alignItems 参数设置子组件在交叉轴的对齐方式。</p>
<p><strong>ItemAlign.Auto</strong>：使用 Flex 容器中默认配置。</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Entry</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line">struct <span class="title class_">Index</span> &#123;</span><br><span class="line">  <span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">Flex</span>(&#123; <span class="attr">alignItems</span>: <span class="title class_">ItemAlign</span>.<span class="property">Auto</span> &#125;) &#123;</span><br><span class="line">      <span class="title class_">Text</span>(<span class="string">&#x27;1&#x27;</span>).<span class="title function_">width</span>(<span class="string">&#x27;33%&#x27;</span>).<span class="title function_">height</span>(<span class="number">20</span>).<span class="title function_">backgroundColor</span>(<span class="title class_">Color</span>.<span class="property">Red</span>)</span><br><span class="line">      <span class="title class_">Text</span>(<span class="string">&#x27;2&#x27;</span>).<span class="title function_">width</span>(<span class="string">&#x27;33%&#x27;</span>).<span class="title function_">height</span>(<span class="number">40</span>).<span class="title function_">backgroundColor</span>(<span class="title class_">Color</span>.<span class="property">Green</span>)</span><br><span class="line">      <span class="title class_">Text</span>(<span class="string">&#x27;3&#x27;</span>).<span class="title function_">width</span>(<span class="string">&#x27;33%&#x27;</span>).<span class="title function_">height</span>(<span class="number">60</span>).<span class="title function_">backgroundColor</span>(<span class="title class_">Color</span>.<span class="property">Orange</span>)</span><br><span class="line">    &#125;.<span class="title function_">height</span>(<span class="number">80</span>).<span class="title function_">backgroundColor</span>(<span class="string">&#x27;#ccc&#x27;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<img data-src="https://gitee.com/zch0304/images/raw/master/note/1716816140506.jpg" style="zoom:80%;" /> 

<p><strong>ItemAlign.Start</strong>：交叉轴方向首部对齐，默认值。</p>
<img data-src="https://gitee.com/zch0304/images/raw/master/note/1716816140506.jpg" style="zoom:80%;" /> 

<p><strong>ItemAlign.Center</strong>：交叉轴方向居中对齐。</p>
<img data-src="https://gitee.com/zch0304/images/raw/master/note/1716816486562.jpg" style="zoom:80%;" /> 

<p><strong>ItemAlign.End</strong>：交叉轴方向底部对齐。</p>
<img data-src="https://gitee.com/zch0304/images/raw/master/note/1716817062907.jpg" style="zoom:80%;" /> 

<p><strong>ItemAlign.Stretch</strong>：交叉轴方向拉伸填充，在未设置尺寸时，拉伸到容器尺寸。</p>
<img data-src="https://gitee.com/zch0304/images/raw/master/note/1716817484409.jpg" style="zoom:80%;" /> 

<p><strong>ItemAlign. Baseline</strong>：交叉轴方向文本基线对齐。</p>
<img data-src="https://gitee.com/zch0304/images/raw/master/note/1716817697841.jpg" style="zoom:80%;" /> 

<h4 id="Flex-自适应拉伸布局属性"><a href="#Flex-自适应拉伸布局属性" class="headerlink" title="Flex 自适应拉伸布局属性"></a>Flex 自适应拉伸布局属性</h4><p>Row、Column 结合 layoutWeight 可以实现自适应拉伸弹性布局。</p>
<p><strong>1、ﬂexGrow 属性</strong></p>
<p>设置父容器的剩余空间分配给此属性所在组件的比例。用于“瓜分”父组件的剩余空间。</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Entry</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line">struct <span class="title class_">Index</span> &#123;</span><br><span class="line">  <span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">Flex</span>() &#123;</span><br><span class="line">      <span class="title class_">Text</span>(<span class="string">&#x27;1&#x27;</span>).<span class="title function_">flexGrow</span>(<span class="number">1</span>).<span class="title function_">height</span>(<span class="number">60</span>).<span class="title function_">backgroundColor</span>(<span class="title class_">Color</span>.<span class="property">Red</span>)</span><br><span class="line">      <span class="title class_">Text</span>(<span class="string">&#x27;2&#x27;</span>).<span class="title function_">flexGrow</span>(<span class="number">2</span>).<span class="title function_">height</span>(<span class="number">60</span>).<span class="title function_">backgroundColor</span>(<span class="title class_">Color</span>.<span class="property">Green</span>)</span><br><span class="line">      <span class="title class_">Text</span>(<span class="string">&#x27;no flexGrow&#x27;</span>).<span class="title function_">width</span>(<span class="number">100</span>).<span class="title function_">height</span>(<span class="number">60</span>).<span class="title function_">backgroundColor</span>(<span class="title class_">Color</span>.<span class="property">Orange</span>)</span><br><span class="line">    &#125;.<span class="title function_">height</span>(<span class="number">80</span>).<span class="title function_">backgroundColor</span>(<span class="string">&#x27;#ccc&#x27;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<img data-src="https://gitee.com/zch0304/images/raw/master/note/1716819203162.jpg" style="zoom:80%;" /> 

<p>父容器宽度 400vp，三个子组件原始宽度为 100vp，总和 300vp，剩余空间 100vp 根据 ﬂexGrow 值的占比分配给子组件，未设置 ﬂexGrow 的子组件不参与“瓜分”。 第一个元素以及第二个元素以 2:3 分配剩下的 100vp。第一个元素为 100vp+100vp2&#x2F;5&#x3D;140vp，第 二个元素为 100vp+100vp3&#x2F;5&#x3D;160vp。</p>
<p><strong>2、ﬂexShrink 属性</strong></p>
<p>当父容器空间不足时，子组件的压缩比例。</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Entry</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line">struct <span class="title class_">Index</span> &#123;</span><br><span class="line">  <span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">Flex</span>() &#123;</span><br><span class="line">      <span class="title class_">Text</span>(<span class="string">&#x27;flexShrink(3)&#x27;</span>).<span class="title function_">flexShrink</span>(<span class="number">3</span>).<span class="title function_">width</span>(<span class="number">200</span>).<span class="title function_">height</span>(<span class="number">60</span>).<span class="title function_">backgroundColor</span>(<span class="title class_">Color</span>.<span class="property">Red</span>)</span><br><span class="line">      <span class="title class_">Text</span>(<span class="string">&#x27;no flexShrink&#x27;</span>).<span class="title function_">width</span>(<span class="number">200</span>).<span class="title function_">height</span>(<span class="number">60</span>).<span class="title function_">backgroundColor</span>(<span class="title class_">Color</span>.<span class="property">Green</span>)</span><br><span class="line">      <span class="title class_">Text</span>(<span class="string">&#x27;flexShrink(1)&#x27;</span>).<span class="title function_">flexShrink</span>(<span class="number">1</span>).<span class="title function_">width</span>(<span class="number">200</span>).<span class="title function_">height</span>(<span class="number">60</span>).<span class="title function_">backgroundColor</span>(<span class="title class_">Color</span>.<span class="property">Orange</span>)</span><br><span class="line">    &#125;.<span class="title function_">width</span>(<span class="number">400</span>).<span class="title function_">height</span>(<span class="number">80</span>).<span class="title function_">backgroundColor</span>(<span class="string">&#x27;#ccc&#x27;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<img data-src="https://gitee.com/zch0304/images/raw/master/note/1716821744026.jpg" style="zoom:80%;" /> 

<h4 id="Flex-应用案例"><a href="#Flex-应用案例" class="headerlink" title="Flex 应用案例"></a>Flex 应用案例</h4><p>弹性布局在开发场景中用例特别多，比如页面头部导航栏的均匀分布、页面框架的搭建、多行多列数据的排列等等。</p>
<p><strong>1、热搜功能</strong></p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Entry</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line">struct <span class="title class_">Index</span> &#123;</span><br><span class="line">  <span class="meta">@State</span> <span class="attr">hotSearch</span>: <span class="built_in">string</span>[] = [<span class="string">&#x27;乒乓球&#x27;</span>, <span class="string">&#x27;NBA直播&#x27;</span>, <span class="string">&#x27;世界杯&#x27;</span>, <span class="string">&#x27;广东城际铁路&#x27;</span>, <span class="string">&#x27;Flutter教程&#x27;</span>, <span class="string">&#x27;HarmonyOS&#x27;</span>, <span class="string">&#x27;ArkTS&#x27;</span>]</span><br><span class="line"></span><br><span class="line">  <span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">Column</span>() &#123;</span><br><span class="line">      <span class="title class_">Text</span>(<span class="string">&#x27;热门搜索&#x27;</span>)</span><br><span class="line">        .<span class="title function_">fontSize</span>(<span class="number">30</span>)</span><br><span class="line">        .<span class="title function_">fontWeight</span>(<span class="title class_">FontWeight</span>.<span class="property">Bold</span>)</span><br><span class="line">        .<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">        .<span class="title function_">textAlign</span>(<span class="title class_">TextAlign</span>.<span class="property">Start</span>)</span><br><span class="line">        .<span class="title function_">padding</span>(<span class="number">10</span>)</span><br><span class="line">        .<span class="title function_">fontColor</span>(<span class="string">&#x27;#666&#x27;</span>)</span><br><span class="line">      <span class="title class_">Flex</span>(&#123; <span class="attr">wrap</span>: <span class="title class_">FlexWrap</span>.<span class="property">Wrap</span> &#125;) &#123;</span><br><span class="line">        <span class="title class_">ForEach</span>(<span class="variable language_">this</span>.<span class="property">hotSearch</span>, <span class="function">(<span class="params">item: <span class="built_in">string</span></span>) =&gt;</span> &#123;</span><br><span class="line">          <span class="title class_">Text</span>(<span class="string">`<span class="subst">$&#123;item&#125;</span>`</span>)</span><br><span class="line">            .<span class="title function_">fontSize</span>(<span class="number">18</span>)</span><br><span class="line">            .<span class="title function_">backgroundColor</span>(<span class="string">&#x27;#eee&#x27;</span>)</span><br><span class="line">            .<span class="title function_">padding</span>(&#123; <span class="attr">left</span>: <span class="number">16</span>, <span class="attr">top</span>: <span class="number">10</span>, <span class="attr">right</span>: <span class="number">16</span>, <span class="attr">bottom</span>: <span class="number">10</span> &#125;)</span><br><span class="line">            .<span class="title function_">margin</span>(<span class="number">10</span>)</span><br><span class="line">            .<span class="title function_">borderRadius</span>(<span class="number">12</span>)</span><br><span class="line">        &#125;, <span class="function">(<span class="params">item: <span class="built_in">string</span></span>) =&gt;</span> item)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;.<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>).<span class="title function_">height</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<img data-src="https://gitee.com/zch0304/images/raw/master/note/1716910862339.jpg" style="zoom:80%;" /> 

<p><strong>2、帮助列表</strong></p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> <span class="title class_">HelpListInterface</span> &#123;</span><br><span class="line">  <span class="attr">title</span>: <span class="built_in">string</span>,</span><br><span class="line">  <span class="attr">icon</span>: <span class="title class_">Resource</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Entry</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line">struct <span class="title class_">Index</span> &#123;</span><br><span class="line">  <span class="meta">@State</span> <span class="attr">helpList</span>: <span class="title class_">HelpListInterface</span>[] = [</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">title</span>: <span class="string">&quot;我的订阅&quot;</span>,</span><br><span class="line">      <span class="attr">icon</span>: $r(<span class="string">&quot;app.media.subscribe&quot;</span>)</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">title</span>: <span class="string">&quot;常见问题&quot;</span>,</span><br><span class="line">      <span class="attr">icon</span>: $r(<span class="string">&quot;app.media.problem&quot;</span>)</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">title</span>: <span class="string">&quot;在线客服&quot;</span>,</span><br><span class="line">      <span class="attr">icon</span>: $r(<span class="string">&quot;app.media.customer_service&quot;</span>)</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">title</span>: <span class="string">&quot;意见反馈&quot;</span>,</span><br><span class="line">      <span class="attr">icon</span>: $r(<span class="string">&quot;app.media.opinion&quot;</span>)</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">title</span>: <span class="string">&quot;关怀模式&quot;</span>,</span><br><span class="line">      <span class="attr">icon</span>: $r(<span class="string">&quot;app.media.give&quot;</span>)</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">title</span>: <span class="string">&quot;会员中心&quot;</span>,</span><br><span class="line">      <span class="attr">icon</span>: $r(<span class="string">&quot;app.media.user&quot;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">  ]</span><br><span class="line"></span><br><span class="line">  <span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">Column</span>() &#123;</span><br><span class="line">      <span class="title class_">Flex</span>(&#123; <span class="attr">wrap</span>: <span class="title class_">FlexWrap</span>.<span class="property">Wrap</span> &#125;) &#123;</span><br><span class="line">        <span class="title class_">ForEach</span>(<span class="variable language_">this</span>.<span class="property">helpList</span>, <span class="function">(<span class="params">item: HelpListInterface</span>) =&gt;</span> &#123;</span><br><span class="line">          <span class="title class_">Column</span>() &#123;</span><br><span class="line">            <span class="title class_">Image</span>(item.<span class="property">icon</span>).<span class="title function_">width</span>(<span class="number">42</span>).<span class="title function_">height</span>(<span class="number">42</span>)</span><br><span class="line">            <span class="title class_">Text</span>(<span class="string">`<span class="subst">$&#123;item.title&#125;</span>`</span>).<span class="title function_">fontSize</span>(<span class="number">15</span>).<span class="title function_">fontColor</span>(<span class="string">&#x27;#666&#x27;</span>).<span class="title function_">padding</span>(&#123; <span class="attr">top</span>: <span class="number">10</span> &#125;)</span><br><span class="line">          &#125;.<span class="title function_">width</span>(<span class="string">&#x27;25%&#x27;</span>).<span class="title function_">padding</span>(<span class="number">5</span>).<span class="title function_">margin</span>(&#123; <span class="attr">bottom</span>: <span class="number">10</span> &#125;)</span><br><span class="line">        &#125;, <span class="function">(<span class="params">item: HelpListInterface</span>) =&gt;</span> item.<span class="property">title</span>)</span><br><span class="line">      &#125;</span><br><span class="line">      .<span class="title function_">margin</span>(<span class="number">10</span>)</span><br><span class="line">      .<span class="title function_">backgroundColor</span>(<span class="string">&#x27;#fff&#x27;</span>)</span><br><span class="line">      .<span class="title function_">borderRadius</span>(<span class="number">10</span>)</span><br><span class="line">      .<span class="title function_">padding</span>(&#123; <span class="attr">top</span>: <span class="number">15</span>, <span class="attr">bottom</span>: <span class="number">5</span> &#125;)</span><br><span class="line">    &#125;.<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>).<span class="title function_">height</span>(<span class="string">&#x27;100%&#x27;</span>).<span class="title function_">backgroundColor</span>(<span class="string">&#x27;#eee&#x27;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<img data-src="https://gitee.com/zch0304/images/raw/master/note/1716912172452.jpg" style="zoom:80%;" /> 

<h3 id="相对布局（RelativeContainer）"><a href="#相对布局（RelativeContainer）" class="headerlink" title="相对布局（RelativeContainer）"></a>相对布局（RelativeContainer）</h3><p>相对布局组件，用于复杂场景中元素对齐的布局。</p>
<p>RelativeContainer 就是采用相对布局的容器，支持容器内部的子元素设置相对位置关系。子元素支持指定兄弟元素作为锚点，也支持指定父容器作为锚点，基于锚点做相对位置布局。下图是一个 RelativeContainer 的概念图，图中的虚线表示位置的依赖关系。</p>
<img data-src="https://gitee.com/zch0304/images/raw/master/note/1716991550056.jpg" style="zoom: 33%;" /> 

<h4 id="规则说明"><a href="#规则说明" class="headerlink" title="规则说明"></a>规则说明</h4><p>1、容器内子组件区分水平方向，垂直方向：</p>
<p>​    （1）水平方向为 left，middle，right，对应容器的 HorizontalAlign.Start，HorizontalAlign.Center，HorizontalAlign.End。</p>
<p>​    （2）垂直方向为 top，center，bottom，对应容器的 VerticalAlign.Top，VerticalAlign.Center，VerticalAlign.Bottom。</p>
<p>2、子组件可以将容器或者其他子组件设为锚点：</p>
<p>​    （1）参与相对布局的容器内组件必须设置 id，不设置 id 的组件不显示，RelativeContainer 容器的固定 id 为 __container__。</p>
<p>​    （2）此子组件某一方向上的三个位置可以将容器或其它子组件的同方向三个位置为锚点，同方向上两个以上位置设置锚点以后会跳过第三个。</p>
<p>​    （3）前端页面设置的子组件尺寸大小不会受到相对布局规则的影响。子组件某个方向上设置两个或以上 alignRules 时不建议设置此方向尺寸大小。</p>
<p>​    （4）对齐后需要额外偏移可设置 <strong>oﬀset</strong>。</p>
<p>3、特殊情况：</p>
<p>​    （1）互相依赖，环形依赖时容器内子组件全部不绘制。</p>
<p>​    （2）同方向上两个以上位置设置锚点但锚点位置逆序时，此子组件大小为 0，即不绘制。</p>
<p>​    （3）容器不设置宽高时，容器与容器内子组件不绘制。</p>
<h4 id="基本使用演示"><a href="#基本使用演示" class="headerlink" title="基本使用演示"></a>基本使用演示</h4><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Entry</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line">struct <span class="title class_">Index</span> &#123;</span><br><span class="line">  <span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">Column</span>() &#123;</span><br><span class="line">      <span class="title class_">RelativeContainer</span>() &#123;</span><br><span class="line">        <span class="title class_">Row</span>()</span><br><span class="line">          .<span class="title function_">width</span>(<span class="number">100</span>)</span><br><span class="line">          .<span class="title function_">height</span>(<span class="number">100</span>)</span><br><span class="line">          .<span class="title function_">backgroundColor</span>(<span class="title class_">Color</span>.<span class="property">Orange</span>)</span><br><span class="line">          .<span class="title function_">alignRules</span>(&#123;</span><br><span class="line">            <span class="attr">left</span>: &#123; <span class="attr">anchor</span>: <span class="string">&#x27;__container__&#x27;</span>, <span class="attr">align</span>: <span class="title class_">HorizontalAlign</span>.<span class="property">Start</span> &#125;,</span><br><span class="line">            <span class="attr">top</span>: &#123; <span class="attr">anchor</span>: <span class="string">&#x27;__container__&#x27;</span>, <span class="attr">align</span>: <span class="title class_">VerticalAlign</span>.<span class="property">Top</span> &#125;</span><br><span class="line">          &#125;)</span><br><span class="line">          .<span class="title function_">id</span>(<span class="string">&#x27;row1&#x27;</span>)</span><br><span class="line">          .<span class="title function_">offset</span>(&#123; <span class="attr">x</span>: <span class="number">20</span>, <span class="attr">y</span>: <span class="number">20</span> &#125;)</span><br><span class="line">      &#125;.<span class="title function_">width</span>(<span class="number">200</span>).<span class="title function_">height</span>(<span class="number">200</span>).<span class="title function_">border</span>(&#123; <span class="attr">width</span>: <span class="number">2</span>, <span class="attr">color</span>: <span class="title class_">Color</span>.<span class="property">Green</span> &#125;).<span class="title function_">id</span>(<span class="string">&#x27;rc&#x27;</span>)</span><br><span class="line">    &#125;.<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>).<span class="title function_">height</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<img data-src="https://gitee.com/zch0304/images/raw/master/note/1716995097983.jpg" style="zoom:80%;" /> 

<figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Entry</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line">struct <span class="title class_">Index</span> &#123;</span><br><span class="line">  <span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">RelativeContainer</span>() &#123;</span><br><span class="line">      <span class="title class_">Text</span>(<span class="string">&#x27;1&#x27;</span>)</span><br><span class="line">        .<span class="title function_">id</span>(<span class="string">&#x27;text1&#x27;</span>)</span><br><span class="line">        .<span class="title function_">width</span>(<span class="number">100</span>)</span><br><span class="line">        .<span class="title function_">height</span>(<span class="number">100</span>)</span><br><span class="line">        .<span class="title function_">fontSize</span>(<span class="number">30</span>)</span><br><span class="line">        .<span class="title function_">textAlign</span>(<span class="title class_">TextAlign</span>.<span class="property">Center</span>)</span><br><span class="line">        .<span class="title function_">backgroundColor</span>(<span class="title class_">Color</span>.<span class="property">Red</span>)</span><br><span class="line">        .<span class="title function_">alignRules</span>(&#123;</span><br><span class="line">          <span class="attr">top</span>: &#123; <span class="attr">anchor</span>: <span class="string">&#x27;__container__&#x27;</span>, <span class="attr">align</span>: <span class="title class_">VerticalAlign</span>.<span class="property">Top</span> &#125;,</span><br><span class="line">          <span class="attr">middle</span>: &#123; <span class="attr">anchor</span>: <span class="string">&#x27;__container__&#x27;</span>, <span class="attr">align</span>: <span class="title class_">HorizontalAlign</span>.<span class="property">Center</span> &#125;</span><br><span class="line">        &#125;)</span><br><span class="line">      <span class="title class_">Text</span>(<span class="string">&#x27;2&#x27;</span>)</span><br><span class="line">        .<span class="title function_">id</span>(<span class="string">&#x27;text2&#x27;</span>)</span><br><span class="line">        .<span class="title function_">width</span>(<span class="number">100</span>)</span><br><span class="line">        .<span class="title function_">height</span>(<span class="number">100</span>)</span><br><span class="line">        .<span class="title function_">fontSize</span>(<span class="number">30</span>)</span><br><span class="line">        .<span class="title function_">textAlign</span>(<span class="title class_">TextAlign</span>.<span class="property">Center</span>)</span><br><span class="line">        .<span class="title function_">backgroundColor</span>(<span class="title class_">Color</span>.<span class="property">Green</span>)</span><br><span class="line">        .<span class="title function_">alignRules</span>(&#123;</span><br><span class="line">          <span class="attr">top</span>: &#123; <span class="attr">anchor</span>: <span class="string">&#x27;text1&#x27;</span>, <span class="attr">align</span>: <span class="title class_">VerticalAlign</span>.<span class="property">Bottom</span> &#125;,</span><br><span class="line">          <span class="attr">right</span>: &#123; <span class="attr">anchor</span>: <span class="string">&#x27;text1&#x27;</span>, <span class="attr">align</span>: <span class="title class_">HorizontalAlign</span>.<span class="property">Start</span> &#125;</span><br><span class="line">        &#125;)</span><br><span class="line">      <span class="title class_">Text</span>(<span class="string">&#x27;3&#x27;</span>)</span><br><span class="line">        .<span class="title function_">id</span>(<span class="string">&#x27;text3&#x27;</span>)</span><br><span class="line">        .<span class="title function_">width</span>(<span class="number">100</span>)</span><br><span class="line">        .<span class="title function_">height</span>(<span class="number">100</span>)</span><br><span class="line">        .<span class="title function_">fontSize</span>(<span class="number">30</span>)</span><br><span class="line">        .<span class="title function_">textAlign</span>(<span class="title class_">TextAlign</span>.<span class="property">Center</span>)</span><br><span class="line">        .<span class="title function_">backgroundColor</span>(<span class="title class_">Color</span>.<span class="property">Blue</span>)</span><br><span class="line">        .<span class="title function_">alignRules</span>(&#123;</span><br><span class="line">          <span class="attr">top</span>: &#123; <span class="attr">anchor</span>: <span class="string">&#x27;text1&#x27;</span>, <span class="attr">align</span>: <span class="title class_">VerticalAlign</span>.<span class="property">Bottom</span> &#125;,</span><br><span class="line">          <span class="attr">left</span>: &#123; <span class="attr">anchor</span>: <span class="string">&#x27;text1&#x27;</span>, <span class="attr">align</span>: <span class="title class_">HorizontalAlign</span>.<span class="property">Start</span> &#125;</span><br><span class="line">        &#125;)</span><br><span class="line">      <span class="title class_">Text</span>(<span class="string">&#x27;4&#x27;</span>)</span><br><span class="line">        .<span class="title function_">id</span>(<span class="string">&#x27;text4&#x27;</span>)</span><br><span class="line">        .<span class="title function_">width</span>(<span class="number">100</span>)</span><br><span class="line">        .<span class="title function_">height</span>(<span class="number">100</span>)</span><br><span class="line">        .<span class="title function_">fontSize</span>(<span class="number">30</span>)</span><br><span class="line">        .<span class="title function_">textAlign</span>(<span class="title class_">TextAlign</span>.<span class="property">Center</span>)</span><br><span class="line">        .<span class="title function_">backgroundColor</span>(<span class="title class_">Color</span>.<span class="property">Yellow</span>)</span><br><span class="line">        .<span class="title function_">alignRules</span>(&#123;</span><br><span class="line">          <span class="attr">top</span>: &#123; <span class="attr">anchor</span>: <span class="string">&#x27;text1&#x27;</span>, <span class="attr">align</span>: <span class="title class_">VerticalAlign</span>.<span class="property">Bottom</span> &#125;,</span><br><span class="line">          <span class="attr">left</span>: &#123; <span class="attr">anchor</span>: <span class="string">&#x27;text1&#x27;</span>, <span class="attr">align</span>: <span class="title class_">HorizontalAlign</span>.<span class="property">End</span> &#125;</span><br><span class="line">        &#125;)</span><br><span class="line">      <span class="title class_">Text</span>(<span class="string">&#x27;5&#x27;</span>)</span><br><span class="line">        .<span class="title function_">id</span>(<span class="string">&#x27;text5&#x27;</span>)</span><br><span class="line">        .<span class="title function_">width</span>(<span class="number">100</span>)</span><br><span class="line">        .<span class="title function_">height</span>(<span class="number">100</span>)</span><br><span class="line">        .<span class="title function_">fontSize</span>(<span class="number">30</span>)</span><br><span class="line">        .<span class="title function_">textAlign</span>(<span class="title class_">TextAlign</span>.<span class="property">Center</span>)</span><br><span class="line">        .<span class="title function_">backgroundColor</span>(<span class="title class_">Color</span>.<span class="property">Pink</span>)</span><br><span class="line">        .<span class="title function_">alignRules</span>(&#123;</span><br><span class="line">          <span class="attr">top</span>: &#123; <span class="attr">anchor</span>: <span class="string">&#x27;text3&#x27;</span>, <span class="attr">align</span>: <span class="title class_">VerticalAlign</span>.<span class="property">Bottom</span> &#125;,</span><br><span class="line">          <span class="attr">left</span>: &#123; <span class="attr">anchor</span>: <span class="string">&#x27;text3&#x27;</span>, <span class="attr">align</span>: <span class="title class_">HorizontalAlign</span>.<span class="property">Start</span> &#125;</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<img data-src="https://gitee.com/zch0304/images/raw/master/note/1717678884319.jpg" style="zoom:80%;" /> 

<h4 id="实现底部弹出按钮案例"><a href="#实现底部弹出按钮案例" class="headerlink" title="实现底部弹出按钮案例"></a>实现底部弹出按钮案例</h4><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Entry</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line">struct <span class="title class_">Index</span> &#123;</span><br><span class="line">  <span class="meta">@State</span> <span class="attr">flag</span>: <span class="built_in">boolean</span> = <span class="literal">false</span></span><br><span class="line"></span><br><span class="line">  <span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">Column</span>() &#123;</span><br><span class="line">      <span class="title class_">Stack</span>(&#123; <span class="attr">alignContent</span>: <span class="title class_">Alignment</span>.<span class="property">BottomEnd</span> &#125;) &#123;</span><br><span class="line">        <span class="title class_">List</span>(&#123; <span class="attr">space</span>: <span class="number">10</span> &#125;) &#123;</span><br><span class="line">          <span class="title class_">ForEach</span>([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>, <span class="number">10</span>], <span class="function">(<span class="params">item: <span class="built_in">number</span></span>) =&gt;</span> &#123;</span><br><span class="line">            <span class="title class_">ListItem</span>() &#123;</span><br><span class="line">              <span class="title class_">Text</span>(<span class="string">`<span class="subst">$&#123;item&#125;</span>`</span>)</span><br><span class="line">                .<span class="title function_">fontSize</span>(<span class="number">30</span>)</span><br><span class="line">                .<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">                .<span class="title function_">height</span>(<span class="number">80</span>)</span><br><span class="line">                .<span class="title function_">backgroundColor</span>(<span class="string">&#x27;#eee&#x27;</span>)</span><br><span class="line">                .<span class="title function_">borderRadius</span>(<span class="number">10</span>)</span><br><span class="line">                .<span class="title function_">textAlign</span>(<span class="title class_">TextAlign</span>.<span class="property">Center</span>)</span><br><span class="line">            &#125;</span><br><span class="line">          &#125;)</span><br><span class="line">        &#125;.<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>).<span class="title function_">height</span>(<span class="string">&#x27;100%&#x27;</span>).<span class="title function_">padding</span>(<span class="number">10</span>)</span><br><span class="line"></span><br><span class="line">        <span class="title class_">RelativeContainer</span>() &#123;</span><br><span class="line">          <span class="title class_">Button</span>(&#123; <span class="attr">stateEffect</span>: <span class="literal">true</span> &#125;) &#123;</span><br><span class="line">            <span class="title class_">Text</span>(<span class="string">&#x27;+&#x27;</span>).<span class="title function_">textAlign</span>(<span class="title class_">TextAlign</span>.<span class="property">Center</span>).<span class="title function_">fontColor</span>(<span class="title class_">Color</span>.<span class="property">White</span>).<span class="title function_">fontSize</span>(<span class="number">30</span>)</span><br><span class="line">          &#125;</span><br><span class="line">          .<span class="title function_">id</span>(<span class="string">&#x27;add&#x27;</span>)</span><br><span class="line">          .<span class="title function_">width</span>(<span class="number">80</span>)</span><br><span class="line">          .<span class="title function_">height</span>(<span class="number">80</span>)</span><br><span class="line">          .<span class="title function_">alignRules</span>(&#123;</span><br><span class="line">            <span class="attr">top</span>: &#123; <span class="attr">anchor</span>: <span class="string">&#x27;__container__&#x27;</span>, <span class="attr">align</span>: <span class="title class_">VerticalAlign</span>.<span class="property">Top</span> &#125;,</span><br><span class="line">            <span class="attr">left</span>: &#123; <span class="attr">anchor</span>: <span class="string">&#x27;__container__&#x27;</span>, <span class="attr">align</span>: <span class="title class_">HorizontalAlign</span>.<span class="property">Start</span> &#125;</span><br><span class="line">          &#125;)</span><br><span class="line"></span><br><span class="line">          <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">flag</span>) &#123;</span><br><span class="line">            <span class="title class_">Button</span>() &#123;</span><br><span class="line">              <span class="title class_">Text</span>(<span class="string">&#x27;A&#x27;</span>).<span class="title function_">textAlign</span>(<span class="title class_">TextAlign</span>.<span class="property">Center</span>).<span class="title function_">fontColor</span>(<span class="title class_">Color</span>.<span class="property">White</span>).<span class="title function_">fontSize</span>(<span class="number">30</span>)</span><br><span class="line">            &#125;</span><br><span class="line">            .<span class="title function_">id</span>(<span class="string">&#x27;A&#x27;</span>)</span><br><span class="line">            .<span class="title function_">width</span>(<span class="number">80</span>)</span><br><span class="line">            .<span class="title function_">height</span>(<span class="number">80</span>)</span><br><span class="line">            .<span class="title function_">backgroundColor</span>(<span class="title class_">Color</span>.<span class="property">Orange</span>)</span><br><span class="line">            .<span class="title function_">alignRules</span>(&#123;</span><br><span class="line">              <span class="attr">bottom</span>: &#123; <span class="attr">anchor</span>: <span class="string">&#x27;add&#x27;</span>, <span class="attr">align</span>: <span class="title class_">VerticalAlign</span>.<span class="property">Top</span> &#125;,</span><br><span class="line">              <span class="attr">right</span>: &#123; <span class="attr">anchor</span>: <span class="string">&#x27;add&#x27;</span>, <span class="attr">align</span>: <span class="title class_">HorizontalAlign</span>.<span class="property">End</span> &#125;</span><br><span class="line">            &#125;)</span><br><span class="line">            .<span class="title function_">offset</span>(&#123; <span class="attr">y</span>: -<span class="number">30</span> &#125;)</span><br><span class="line">            .<span class="title function_">opacity</span>(<span class="number">0.8</span>)</span><br><span class="line"></span><br><span class="line">            <span class="title class_">Button</span>() &#123;</span><br><span class="line">              <span class="title class_">Text</span>(<span class="string">&#x27;B&#x27;</span>).<span class="title function_">textAlign</span>(<span class="title class_">TextAlign</span>.<span class="property">Center</span>).<span class="title function_">fontColor</span>(<span class="title class_">Color</span>.<span class="property">White</span>).<span class="title function_">fontSize</span>(<span class="number">30</span>)</span><br><span class="line">            &#125;</span><br><span class="line">            .<span class="title function_">id</span>(<span class="string">&#x27;B&#x27;</span>)</span><br><span class="line">            .<span class="title function_">width</span>(<span class="number">80</span>)</span><br><span class="line">            .<span class="title function_">height</span>(<span class="number">80</span>)</span><br><span class="line">            .<span class="title function_">backgroundColor</span>(<span class="title class_">Color</span>.<span class="property">Gray</span>)</span><br><span class="line">            .<span class="title function_">alignRules</span>(&#123;</span><br><span class="line">              <span class="attr">bottom</span>: &#123; <span class="attr">anchor</span>: <span class="string">&#x27;add&#x27;</span>, <span class="attr">align</span>: <span class="title class_">VerticalAlign</span>.<span class="property">Top</span> &#125;,</span><br><span class="line">              <span class="attr">right</span>: &#123; <span class="attr">anchor</span>: <span class="string">&#x27;add&#x27;</span>, <span class="attr">align</span>: <span class="title class_">HorizontalAlign</span>.<span class="property">Start</span> &#125;</span><br><span class="line">            &#125;)</span><br><span class="line">            .<span class="title function_">offset</span>(&#123; <span class="attr">x</span>: -<span class="number">10</span>, <span class="attr">y</span>: -<span class="number">10</span> &#125;)</span><br><span class="line">            .<span class="title function_">opacity</span>(<span class="number">0.8</span>)</span><br><span class="line"></span><br><span class="line">            <span class="title class_">Button</span>() &#123;</span><br><span class="line">              <span class="title class_">Text</span>(<span class="string">&#x27;C&#x27;</span>).<span class="title function_">textAlign</span>(<span class="title class_">TextAlign</span>.<span class="property">Center</span>).<span class="title function_">fontColor</span>(<span class="title class_">Color</span>.<span class="property">White</span>).<span class="title function_">fontSize</span>(<span class="number">30</span>)</span><br><span class="line">            &#125;</span><br><span class="line">            .<span class="title function_">id</span>(<span class="string">&#x27;C&#x27;</span>)</span><br><span class="line">            .<span class="title function_">width</span>(<span class="number">80</span>)</span><br><span class="line">            .<span class="title function_">height</span>(<span class="number">80</span>)</span><br><span class="line">            .<span class="title function_">backgroundColor</span>(<span class="title class_">Color</span>.<span class="property">Green</span>)</span><br><span class="line">            .<span class="title function_">alignRules</span>(&#123;</span><br><span class="line">              <span class="attr">top</span>: &#123; <span class="attr">anchor</span>: <span class="string">&#x27;add&#x27;</span>, <span class="attr">align</span>: <span class="title class_">VerticalAlign</span>.<span class="property">Top</span> &#125;,</span><br><span class="line">              <span class="attr">right</span>: &#123; <span class="attr">anchor</span>: <span class="string">&#x27;add&#x27;</span>, <span class="attr">align</span>: <span class="title class_">HorizontalAlign</span>.<span class="property">Start</span> &#125;</span><br><span class="line">            &#125;)</span><br><span class="line">            .<span class="title function_">offset</span>(&#123; <span class="attr">x</span>: -<span class="number">30</span> &#125;)</span><br><span class="line">            .<span class="title function_">opacity</span>(<span class="number">0.8</span>)</span><br><span class="line">          &#125;</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line">        .<span class="title function_">width</span>(<span class="number">88</span>)</span><br><span class="line">        .<span class="title function_">height</span>(<span class="number">88</span>)</span><br><span class="line">        .<span class="title function_">onClick</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">flag</span> = !<span class="variable language_">this</span>.<span class="property">flag</span></span><br><span class="line">        &#125;)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<img data-src="https://gitee.com/zch0304/images/raw/master/note/1717682221884.jpg" style="zoom:80%;" /> 

<h3 id="List-组件详解"><a href="#List-组件详解" class="headerlink" title="List 组件详解"></a>List 组件详解</h3><p>List 适合用于呈现同类数据类型或数据类型集，例如图片和文本。在列表中显示数据集合是许多应用程序中的常见要求（如通讯录、音乐列表、购物清单等）。</p>
<p>List 包含 ListItem、ListItemGroup 子组件。</p>
<h4 id="List-接口"><a href="#List-接口" class="headerlink" title="List 接口"></a>List 接口</h4><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">List</span>(value?:&#123;space?: <span class="built_in">number</span> | <span class="built_in">string</span>, initialIndex?: <span class="built_in">number</span>, scroller?: <span class="title class_">Scroller</span>&#125;)</span><br></pre></td></tr></table></figure>

<p>从 API version 9 开始，该接口支持在 ArkTS 卡片中使用。</p>
<p>参数：</p>
<table>
<thead>
<tr>
<th>参数名</th>
<th>参数类型</th>
<th>必填</th>
<th>参数描述</th>
</tr>
</thead>
<tbody><tr>
<td>space</td>
<td>number &#124; string</td>
<td>否</td>
<td>子组件主轴方向的间隔。默认值：0。说明：设置为除 -1 外其它负数或百分比时，按默认值显示。space 参数值小于 List 分割线宽度时，子组件主轴方向的间隔取分割线宽度。</td>
</tr>
<tr>
<td>initialIndex</td>
<td>number</td>
<td>否</td>
<td>设置当前 List 初次加载时视口起始位置显示的 item 的索引值。默认值：0。说明：设置为除 -1 外其它负数或超过了当前 List 最后一个 item 的索引值时视为无效取值，无效取值按默认值显示。</td>
</tr>
<tr>
<td>scroller</td>
<td><span class="exturl" data-url="aHR0cHM6Ly9kZXZlbG9wZXIuaHVhd2VpLmNvbS9jb25zdW1lci9jbi9kb2MvaGFybW9ueW9zLXJlZmVyZW5jZXMtVjIvdHMtY29udGFpbmVyLXNjcm9sbC0wMDAwMDAxNDI3OTAyNDgwLVYyI1pILUNOX1RPUElDXzAwMDAwMDE1MjM2NDg3OTBfX3Njcm9sbGVy">Scroller<i class="fa fa-external-link-alt"></i></span></td>
<td>否</td>
<td>可滚动组件的控制器。用于与可滚动组件进行绑定。说明：不允许和其它滚动类组件绑定同一个滚动控制对象。</td>
</tr>
</tbody></table>
<h4 id="List-属性"><a href="#List-属性" class="headerlink" title="List 属性"></a>List 属性</h4><table>
<thead>
<tr>
<th>名称</th>
<th>参数类型</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td>listDirection</td>
<td><span class="exturl" data-url="aHR0cHM6Ly9kZXZlbG9wZXIuaHVhd2VpLmNvbS9jb25zdW1lci9jbi9kb2MvaGFybW9ueW9zLXJlZmVyZW5jZXMtVjIvdHMtYXBwZW5kaXgtZW51bXMtMDAwMDAwMTQ3ODA2MTc0MS1WMiNaSC1DTl9UT1BJQ18wMDAwMDAxNTc0MjQ4Nzg5X19heGlz">Axis<i class="fa fa-external-link-alt"></i></span></td>
<td>设置 List 组件排列方向。默认值：Axis.Vertical。从 API version 9 开始，该接口支持在 ArkTS 卡片中使用。</td>
</tr>
<tr>
<td>divider</td>
<td>{ strokeWidth: Length;     color?: ResourceColor;     startMargin?: Length;     endMargin?: Length; } &#124; null</td>
<td>设置 ListItem 分割线样式，默认无分割线。- strokeWidth：分割线的线宽。- color：分割线的颜色。- startMargin：分割线与列表侧边起始端的距离。- endMargin：分割线与列表侧边结束端的距离。从 API version 9 开始，该接口支持在ArkTS卡片中使用。endMargin + startMargin 不能超过列宽度。startMargin 和 endMargin 不支持设置百分比。List 的分割线画在主轴方向两个子组件之间，第一个子组件上方和最后一个子组件下方不会绘制分割线。多列模式下，ListItem 与 ListItem 之间的分割线起始边距从每一列的交叉轴方向起始边开始计算，其它情况从 List 交叉轴方向起始边开始计算。</td>
</tr>
<tr>
<td>scrollBar</td>
<td><span class="exturl" data-url="aHR0cHM6Ly9kZXZlbG9wZXIuaHVhd2VpLmNvbS9jb25zdW1lci9jbi9kb2MvaGFybW9ueW9zLXJlZmVyZW5jZXMtVjIvdHMtYXBwZW5kaXgtZW51bXMtMDAwMDAwMTQ3ODA2MTc0MS1WMiNaSC1DTl9UT1BJQ18wMDAwMDAxNTc0MjQ4Nzg5X19iYXJzdGF0ZQ==">BarState<i class="fa fa-external-link-alt"></i></span></td>
<td>设置滚动条状态。默认值：BarState.Oﬀ 从 API version 9 开始，该接口支持在 ArkTS卡片中使用。</td>
</tr>
<tr>
<td>cachedCount</td>
<td>number</td>
<td>设置列表中 ListItem &#x2F; ListItemGroup 的预加载数量，其中 ListItemGroup 将作为一个整体进行计算，ListItemGroup 中的所有 ListItem 会一次性全部加载出来。具体使用可参考<span class="exturl" data-url="aHR0cHM6Ly9kZXZlbG9wZXIuaHVhd2VpLmNvbS9jb25zdW1lci9jbi9kb2MvaGFybW9ueW9zLWd1aWRlcy1WMi91aS10cy1wZXJmb3JtYW5jZS1pbXByb3ZlbWVudC1yZWNvbW1lbmRhdGlvbi0wMDAwMDAxNDc3OTgxMDAxLVYyI1pILUNOX1RPUElDXzAwMDAwMDE1MjM2NDg0MThfXyVFNSU4NyU4RiVFNSVCMCU5MSVFNSVCQSU5NCVFNyU5NCVBOCVFNiVCQiU5MSVFNSU4QSVBOCVFNyU5OSVCRCVFNSU5RCU5Nw==">减少应用白块说明<i class="fa fa-external-link-alt"></i></span>。默认值：1。从 API version 9 开始，该接口支持在 ArkTS 卡片中使用。说明：单列模式下，会在 List 显示的 ListItem 前后各缓存 cachedCount 个 ListItem。多列模式下，会在 List 显示的 ListItem 前后各缓存 cachedCount 个 ListItem。</td>
</tr>
<tr>
<td>editMode(deprecated)</td>
<td>boolean</td>
<td>声明当前 List 组件是否处于可编辑模式。可参考<span class="exturl" data-url="aHR0cHM6Ly9kZXZlbG9wZXIuaHVhd2VpLmNvbS9jb25zdW1lci9jbi9kb2MvaGFybW9ueW9zLXJlZmVyZW5jZXMtVjIvdHMtY29udGFpbmVyLWxpc3QtMDAwMDAwMTQ3Nzk4MTIxMy1WMiNzZWN0aW9uNTE1NDE4MTQxMDEyMTk=">示例 3<i class="fa fa-external-link-alt"></i></span> 实现删除选中的 list 项。从 API version9 开始废弃。默认值：false。</td>
</tr>
<tr>
<td>edgeEﬀect</td>
<td><span class="exturl" data-url="aHR0cHM6Ly9kZXZlbG9wZXIuaHVhd2VpLmNvbS9jb25zdW1lci9jbi9kb2MvaGFybW9ueW9zLXJlZmVyZW5jZXMtVjIvdHMtYXBwZW5kaXgtZW51bXMtMDAwMDAwMTQ3ODA2MTc0MS1WMiNaSC1DTl9UT1BJQ18wMDAwMDAxNTc0MjQ4Nzg5X19lZGdlZWZmZWN0">EdgeEﬀect<i class="fa fa-external-link-alt"></i></span></td>
<td>设置组件的滑动效果。默认值：EdgeEﬀect.Spring。从 API version 9 开始，该接口支持在 ArkTS 卡片中使用。</td>
</tr>
<tr>
<td>chainAnimation</td>
<td>boolean</td>
<td>设置当前 List 是否启用链式联动动效，开启后列表滑动以及顶部和底部拖拽时会有链式联动的效果。链式联动效果：List 内的 listitem 间隔一定距离，在基本的滑动交互行为下，主动对象驱动从动对象进行联动，驱动效果遵循弹簧物理动效。默认值：false。- false：不启用链式联动。- true：启用链式联动。从 API version 9 开始，该接口支持在 ArkTS 卡片中 使用。</td>
</tr>
<tr>
<td>multiSelectable8+</td>
<td>boolean</td>
<td>是否开启鼠标框选。默认值：false。- false：关闭框选。- true：开启框选。从 API version 9 开始，该接口支持在 ArkTS 卡片中使用。</td>
</tr>
<tr>
<td>lanes9+</td>
<td>number &#124; <span class="exturl" data-url="aHR0cHM6Ly9kZXZlbG9wZXIuaHVhd2VpLmNvbS9jb25zdW1lci9jbi9kb2MvaGFybW9ueW9zLXJlZmVyZW5jZXMtVjIvdHMtdHlwZXMtMDAwMDAwMTQ3Nzk4MTI0MS1WMiNaSC1DTl9UT1BJQ18wMDAwMDAxNTczOTI4ODg5X19sZW5ndGhjb25zdHJhaW4=">LengthConstrain<i class="fa fa-external-link-alt"></i></span></td>
<td>以列模式为例（listDirection 为 Axis.Vertical）：lanes 用于决定 List 组件在交叉轴方向按几列布局。默认值：1。规则如下：- lanes 为指定的数量时，根据指定的数量与 List 组件的交叉轴尺寸除以列数作为列的宽度。- lanes 设置了 {minLength，maxLength} 时， 根据 List 组件的宽度自适应决定 lanes 数量（即列数），保证缩放过程中 lane 的宽度符合 {minLength，maxLength} 的限制。其中，minLength 条件会被优先满足，即优先保证符合 ListItem 的交叉轴尺寸符合最小限制。- lanes 设置了 {minLength，maxLength}，如果父组件交叉轴方向尺寸约束为无穷大时，固定按一列排列，列宽度按显示区域内最大的 ListItem 计算。- ListItemGroup 在多列模式下也是独占一行，ListItemGroup 中的 ListItem 按照 List 组件的 lanes 属性设置值来布局。- lanes 设置了 {minLength，maxLength} 时，计算列数会按照 ListItemGroup 的交叉轴尺寸计算。当 ListItemGroup 交叉轴尺寸与 List 交叉轴尺寸不一致时，ListItemGroup 中的列数与 List 中的列数可能不一样。该接口支持在 ArkTS 卡片中使用。</td>
</tr>
<tr>
<td>alignListItem9+</td>
<td>ListItemAlign</td>
<td>List 交叉轴方向宽度大于 ListItem 交叉轴宽度 * lanes 时，ListItem 在 List 交叉轴方向的布局方式，默认为首部对齐。默认值：ListItemAlign.Start。该接口支持在 ArkTS 卡片中使用。</td>
</tr>
<tr>
<td>sticky9+</td>
<td>StickyStyle</td>
<td>配合 ListItemGroup 组件使用，设置 ListItemGroup 中 header 和 footer 是否要吸顶或吸底。默认值：StickyStyle.None。该接口支持在 ArkTS 卡片中使用。说明：sticky 属性可设置为 StickyStyle.Header &#124; StickyStyle.Footer 以同时支持 header 吸顶和 footer 吸底。</td>
</tr>
</tbody></table>
<h4 id="List-事件"><a href="#List-事件" class="headerlink" title="List 事件"></a>List 事件</h4><table>
<thead>
<tr>
<th>名称</th>
<th>功能描述</th>
</tr>
</thead>
<tbody><tr>
<td>onItemDelete(deprecated) (event: (index: number) &#x3D;&gt; boolean)</td>
<td>当 List 组件在编辑模式时，点击 ListItem 右边出现的删除按钮时触发。从 API version9 开始废弃。- index：被删除的列表项的索引值。</td>
</tr>
<tr>
<td>onScroll(event: (scrollOﬀset: number, scrollState: ScrollState) &#x3D;&gt; void)</td>
<td>列表滑动时触发。- scrollOﬀset：滑动偏移量。- scrollState：当前滑动状态。使用控制器调用 ScrollEdge 和 ScrollToIndex 时不会触发，其余情况有滚动就会触发该事件。从 API version 9 开始，该接口支持在 ArkTS 卡片中使用。</td>
</tr>
<tr>
<td>onScrollIndex(event: (start: number, end: number) &#x3D;&gt; void)</td>
<td>列表滑动时触发。计算索引值时，ListItemGroup 作为一个整体占一个索引值，不计算 ListItemGroup 内部 ListItem 的索引值。- start：滑动起始位置索引值。- end：滑动结束位置索引值。触发该事件的条件：列表初始化时会触发一次，List 显示区域内第一个子组件的索引值或后一个子组件的索引值有变化时会触发。List 的边缘效果为弹簧效果时，在 List 滑动到边缘继续滑动和松手回弹过程不会触发 onScrollIndex 事件。从 API version 9 开始，该接口支持在 ArkTS 卡片中使用。</td>
</tr>
<tr>
<td>onReachStart(event: () &#x3D;&gt; void)</td>
<td>列表到达起始位置时触发。从 API version 9 开始，该接口支持在 ArkTS 卡片中使用。说明：List 初始化时如果 initialIndex 为 0 会触发一次，List 滚动到起始位置时触发一次。List 边缘效果为弹簧效果时，滑动经过起始位置时触发一次，回弹回起始位置时再触发 一次。</td>
</tr>
<tr>
<td>onReachEnd(event: () &#x3D;&gt; void)</td>
<td>列表到达末尾位置时触发。从 API version 9 开始，该接口支持在 ArkTS 卡片中使用。说明：List 边缘效果为弹簧效果时，滑动经过末尾位置时触发一次，回弹回末尾位置时再触发一次。</td>
</tr>
<tr>
<td>onScrollFrameBegin9+ (event: (oﬀset: number, state: ScrollState) &#x3D;&gt; { oﬀsetRemain })</td>
<td>列表开始滑动时触发，事件参数传入即将发生的滑动量，事件处理函数中可根据应用场景计算实际需要的滑动量并作为事件处理函数的返回值返回，列表将按照返回值的实际滑动量进行滑动。- oﬀset：即将发生的滑动量，单位 vp。- state：当前滑动状态。- oﬀsetRemain：实际滑动量，单位 vp。触发该事件的条件：手指拖动 List、List 惯性滑动时每帧开始时触发；List 超出边缘回弹、 使用滚动控制器的滚动不会触发。该接口支持在 ArkTS 卡片中使用。说明：当 listDirection 的值为 Axis.Vertical 时，返回垂直方向滑动量，当 listDirection 的值为 Axis.Horizontal 时，返回水平方向滑动量。</td>
</tr>
<tr>
<td>onScrollStart9+(event: () &#x3D;&gt; void)</td>
<td>列表滑动开始时触发。手指拖动列表或列表的滚动条触发的滑动开始时，会触发该事件。使用 Scroller 滑动控制器触发的带动画的滑动，动画开始时会触发该事件。该接口支持在 ArkTS 卡片中使用。</td>
</tr>
<tr>
<td>onScrollStop(event: () &#x3D;&gt; void)</td>
<td>列表滑动停止时触发。手拖动列表或列表的滚动条触发的滑动，手离开屏幕并且滑动停止时会触发该事件；使用 Scroller 滑动控制器触发的带动画的滑动，动画停止会触发该事件。从 API version 9 开始，该接口支持在 ArkTS 卡片中使用。</td>
</tr>
<tr>
<td>onItemMove(event: (from: number, to: number) &#x3D;&gt; boolean)</td>
<td>列表元素发生移动时触发。- from：移动前索引值。- to：移动后索引值。</td>
</tr>
<tr>
<td>onItemDragStart(event: (event: ItemDragInfo, itemIndex: number) &#x3D;&gt; ((() &#x3D;&gt; any) &#124; void)</td>
<td>开始拖拽列表元素时触发。- event：见 ItemDragInfo 对象说明。- itemIndex：被拖拽列表元素索引值。</td>
</tr>
<tr>
<td>onItemDragEnter(event: (event: ItemDragInfo) &#x3D;&gt; void)</td>
<td>拖拽进入列表元素范围内时触发。- event：见 ItemDragInfo 对象说明。</td>
</tr>
<tr>
<td>onItemDragMove(event: (event: ItemDragInfo, itemIndex: number, insertIndex: number) &#x3D;&gt; void)</td>
<td>拖拽在列表元素范围内移动时触发。- event：见 ItemDragInfo 对象说明。- itemIndex：拖拽起始位置。- insertIndex：拖拽插入位置。</td>
</tr>
<tr>
<td>onItemDragLeave(event: (event: ItemDragInfo, itemIndex: number) &#x3D;&gt; void)</td>
<td>拖拽离开列表元素时触发。- event：见 ItemDragInfo 对象说明。- itemIndex：拖拽离开的列表元素索引值。</td>
</tr>
<tr>
<td>onItemDrop(event: (event: ItemDragInfo, itemIndex: number, insertIndex: number, isSuccess: boolean) &#x3D;&gt; void)</td>
<td>绑定该事件的列表元素可作为拖拽释放目标，当在列表元素内停止拖拽时触发。- event：见 ItemDragInfo 对象说明。- itemIndex：拖拽起始位置。- insertIndex：拖拽插入位置。- isSuccess：是否成功释放。说明：跨 List 拖拽时，当拖拽释放的位置绑定了 onItemDrop 时会返回 true，否则为 false。List 内部拖拽时，isSuccess 为 onItemMove 事件的返回值。</td>
</tr>
</tbody></table>
<h4 id="List-普通垂直列表"><a href="#List-普通垂直列表" class="headerlink" title="List 普通垂直列表"></a>List 普通垂直列表</h4><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Entry</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line">struct <span class="title class_">Index</span> &#123;</span><br><span class="line">  <span class="keyword">private</span> <span class="attr">arr</span>: <span class="built_in">number</span>[] = [<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>]</span><br><span class="line"></span><br><span class="line">  <span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">Column</span>() &#123;</span><br><span class="line">      <span class="title class_">List</span>(&#123; <span class="attr">space</span>: <span class="number">10</span>, <span class="attr">initialIndex</span>: <span class="number">0</span> &#125;) &#123;</span><br><span class="line">        <span class="title class_">ForEach</span>(<span class="variable language_">this</span>.<span class="property">arr</span>, <span class="function">(<span class="params">item: <span class="built_in">number</span></span>) =&gt;</span> &#123;</span><br><span class="line">          <span class="title class_">ListItem</span>() &#123;</span><br><span class="line">            <span class="title class_">Text</span>(item.<span class="title function_">toString</span>())</span><br><span class="line">              .<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">              .<span class="title function_">height</span>(<span class="number">100</span>)</span><br><span class="line">              .<span class="title function_">fontSize</span>(<span class="number">24</span>)</span><br><span class="line">              .<span class="title function_">textAlign</span>(<span class="title class_">TextAlign</span>.<span class="property">Center</span>)</span><br><span class="line">              .<span class="title function_">borderRadius</span>(<span class="number">10</span>)</span><br><span class="line">              .<span class="title function_">backgroundColor</span>(<span class="number">0xFFFFFF</span>)</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;, <span class="function">(<span class="params">item: <span class="built_in">number</span></span>) =&gt;</span> item.<span class="title function_">toString</span>())</span><br><span class="line">      &#125;</span><br><span class="line">      .<span class="title function_">listDirection</span>(<span class="title class_">Axis</span>.<span class="property">Vertical</span>) <span class="comment">// 排列方向</span></span><br><span class="line">      .<span class="title function_">divider</span>(&#123; <span class="attr">strokeWidth</span>: <span class="number">2</span>, <span class="attr">color</span>: <span class="number">0xFF0000</span>, <span class="attr">startMargin</span>: <span class="number">20</span>, <span class="attr">endMargin</span>: <span class="number">20</span> &#125;) <span class="comment">// 每行之间的分界线</span></span><br><span class="line">      .<span class="title function_">edgeEffect</span>(<span class="title class_">EdgeEffect</span>.<span class="property">None</span>) <span class="comment">// 滑动到边缘无效果</span></span><br><span class="line">      .<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">      .<span class="title function_">height</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">      .<span class="title function_">padding</span>(<span class="number">10</span>)</span><br><span class="line">    &#125;.<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>).<span class="title function_">height</span>(<span class="string">&#x27;100%&#x27;</span>).<span class="title function_">backgroundColor</span>(<span class="title class_">Color</span>.<span class="property">Gray</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="List-微信用户中心布局"><a href="#List-微信用户中心布局" class="headerlink" title="List 微信用户中心布局"></a>List 微信用户中心布局</h4><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> <span class="title class_">UserListInterface</span> &#123;</span><br><span class="line">  <span class="attr">title</span>: <span class="built_in">string</span>,</span><br><span class="line">  <span class="attr">img</span>: <span class="built_in">string</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Entry</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line">struct <span class="title class_">Index</span> &#123;</span><br><span class="line">  <span class="meta">@State</span> <span class="attr">list</span>: <span class="title class_">UserListInterface</span>[] = [</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">title</span>: <span class="string">&quot;服务&quot;</span>,</span><br><span class="line">      <span class="attr">img</span>: <span class="string">&quot;https://gitee.com/zch0304/images/raw/master/note/userlist/01.jpg&quot;</span></span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">title</span>: <span class="string">&quot;收藏&quot;</span>,</span><br><span class="line">      <span class="attr">img</span>: <span class="string">&quot;https://gitee.com/zch0304/images/raw/master/note/userlist/02.jpg&quot;</span></span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">title</span>: <span class="string">&quot;朋友圈&quot;</span>,</span><br><span class="line">      <span class="attr">img</span>: <span class="string">&quot;https://gitee.com/zch0304/images/raw/master/note/userlist/03.jpg&quot;</span></span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">title</span>: <span class="string">&quot;视频号&quot;</span>,</span><br><span class="line">      <span class="attr">img</span>: <span class="string">&quot;https://gitee.com/zch0304/images/raw/master/note/userlist/04.jpg&quot;</span></span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">title</span>: <span class="string">&quot;卡包&quot;</span>,</span><br><span class="line">      <span class="attr">img</span>: <span class="string">&quot;https://gitee.com/zch0304/images/raw/master/note/userlist/05.jpg&quot;</span></span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">title</span>: <span class="string">&quot;表情&quot;</span>,</span><br><span class="line">      <span class="attr">img</span>: <span class="string">&quot;https://gitee.com/zch0304/images/raw/master/note/userlist/06.jpg&quot;</span></span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">title</span>: <span class="string">&quot;设置&quot;</span>,</span><br><span class="line">      <span class="attr">img</span>: <span class="string">&quot;https://gitee.com/zch0304/images/raw/master/note/userlist/07.jpg&quot;</span></span><br><span class="line">    &#125;</span><br><span class="line">  ]</span><br><span class="line"></span><br><span class="line">  <span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">Column</span>() &#123;</span><br><span class="line">      <span class="title class_">List</span>(&#123; <span class="attr">space</span>: <span class="number">10</span>, <span class="attr">initialIndex</span>: <span class="number">0</span> &#125;) &#123;</span><br><span class="line">        <span class="title class_">ListItem</span>() &#123;</span><br><span class="line">          <span class="title class_">RelativeContainer</span>() &#123;</span><br><span class="line">            <span class="title class_">Image</span>(<span class="string">&quot;https://gitee.com/zch0304/images/raw/master/note/test_icon4.jpg&quot;</span>)</span><br><span class="line">              .<span class="title function_">id</span>(<span class="string">&#x27;avatar&#x27;</span>)</span><br><span class="line">              .<span class="title function_">width</span>(<span class="number">80</span>)</span><br><span class="line">              .<span class="title function_">height</span>(<span class="number">80</span>)</span><br><span class="line">              .<span class="title function_">objectFit</span>(<span class="title class_">ImageFit</span>.<span class="property">Fill</span>)</span><br><span class="line">              .<span class="title function_">alignRules</span>(&#123;</span><br><span class="line">                <span class="attr">left</span>: &#123; <span class="attr">anchor</span>: <span class="string">&#x27;__container__&#x27;</span>, <span class="attr">align</span>: <span class="title class_">HorizontalAlign</span>.<span class="property">Start</span> &#125;,</span><br><span class="line">                <span class="attr">top</span>: &#123; <span class="attr">anchor</span>: <span class="string">&#x27;__container__&#x27;</span>, <span class="attr">align</span>: <span class="title class_">VerticalAlign</span>.<span class="property">Top</span> &#125;</span><br><span class="line">              &#125;)</span><br><span class="line">              .<span class="title function_">margin</span>(&#123; <span class="attr">left</span>: <span class="number">20</span>, <span class="attr">top</span>: <span class="number">30</span> &#125;)</span><br><span class="line"></span><br><span class="line">            <span class="title class_">Text</span>(<span class="string">&quot;明年今日&quot;</span>)</span><br><span class="line">              .<span class="title function_">id</span>(<span class="string">&#x27;name&#x27;</span>)</span><br><span class="line">              .<span class="title function_">fontSize</span>(<span class="number">18</span>)</span><br><span class="line">              .<span class="title function_">alignRules</span>(&#123;</span><br><span class="line">                <span class="attr">left</span>: &#123; <span class="attr">anchor</span>: <span class="string">&#x27;avatar&#x27;</span>, <span class="attr">align</span>: <span class="title class_">HorizontalAlign</span>.<span class="property">End</span> &#125;,</span><br><span class="line">                <span class="attr">top</span>: &#123; <span class="attr">anchor</span>: <span class="string">&#x27;avatar&#x27;</span>, <span class="attr">align</span>: <span class="title class_">VerticalAlign</span>.<span class="property">Top</span> &#125;</span><br><span class="line">              &#125;)</span><br><span class="line">              .<span class="title function_">margin</span>(&#123; <span class="attr">left</span>: <span class="number">10</span> &#125;)</span><br><span class="line"></span><br><span class="line">            <span class="title class_">Text</span>(<span class="string">&quot;微信号：zhich&quot;</span>)</span><br><span class="line">              .<span class="title function_">id</span>(<span class="string">&#x27;account&#x27;</span>)</span><br><span class="line">              .<span class="title function_">fontSize</span>(<span class="number">14</span>)</span><br><span class="line">              .<span class="title function_">alignRules</span>(&#123;</span><br><span class="line">                <span class="attr">left</span>: &#123; <span class="attr">anchor</span>: <span class="string">&#x27;avatar&#x27;</span>, <span class="attr">align</span>: <span class="title class_">HorizontalAlign</span>.<span class="property">End</span> &#125;,</span><br><span class="line">                <span class="attr">bottom</span>: &#123; <span class="attr">anchor</span>: <span class="string">&#x27;avatar&#x27;</span>, <span class="attr">align</span>: <span class="title class_">VerticalAlign</span>.<span class="property">Bottom</span> &#125;</span><br><span class="line">              &#125;)</span><br><span class="line">              .<span class="title function_">margin</span>(&#123; <span class="attr">left</span>: <span class="number">10</span> &#125;)</span><br><span class="line">          &#125;.<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>).<span class="title function_">height</span>(<span class="string">&#x27;200vp&#x27;</span>).<span class="title function_">backgroundColor</span>(<span class="title class_">Color</span>.<span class="property">White</span>)</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="title class_">ListItem</span>() &#123;</span><br><span class="line">          <span class="title class_">CustomItem</span>(&#123; <span class="attr">model</span>: <span class="variable language_">this</span>.<span class="property">list</span>[<span class="number">0</span>] &#125;)</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="title class_">ListItem</span>() &#123;</span><br><span class="line">          <span class="title class_">Column</span>() &#123;</span><br><span class="line">            <span class="title class_">ForEach</span>(<span class="variable language_">this</span>.<span class="property">list</span>, <span class="function">(<span class="params">item: UserListInterface, key</span>) =&gt;</span> &#123;</span><br><span class="line">              <span class="keyword">if</span> (key &gt; <span class="number">0</span> &amp;&amp; key &lt; <span class="variable language_">this</span>.<span class="property">list</span>.<span class="property">length</span> - <span class="number">1</span>) &#123;</span><br><span class="line">                <span class="title class_">CustomItem</span>(&#123; <span class="attr">model</span>: item &#125;)</span><br><span class="line">                <span class="title class_">Divider</span>()</span><br><span class="line">                  .<span class="title function_">strokeWidth</span>(<span class="number">1</span>)</span><br><span class="line">                  .<span class="title function_">color</span>(<span class="string">&quot;#eee&quot;</span>)</span><br><span class="line">                  .<span class="title function_">padding</span>(&#123; <span class="attr">left</span>: <span class="number">20</span>, <span class="attr">right</span>: <span class="number">20</span> &#125;)</span><br><span class="line">              &#125;</span><br><span class="line">            &#125;, <span class="function">(<span class="params">item: UserListInterface</span>) =&gt;</span> item.<span class="property">img</span>)</span><br><span class="line">          &#125;.<span class="title function_">backgroundColor</span>(<span class="title class_">Color</span>.<span class="property">White</span>)</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="title class_">ListItem</span>() &#123;</span><br><span class="line">          <span class="title class_">CustomItem</span>(&#123; <span class="attr">model</span>: <span class="variable language_">this</span>.<span class="property">list</span>[<span class="variable language_">this</span>.<span class="property">list</span>.<span class="property">length</span>-<span class="number">1</span>] &#125;)</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">      &#125;</span><br><span class="line">      .<span class="title function_">edgeEffect</span>(<span class="title class_">EdgeEffect</span>.<span class="property">Spring</span>)</span><br><span class="line">      .<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">      .<span class="title function_">height</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">    &#125;.<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>).<span class="title function_">height</span>(<span class="string">&#x27;100%&#x27;</span>).<span class="title function_">backgroundColor</span>(<span class="number">0xeeeeee</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line">struct <span class="title class_">CustomItem</span> &#123;</span><br><span class="line">  <span class="attr">model</span>: <span class="title class_">UserListInterface</span> = &#123; <span class="attr">title</span>: <span class="string">&quot;&quot;</span>, <span class="attr">img</span>: <span class="string">&quot;&quot;</span> &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">Row</span>() &#123;</span><br><span class="line">      <span class="title class_">Row</span>() &#123;</span><br><span class="line">        <span class="title class_">Image</span>(<span class="variable language_">this</span>.<span class="property">model</span>.<span class="property">img</span>)</span><br><span class="line">          .<span class="title function_">width</span>(<span class="number">28</span>)</span><br><span class="line">          .<span class="title function_">height</span>(<span class="number">28</span>)</span><br><span class="line">          .<span class="title function_">objectFit</span>(<span class="title class_">ImageFit</span>.<span class="property">Cover</span>)</span><br><span class="line">        <span class="title class_">Text</span>(<span class="string">`<span class="subst">$&#123;<span class="variable language_">this</span>.model.title&#125;</span>`</span>).<span class="title function_">fontSize</span>(<span class="number">16</span>)</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      <span class="title class_">Image</span>(<span class="string">&quot;https://gitee.com/zch0304/images/raw/master/note/userlist/arrow_forward.jpg&quot;</span>)</span><br><span class="line">        .<span class="title function_">width</span>(<span class="number">28</span>)</span><br><span class="line">        .<span class="title function_">height</span>(<span class="number">28</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    .<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">    .<span class="title function_">backgroundColor</span>(<span class="title class_">Color</span>.<span class="property">White</span>)</span><br><span class="line">    .<span class="title function_">padding</span>(<span class="number">10</span>)</span><br><span class="line">    .<span class="title function_">justifyContent</span>(<span class="title class_">FlexAlign</span>.<span class="property">SpaceBetween</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<img data-src="https://gitee.com/zch0304/images/raw/master/note/1718296042527.jpg" style="zoom: 50%;" /> 

<h4 id="List-文章列表布局"><a href="#List-文章列表布局" class="headerlink" title="List 文章列表布局"></a>List 文章列表布局</h4><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">class</span> <span class="title class_">Article</span> &#123;</span><br><span class="line">  <span class="attr">key</span>: <span class="built_in">string</span>;</span><br><span class="line">  <span class="attr">title</span>: <span class="built_in">string</span>;</span><br><span class="line">  <span class="attr">img</span>: <span class="built_in">string</span>;</span><br><span class="line">  <span class="attr">author</span>: <span class="built_in">string</span>;</span><br><span class="line">  <span class="attr">date</span>: <span class="built_in">string</span>;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params">key: <span class="built_in">string</span>, title: <span class="built_in">string</span>, img: <span class="built_in">string</span>, author: <span class="built_in">string</span>, date: <span class="built_in">string</span></span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">key</span> = key;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">title</span> = title;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">img</span> = img;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">author</span> = author;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">date</span> = date;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">Article</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;../model/Article&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="meta">@Entry</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line">struct <span class="title class_">Index</span> &#123;</span><br><span class="line">  <span class="meta">@State</span> <span class="attr">articleList</span>: <span class="title class_">Array</span>&lt;<span class="title class_">Article</span>&gt; = [</span><br><span class="line">    <span class="keyword">new</span> <span class="title class_">Article</span>(</span><br><span class="line">      <span class="string">&#x27;1&#x27;</span>,</span><br><span class="line">      <span class="string">&#x27;新手攻略|开启关怀模式，与家人更亲近~&#x27;</span>,</span><br><span class="line">      <span class="string">&#x27;https://gitee.com/zch0304/images/raw/master/note/article/01.png&#x27;</span>,</span><br><span class="line">      <span class="string">&#x27;国家电网&#x27;</span>,</span><br><span class="line">      <span class="string">&#x27;2024-12-2&#x27;</span></span><br><span class="line">    ),</span><br><span class="line">    <span class="keyword">new</span> <span class="title class_">Article</span>(</span><br><span class="line">      <span class="string">&#x27;2&#x27;</span>,</span><br><span class="line">      <span class="string">&#x27;反诈课堂|光伏骗局套路多听我给您细细说!&#x27;</span>,</span><br><span class="line">      <span class="string">&#x27;https://gitee.com/zch0304/images/raw/master/note/article/02.png&#x27;</span>,</span><br><span class="line">      <span class="string">&#x27;国家电网&#x27;</span>,</span><br><span class="line">      <span class="string">&#x27;2024-4-2&#x27;</span></span><br><span class="line">    ),</span><br><span class="line">    <span class="keyword">new</span> <span class="title class_">Article</span>(</span><br><span class="line">      <span class="string">&#x27;3&#x27;</span>,</span><br><span class="line">      <span class="string">&#x27;新手攻略| 联合办、网上办一次办，这些地方的用户注&#x27;</span>,</span><br><span class="line">      <span class="string">&#x27;https://gitee.com/zch0304/images/raw/master/note/article/03.png&#x27;</span>,</span><br><span class="line">      <span class="string">&#x27;国家电网&#x27;</span>,</span><br><span class="line">      <span class="string">&#x27;2024-1-12&#x27;</span></span><br><span class="line">    ),</span><br><span class="line">    <span class="keyword">new</span> <span class="title class_">Article</span>(</span><br><span class="line">      <span class="string">&#x27;4&#x27;</span>,</span><br><span class="line">      <span class="string">&#x27;新手攻略|轻轻一点，电费一键查询&#x27;</span>,</span><br><span class="line">      <span class="string">&#x27;https://gitee.com/zch0304/images/raw/master/note/article/04.png&#x27;</span>,</span><br><span class="line">      <span class="string">&#x27;国家电网&#x27;</span>,</span><br><span class="line">      <span class="string">&#x27;2024-12-2&#x27;</span></span><br><span class="line">    ),</span><br><span class="line">    <span class="keyword">new</span> <span class="title class_">Article</span>(</span><br><span class="line">      <span class="string">&#x27;5&#x27;</span>,</span><br><span class="line">      <span class="string">&#x27;关注|局地降温超16C!寒潮天气来袭，注意防寒保暖!&#x27;</span>,</span><br><span class="line">      <span class="string">&#x27;https://gitee.com/zch0304/images/raw/master/note/article/05.png&#x27;</span>,</span><br><span class="line">      <span class="string">&#x27;国家电网&#x27;</span>,</span><br><span class="line">      <span class="string">&#x27;2024-2-6&#x27;</span></span><br><span class="line">    ),</span><br><span class="line">  ]</span><br><span class="line"></span><br><span class="line">  <span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">Column</span>() &#123;</span><br><span class="line">      <span class="title class_">List</span>() &#123;</span><br><span class="line">        <span class="title class_">ForEach</span>(<span class="variable language_">this</span>.<span class="property">articleList</span>, <span class="function">(<span class="params">item: Article</span>) =&gt;</span> &#123;</span><br><span class="line">          <span class="title class_">ListItem</span>() &#123;</span><br><span class="line">            <span class="title class_">Row</span>() &#123;</span><br><span class="line">              <span class="title class_">Column</span>() &#123;</span><br><span class="line">                <span class="title class_">Text</span>(item.<span class="property">title</span>).<span class="title function_">fontSize</span>(<span class="number">16</span>).<span class="title function_">fontWeight</span>(<span class="title class_">FontWeight</span>.<span class="property">Bold</span>)</span><br><span class="line">                <span class="title class_">Text</span>(<span class="string">`<span class="subst">$&#123;item.author&#125;</span>  <span class="subst">$&#123;item.date&#125;</span>`</span>).<span class="title function_">fontSize</span>(<span class="number">14</span>)</span><br><span class="line">              &#125;</span><br><span class="line">              .<span class="title function_">layoutWeight</span>(<span class="number">1</span>)</span><br><span class="line">              .<span class="title function_">height</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">              .<span class="title function_">justifyContent</span>(<span class="title class_">FlexAlign</span>.<span class="property">SpaceBetween</span>)</span><br><span class="line">              .<span class="title function_">alignItems</span>(<span class="title class_">HorizontalAlign</span>.<span class="property">Start</span>)</span><br><span class="line"></span><br><span class="line">              <span class="title class_">Image</span>(item.<span class="property">img</span>).<span class="title function_">width</span>(<span class="number">100</span>).<span class="title function_">height</span>(<span class="number">68</span>).<span class="title function_">margin</span>(&#123; <span class="attr">left</span>: <span class="number">5</span> &#125;).<span class="title function_">borderRadius</span>(<span class="number">10</span>)</span><br><span class="line">            &#125;.<span class="title function_">height</span>(<span class="number">80</span>).<span class="title function_">alignItems</span>(<span class="title class_">VerticalAlign</span>.<span class="property">Center</span>).<span class="title function_">padding</span>(&#123; <span class="attr">bottom</span>: <span class="number">10</span>, <span class="attr">top</span>: <span class="number">10</span> &#125;)</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;, <span class="function">(<span class="params">item: Article</span>) =&gt;</span> item.<span class="property">key</span>)</span><br><span class="line">      &#125;</span><br><span class="line">      .<span class="title function_">margin</span>(<span class="number">10</span>)</span><br><span class="line">      .<span class="title function_">padding</span>(<span class="number">10</span>)</span><br><span class="line">      .<span class="title function_">backgroundColor</span>(<span class="string">&#x27;#fff&#x27;</span>)</span><br><span class="line">      .<span class="title function_">divider</span>(&#123; <span class="attr">strokeWidth</span>: <span class="number">1</span>, <span class="attr">color</span>: <span class="string">&#x27;#eee&#x27;</span> &#125;)</span><br><span class="line">    &#125;.<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>).<span class="title function_">height</span>(<span class="string">&#x27;100%&#x27;</span>).<span class="title function_">backgroundColor</span>(<span class="string">&#x27;#eee&#x27;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<img data-src="https://gitee.com/zch0304/images/raw/master/note/1718376141035.jpg" style="zoom: 60%;" /> 

<h4 id="List-水平滑动列表"><a href="#List-水平滑动列表" class="headerlink" title="List 水平滑动列表"></a>List 水平滑动列表</h4><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">class</span> <span class="title class_">ListItemModel</span> &#123;</span><br><span class="line">  <span class="attr">key</span>: <span class="built_in">string</span>;</span><br><span class="line">  <span class="attr">title</span>: <span class="built_in">string</span>;</span><br><span class="line">  <span class="attr">img</span>: <span class="built_in">string</span></span><br><span class="line"></span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params">key: <span class="built_in">string</span>, title: <span class="built_in">string</span>, img: <span class="built_in">string</span></span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">key</span> = key;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">title</span> = title;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">img</span> = img;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">ListItemModel</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;../model/ListItemModel&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="meta">@Entry</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line">struct <span class="title class_">Index</span> &#123;</span><br><span class="line">  <span class="meta">@State</span> <span class="attr">list</span>: <span class="title class_">Array</span>&lt;<span class="title class_">ListItemModel</span>&gt; = [</span><br><span class="line">    <span class="keyword">new</span> <span class="title class_">ListItemModel</span>(</span><br><span class="line">      <span class="string">&#x27;1&#x27;</span>,</span><br><span class="line">      <span class="string">&#x27;关怀模式&#x27;</span>,</span><br><span class="line">      <span class="string">&#x27;https://gitee.com/zch0304/images/raw/master/note/article/01.png&#x27;</span></span><br><span class="line">    ),</span><br><span class="line">    <span class="keyword">new</span> <span class="title class_">ListItemModel</span>(</span><br><span class="line">      <span class="string">&#x27;2&#x27;</span>,</span><br><span class="line">      <span class="string">&#x27;光伏骗局套&#x27;</span>,</span><br><span class="line">      <span class="string">&#x27;https://gitee.com/zch0304/images/raw/master/note/article/02.png&#x27;</span></span><br><span class="line">    ),</span><br><span class="line">    <span class="keyword">new</span> <span class="title class_">ListItemModel</span>(</span><br><span class="line">      <span class="string">&#x27;3&#x27;</span>,</span><br><span class="line">      <span class="string">&#x27;网办小助手&#x27;</span>,</span><br><span class="line">      <span class="string">&#x27;https://gitee.com/zch0304/images/raw/master/note/article/03.png&#x27;</span></span><br><span class="line">    ),</span><br><span class="line">    <span class="keyword">new</span> <span class="title class_">ListItemModel</span>(</span><br><span class="line">      <span class="string">&#x27;4&#x27;</span>,</span><br><span class="line">      <span class="string">&#x27;电费一键查询&#x27;</span>,</span><br><span class="line">      <span class="string">&#x27;https://gitee.com/zch0304/images/raw/master/note/article/04.png&#x27;</span></span><br><span class="line">    )</span><br><span class="line">  ]</span><br><span class="line"></span><br><span class="line">  <span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">Column</span>() &#123;</span><br><span class="line">      <span class="title class_">List</span>(&#123; <span class="attr">space</span>: <span class="number">10</span> &#125;) &#123;</span><br><span class="line">        <span class="title class_">ForEach</span>(<span class="variable language_">this</span>.<span class="property">list</span>, <span class="function">(<span class="params">item: ListItemModel</span>) =&gt;</span> &#123;</span><br><span class="line">          <span class="title class_">ListItem</span>() &#123;</span><br><span class="line">            <span class="title class_">Column</span>() &#123;</span><br><span class="line">              <span class="title class_">Image</span>(item.<span class="property">img</span>).<span class="title function_">width</span>(<span class="number">100</span>).<span class="title function_">height</span>(<span class="number">68</span>).<span class="title function_">margin</span>(&#123; <span class="attr">top</span>: <span class="number">10</span> &#125;).<span class="title function_">borderRadius</span>(<span class="number">10</span>)</span><br><span class="line">              <span class="title class_">Text</span>(item.<span class="property">title</span>).<span class="title function_">fontSize</span>(<span class="number">16</span>).<span class="title function_">margin</span>(&#123; <span class="attr">top</span>: <span class="number">10</span> &#125;)</span><br><span class="line">            &#125;</span><br><span class="line">            .<span class="title function_">width</span>(<span class="number">100</span>)</span><br><span class="line">            .<span class="title function_">height</span>(<span class="number">110</span>)</span><br><span class="line">            .<span class="title function_">alignItems</span>(<span class="title class_">HorizontalAlign</span>.<span class="property">Center</span>)</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;, <span class="function">(<span class="params">item: ListItemModel</span>) =&gt;</span> item.<span class="property">key</span>)</span><br><span class="line">      &#125;</span><br><span class="line">      .<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">      .<span class="title function_">height</span>(<span class="number">120</span>)</span><br><span class="line">      .<span class="title function_">padding</span>(&#123; <span class="attr">left</span>: <span class="number">10</span>, <span class="attr">right</span>: <span class="number">10</span> &#125;)</span><br><span class="line">      .<span class="title function_">listDirection</span>(<span class="title class_">Axis</span>.<span class="property">Horizontal</span>)</span><br><span class="line">      .<span class="title function_">alignListItem</span>(<span class="title class_">ListItemAlign</span>.<span class="property">Center</span>)</span><br><span class="line">      .<span class="title function_">border</span>(&#123; <span class="attr">width</span>: <span class="number">1</span>, <span class="attr">color</span>: <span class="string">&#x27;#ccc&#x27;</span> &#125;)</span><br><span class="line">    &#125;.<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>).<span class="title function_">height</span>(<span class="string">&#x27;100%&#x27;</span>).<span class="title function_">backgroundColor</span>(<span class="string">&#x27;#eee&#x27;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img data-src="https://gitee.com/zch0304/images/raw/master/note/1718381624325.jpg"> </p>
<h4 id="list-Scroller-控制滚动位置"><a href="#list-Scroller-控制滚动位置" class="headerlink" title="list Scroller 控制滚动位置"></a>list Scroller 控制滚动位置</h4><p>List 组件初始化时，可以通过 scroller 参数绑定一个 Scroller 对象，进行列表的滚动控制。通过 Scroller 对象的 scrollToIndex 方法使列表滚动到指定的列表项索引位置。如实现列表返回顶部，可以设置 scrollToIndex 为 0。</p>
<figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Entry</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line">struct <span class="title class_">Index</span> &#123;</span><br><span class="line">  <span class="meta">@State</span> <span class="attr">list</span>: <span class="built_in">number</span>[] = []</span><br><span class="line">  <span class="keyword">private</span> <span class="attr">listScroller</span>: <span class="title class_">Scroller</span> = <span class="keyword">new</span> <span class="title class_">Scroller</span>()</span><br><span class="line"></span><br><span class="line">  <span class="title function_">onPageShow</span>(): <span class="built_in">void</span> &#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++) &#123;</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">list</span>.<span class="title function_">push</span>(i)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">Column</span>() &#123;</span><br><span class="line">      <span class="title class_">Stack</span>(&#123; <span class="attr">alignContent</span>: <span class="title class_">Alignment</span>.<span class="property">BottomEnd</span> &#125;) &#123;</span><br><span class="line">        <span class="title class_">List</span>(&#123; <span class="attr">space</span>: <span class="number">20</span>, <span class="attr">scroller</span>: <span class="variable language_">this</span>.<span class="property">listScroller</span> &#125;) &#123;</span><br><span class="line">          <span class="title class_">ForEach</span>(<span class="variable language_">this</span>.<span class="property">list</span>, <span class="function">(<span class="params">item: <span class="built_in">number</span></span>) =&gt;</span> &#123;</span><br><span class="line">            <span class="title class_">ListItem</span>() &#123;</span><br><span class="line">              <span class="title class_">Text</span>(<span class="string">`<span class="subst">$&#123;item&#125;</span>`</span>)</span><br><span class="line">                .<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">                .<span class="title function_">height</span>(<span class="number">160</span>)</span><br><span class="line">                .<span class="title function_">fontSize</span>(<span class="number">28</span>)</span><br><span class="line">                .<span class="title function_">textAlign</span>(<span class="title class_">TextAlign</span>.<span class="property">Center</span>)</span><br><span class="line">                .<span class="title function_">backgroundColor</span>(<span class="string">&#x27;#fff&#x27;</span>)</span><br><span class="line">                .<span class="title function_">borderRadius</span>(<span class="number">20</span>)</span><br><span class="line">            &#125;</span><br><span class="line">          &#125;, <span class="function">(<span class="params">item: <span class="built_in">number</span></span>) =&gt;</span> item.<span class="title function_">toString</span>())</span><br><span class="line">        &#125;.<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>).<span class="title function_">height</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line"></span><br><span class="line">        <span class="title class_">Button</span>() &#123;</span><br><span class="line">          <span class="title class_">Image</span>(<span class="string">&#x27;https://gitee.com/zch0304/images/raw/master/note/article/arrow_top.png&#x27;</span>)</span><br><span class="line">            .<span class="title function_">width</span>(<span class="number">30</span>)</span><br><span class="line">            .<span class="title function_">height</span>(<span class="number">30</span>)</span><br><span class="line">        &#125;</span><br><span class="line">        .<span class="title function_">width</span>(<span class="number">80</span>)</span><br><span class="line">        .<span class="title function_">height</span>(<span class="number">80</span>)</span><br><span class="line">        .<span class="title function_">margin</span>(&#123; <span class="attr">bottom</span>: <span class="number">10</span> &#125;)</span><br><span class="line">        .<span class="title function_">backgroundColor</span>(<span class="string">&#x27;#ccc&#x27;</span>)</span><br><span class="line">        .<span class="title function_">onClick</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">listScroller</span>.<span class="title function_">scrollToIndex</span>(<span class="number">0</span>)</span><br><span class="line">        &#125;)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;.<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>).<span class="title function_">height</span>(<span class="string">&#x27;100%&#x27;</span>).<span class="title function_">backgroundColor</span>(<span class="string">&#x27;#eee&#x27;</span>).<span class="title function_">padding</span>(<span class="number">12</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<img data-src="https://gitee.com/zch0304/images/raw/master/note/1718717571904.jpg" style="zoom:50%;" /> 

<h4 id="ListItem-的-swipeAction-响应列表项侧滑"><a href="#ListItem-的-swipeAction-响应列表项侧滑" class="headerlink" title="ListItem 的 swipeAction 响应列表项侧滑"></a>ListItem 的 swipeAction 响应列表项侧滑</h4><p>侧滑菜单在许多应用中都很常见。例如，通讯类应用通常会给消息列表提供侧滑删除功能，即用户可以通过向左侧滑列表的某一项，再点击删除按钮删除消息。</p>
<figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> <span class="title class_">SwipeInterface</span> &#123;</span><br><span class="line">  <span class="attr">username</span>: <span class="built_in">string</span>,</span><br><span class="line">  <span class="attr">info</span>: <span class="built_in">string</span>,</span><br><span class="line">  <span class="attr">date</span>: <span class="built_in">string</span>,</span><br><span class="line">  <span class="attr">icon</span>: <span class="built_in">string</span>,</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Entry</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line">struct <span class="title class_">Index</span> &#123;</span><br><span class="line">  <span class="meta">@State</span> <span class="attr">list</span>: <span class="title class_">SwipeInterface</span>[] = [</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">username</span>: <span class="string">&quot;小明&quot;</span>,</span><br><span class="line">      <span class="attr">info</span>: <span class="string">&quot;吃饭了吗&quot;</span>,</span><br><span class="line">      <span class="attr">date</span>: <span class="string">&quot;10-23&quot;</span>,</span><br><span class="line">      <span class="attr">icon</span>: <span class="string">&quot;https://gitee.com/zch0304/images/raw/master/note/test_icon1.jpg&quot;</span></span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">username</span>: <span class="string">&quot;中明&quot;</span>,</span><br><span class="line">      <span class="attr">info</span>: <span class="string">&quot;你在哪里&quot;</span>,</span><br><span class="line">      <span class="attr">date</span>: <span class="string">&quot;10-22&quot;</span>,</span><br><span class="line">      <span class="attr">icon</span>: <span class="string">&quot;https://gitee.com/zch0304/images/raw/master/note/test_icon2.jpg&quot;</span></span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">username</span>: <span class="string">&quot;大明&quot;</span>,</span><br><span class="line">      <span class="attr">info</span>: <span class="string">&quot;现在出发&quot;</span>,</span><br><span class="line">      <span class="attr">date</span>: <span class="string">&quot;10-22&quot;</span>,</span><br><span class="line">      <span class="attr">icon</span>: <span class="string">&quot;https://gitee.com/zch0304/images/raw/master/note/test_icon3.jpg&quot;</span></span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">username</span>: <span class="string">&quot;明明&quot;</span>,</span><br><span class="line">      <span class="attr">info</span>: <span class="string">&quot;哈哈哈&quot;</span>,</span><br><span class="line">      <span class="attr">date</span>: <span class="string">&quot;10-21&quot;</span>,</span><br><span class="line">      <span class="attr">icon</span>: <span class="string">&quot;https://gitee.com/zch0304/images/raw/master/note/test_icon4.jpg&quot;</span></span><br><span class="line">    &#125;,</span><br><span class="line">  ]</span><br><span class="line"></span><br><span class="line">  <span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">Column</span>() &#123;</span><br><span class="line">      <span class="title class_">List</span>(&#123; <span class="attr">space</span>: <span class="number">20</span> &#125;) &#123;</span><br><span class="line">        <span class="title class_">ForEach</span>(<span class="variable language_">this</span>.<span class="property">list</span>, <span class="function">(<span class="params">item: SwipeInterface, key</span>) =&gt;</span> &#123;</span><br><span class="line">          <span class="title class_">ListItem</span>() &#123;</span><br><span class="line">            <span class="title class_">Row</span>() &#123;</span><br><span class="line">              <span class="title class_">Row</span>() &#123;</span><br><span class="line">                <span class="keyword">if</span> (key == <span class="number">1</span>) &#123;</span><br><span class="line">                  <span class="title class_">Image</span>(item.<span class="property">icon</span>)</span><br><span class="line">                    .<span class="title function_">width</span>(<span class="number">60</span>)</span><br><span class="line">                    .<span class="title function_">height</span>(<span class="number">60</span>)</span><br><span class="line">                    .<span class="title function_">margin</span>(&#123; <span class="attr">right</span>: <span class="number">10</span> &#125;)</span><br><span class="line">                    .<span class="title function_">borderRadius</span>(<span class="number">100</span>)</span><br><span class="line">                &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                  <span class="title class_">Badge</span>(&#123;</span><br><span class="line">                    <span class="attr">count</span>: <span class="number">1</span>,</span><br><span class="line">                    <span class="attr">position</span>: <span class="title class_">BadgePosition</span>.<span class="property">RightTop</span>,</span><br><span class="line">                    <span class="attr">style</span>: &#123; <span class="attr">badgeSize</span>: <span class="number">16</span>, <span class="attr">badgeColor</span>: <span class="string">&#x27;#FA2A2D&#x27;</span> &#125;</span><br><span class="line">                  &#125;) &#123;</span><br><span class="line">                    <span class="title class_">Image</span>(item.<span class="property">icon</span>)</span><br><span class="line">                      .<span class="title function_">width</span>(<span class="number">60</span>)</span><br><span class="line">                      .<span class="title function_">height</span>(<span class="number">60</span>)</span><br><span class="line">                      .<span class="title function_">margin</span>(&#123; <span class="attr">right</span>: <span class="number">10</span> &#125;)</span><br><span class="line">                      .<span class="title function_">borderRadius</span>(<span class="number">100</span>)</span><br><span class="line">                  &#125;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="title class_">Column</span>() &#123;</span><br><span class="line">                  <span class="title class_">Text</span>(<span class="string">`<span class="subst">$&#123;item.username&#125;</span>`</span>).<span class="title function_">fontSize</span>(<span class="number">16</span>).<span class="title function_">fontWeight</span>(<span class="title class_">FontWeight</span>.<span class="property">Bold</span>)</span><br><span class="line">                  <span class="title class_">Text</span>(<span class="string">`<span class="subst">$&#123;item.info&#125;</span>`</span>).<span class="title function_">fontSize</span>(<span class="number">14</span>).<span class="title function_">fontColor</span>(<span class="string">&quot;#666&quot;</span>)</span><br><span class="line">                &#125;</span><br><span class="line">                .<span class="title function_">height</span>(<span class="string">&#x27;72%&#x27;</span>)</span><br><span class="line">                .<span class="title function_">alignItems</span>(<span class="title class_">HorizontalAlign</span>.<span class="property">Start</span>)</span><br><span class="line">                .<span class="title function_">justifyContent</span>(<span class="title class_">FlexAlign</span>.<span class="property">SpaceBetween</span>)</span><br><span class="line">              &#125;</span><br><span class="line"></span><br><span class="line">              <span class="title class_">Text</span>(<span class="string">`<span class="subst">$&#123;item.date&#125;</span>`</span>)</span><br><span class="line">            &#125;</span><br><span class="line">            .<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">            .<span class="title function_">justifyContent</span>(<span class="title class_">FlexAlign</span>.<span class="property">SpaceBetween</span>)</span><br><span class="line">          &#125;</span><br><span class="line">          .<span class="title function_">height</span>(<span class="number">60</span>)</span><br><span class="line">          .<span class="title function_">margin</span>(&#123; <span class="attr">bottom</span>: <span class="number">10</span>, <span class="attr">top</span>: <span class="number">10</span> &#125;)</span><br><span class="line">          .<span class="title function_">swipeAction</span>(&#123; <span class="attr">end</span>: <span class="variable language_">this</span>.<span class="property">itemEnd</span>.<span class="title function_">bind</span>(<span class="variable language_">this</span>, key) &#125;) <span class="comment">// 设置侧滑属性</span></span><br><span class="line">        &#125;)</span><br><span class="line">      &#125;</span><br><span class="line">      .<span class="title function_">padding</span>(<span class="number">10</span>)</span><br><span class="line">      .<span class="title function_">divider</span>(&#123;</span><br><span class="line">        <span class="attr">strokeWidth</span>: <span class="number">1</span>, <span class="attr">color</span>: <span class="string">&#x27;#eee&#x27;</span></span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;.<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>).<span class="title function_">height</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@Builder</span></span><br><span class="line">  <span class="title function_">itemEnd</span>(<span class="params">index: <span class="built_in">number</span></span>) &#123;</span><br><span class="line">    <span class="comment">// 侧滑后尾端出现的组件</span></span><br><span class="line">    <span class="title class_">Button</span>(&#123; <span class="attr">type</span>: <span class="title class_">ButtonType</span>.<span class="property">Circle</span> &#125;) &#123;</span><br><span class="line">      <span class="title class_">Image</span>(<span class="string">&quot;https://gitee.com/zch0304/images/raw/master/note/delete.png&quot;</span>)</span><br><span class="line">        .<span class="title function_">width</span>(<span class="number">26</span>)</span><br><span class="line">        .<span class="title function_">height</span>(<span class="number">26</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    .<span class="title function_">onClick</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">list</span>.<span class="title function_">splice</span>(index, <span class="number">1</span>);</span><br><span class="line">    &#125;)</span><br><span class="line">    .<span class="title function_">width</span>(<span class="number">40</span>)</span><br><span class="line">    .<span class="title function_">height</span>(<span class="number">40</span>)</span><br><span class="line">    .<span class="title function_">margin</span>(&#123; <span class="attr">left</span>: <span class="number">20</span> &#125;)</span><br><span class="line">    .<span class="title function_">backgroundColor</span>(<span class="title class_">Color</span>.<span class="property">Red</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<img data-src="https://gitee.com/zch0304/images/raw/master/note/1718721262849.jpg" style="zoom:50%;" /> 

<h4 id="Badge-给列表项添加标记"><a href="#Badge-给列表项添加标记" class="headerlink" title="Badge 给列表项添加标记"></a>Badge 给列表项添加标记</h4><p>添加标记是一种无干扰性且直观的方法，用于显示通知或将注意力集中到应用内的某个区域。例如，当消息列表接收到新消息时，通常对应的联系人头像的右上方会出现标记，提示有若干条未读消息。 </p>
<figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Badge</span>(&#123;</span><br><span class="line">  <span class="attr">count</span>: <span class="number">1</span>,</span><br><span class="line">  <span class="attr">position</span>: <span class="title class_">BadgePosition</span>.<span class="property">RightTop</span>,</span><br><span class="line">  <span class="attr">style</span>: &#123; <span class="attr">badgeSize</span>: <span class="number">16</span>, <span class="attr">badgeColor</span>: <span class="string">&#x27;#FA2A2D&#x27;</span> &#125;</span><br><span class="line">&#125;) &#123;</span><br><span class="line">  <span class="comment">// Image组件实现消息联系人头像</span></span><br><span class="line"></span><br><span class="line">  ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="ListItemGroup-汽车之家选车页面布局"><a href="#ListItemGroup-汽车之家选车页面布局" class="headerlink" title="ListItemGroup 汽车之家选车页面布局"></a>ListItemGroup 汽车之家选车页面布局</h4><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">class</span> <span class="title class_">CarModel</span> &#123;</span><br><span class="line">  <span class="attr">alphabet</span>: <span class="built_in">string</span></span><br><span class="line">  <span class="attr">carItem</span>: <span class="title class_">Array</span>&lt;<span class="title class_">CarItemModel</span>&gt;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params">alphabet: <span class="built_in">string</span>, carItem: <span class="built_in">Array</span>&lt;CarItemModel&gt;</span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">alphabet</span> = alphabet</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">carItem</span> = carItem</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">class</span> <span class="title class_">CarItemModel</span> &#123;</span><br><span class="line">  <span class="attr">title</span>: <span class="built_in">string</span></span><br><span class="line"></span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params">title: <span class="built_in">string</span></span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">title</span> = title</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">CarItemModel</span>, <span class="title class_">CarModel</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;../model/CarModel&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> alphabets = [<span class="string">&#x27;#&#x27;</span>, <span class="string">&#x27;A&#x27;</span>, <span class="string">&#x27;B&#x27;</span>, <span class="string">&#x27;C&#x27;</span>, <span class="string">&#x27;D&#x27;</span>, <span class="string">&#x27;E&#x27;</span>, <span class="string">&#x27;F&#x27;</span>, <span class="string">&#x27;G&#x27;</span>, <span class="string">&#x27;H&#x27;</span>, <span class="string">&#x27;I&#x27;</span>, <span class="string">&#x27;J&#x27;</span>, <span class="string">&#x27;K&#x27;</span>,</span><br><span class="line">  <span class="string">&#x27;L&#x27;</span>, <span class="string">&#x27;M&#x27;</span>, <span class="string">&#x27;N&#x27;</span>, <span class="string">&#x27;O&#x27;</span>, <span class="string">&#x27;P&#x27;</span>, <span class="string">&#x27;Q&#x27;</span>, <span class="string">&#x27;R&#x27;</span>, <span class="string">&#x27;S&#x27;</span>, <span class="string">&#x27;T&#x27;</span>, <span class="string">&#x27;U&#x27;</span>, <span class="string">&#x27;V&#x27;</span>, <span class="string">&#x27;W&#x27;</span>, <span class="string">&#x27;X&#x27;</span>, <span class="string">&#x27;Y&#x27;</span>, <span class="string">&#x27;Z&#x27;</span>]</span><br><span class="line"></span><br><span class="line"><span class="meta">@Entry</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line">struct <span class="title class_">Index</span> &#123;</span><br><span class="line">  <span class="meta">@State</span> <span class="attr">selectedIndex</span>: <span class="built_in">number</span> = <span class="number">0</span></span><br><span class="line">  <span class="keyword">private</span> <span class="attr">listScroller</span>: <span class="title class_">Scroller</span> = <span class="keyword">new</span> <span class="title class_">Scroller</span>()</span><br><span class="line">  <span class="meta">@State</span> <span class="attr">carList</span>: <span class="title class_">CarModel</span>[] = [</span><br><span class="line">    <span class="keyword">new</span> <span class="title class_">CarModel</span>(</span><br><span class="line">      <span class="string">&quot;A&quot;</span>,</span><br><span class="line">      [</span><br><span class="line">        <span class="keyword">new</span> <span class="title class_">CarItemModel</span>(<span class="string">&quot;奥迪&quot;</span>),</span><br><span class="line">        <span class="keyword">new</span> <span class="title class_">CarItemModel</span>(<span class="string">&quot;奥拓&quot;</span>),</span><br><span class="line">        <span class="keyword">new</span> <span class="title class_">CarItemModel</span>(<span class="string">&quot;爱驰&quot;</span>),</span><br><span class="line">        <span class="keyword">new</span> <span class="title class_">CarItemModel</span>(<span class="string">&quot;阿尔特&quot;</span>)</span><br><span class="line">      ]</span><br><span class="line">    ),</span><br><span class="line">    <span class="keyword">new</span> <span class="title class_">CarModel</span>(</span><br><span class="line">      <span class="string">&quot;B&quot;</span>,</span><br><span class="line">      [</span><br><span class="line">        <span class="keyword">new</span> <span class="title class_">CarItemModel</span>(<span class="string">&quot;奔驰&quot;</span>),</span><br><span class="line">        <span class="keyword">new</span> <span class="title class_">CarItemModel</span>(<span class="string">&quot;比亚迪&quot;</span>),</span><br><span class="line">        <span class="keyword">new</span> <span class="title class_">CarItemModel</span>(<span class="string">&quot;宝马&quot;</span>),</span><br><span class="line">        <span class="keyword">new</span> <span class="title class_">CarItemModel</span>(<span class="string">&quot;保时捷&quot;</span>),</span><br><span class="line">        <span class="keyword">new</span> <span class="title class_">CarItemModel</span>(<span class="string">&quot;标致&quot;</span>)</span><br><span class="line">      ]</span><br><span class="line">    ),</span><br><span class="line">    <span class="keyword">new</span> <span class="title class_">CarModel</span>(</span><br><span class="line">      <span class="string">&quot;C&quot;</span>,</span><br><span class="line">      [</span><br><span class="line">        <span class="keyword">new</span> <span class="title class_">CarItemModel</span>(<span class="string">&quot;长安&quot;</span>),</span><br><span class="line">        <span class="keyword">new</span> <span class="title class_">CarItemModel</span>(<span class="string">&quot;长城&quot;</span>),</span><br><span class="line">        <span class="keyword">new</span> <span class="title class_">CarItemModel</span>(<span class="string">&quot;宝马&quot;</span>),</span><br><span class="line">        <span class="keyword">new</span> <span class="title class_">CarItemModel</span>(<span class="string">&quot;曹操汽车&quot;</span>),</span><br><span class="line">        <span class="keyword">new</span> <span class="title class_">CarItemModel</span>(<span class="string">&quot;成功汽车&quot;</span>)</span><br><span class="line">      ]</span><br><span class="line">    ),</span><br><span class="line">    <span class="keyword">new</span> <span class="title class_">CarModel</span>(</span><br><span class="line">      <span class="string">&quot;D&quot;</span>,</span><br><span class="line">      [</span><br><span class="line">        <span class="keyword">new</span> <span class="title class_">CarItemModel</span>(<span class="string">&quot;大众&quot;</span>),</span><br><span class="line">        <span class="keyword">new</span> <span class="title class_">CarItemModel</span>(<span class="string">&quot;东风&quot;</span>),</span><br><span class="line">        <span class="keyword">new</span> <span class="title class_">CarItemModel</span>(<span class="string">&quot;大运&quot;</span>),</span><br><span class="line">        <span class="keyword">new</span> <span class="title class_">CarItemModel</span>(<span class="string">&quot;东南&quot;</span>),</span><br><span class="line">        <span class="keyword">new</span> <span class="title class_">CarItemModel</span>(<span class="string">&quot;大帝&quot;</span>)</span><br><span class="line">      ]</span><br><span class="line">    ),</span><br><span class="line">    <span class="keyword">new</span> <span class="title class_">CarModel</span>(</span><br><span class="line">      <span class="string">&quot;F&quot;</span>,</span><br><span class="line">      [</span><br><span class="line">        <span class="keyword">new</span> <span class="title class_">CarItemModel</span>(<span class="string">&quot;丰田&quot;</span>),</span><br><span class="line">        <span class="keyword">new</span> <span class="title class_">CarItemModel</span>(<span class="string">&quot;福特&quot;</span>),</span><br><span class="line">        <span class="keyword">new</span> <span class="title class_">CarItemModel</span>(<span class="string">&quot;法拉利&quot;</span>)</span><br><span class="line">      ]</span><br><span class="line">    )</span><br><span class="line">  ]</span><br><span class="line"></span><br><span class="line">  <span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">Column</span>() &#123;</span><br><span class="line">      <span class="title class_">Stack</span>(&#123; <span class="attr">alignContent</span>: <span class="title class_">Alignment</span>.<span class="property">End</span> &#125;) &#123;</span><br><span class="line">        <span class="title class_">List</span>(&#123; <span class="attr">scroller</span>: <span class="variable language_">this</span>.<span class="property">listScroller</span> &#125;) &#123;</span><br><span class="line">          <span class="title class_">ForEach</span>(<span class="variable language_">this</span>.<span class="property">carList</span>, <span class="function">(<span class="params">car: CarModel</span>) =&gt;</span> &#123;</span><br><span class="line">            <span class="title class_">ListItemGroup</span>(&#123; <span class="attr">header</span>: <span class="variable language_">this</span>.<span class="title function_">itemHead</span>(car.<span class="property">alphabet</span>) &#125;) &#123;</span><br><span class="line">              <span class="comment">// 循环渲染 ListItem</span></span><br><span class="line">              <span class="title class_">ForEach</span>(car.<span class="property">carItem</span>, <span class="function">(<span class="params">item: CarItemModel</span>) =&gt;</span> &#123;</span><br><span class="line">                <span class="title class_">ListItem</span>() &#123;</span><br><span class="line">                  <span class="title class_">Text</span>(<span class="string">`<span class="subst">$&#123;item.title&#125;</span>`</span>).<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>).<span class="title function_">height</span>(<span class="number">60</span>).<span class="title function_">fontSize</span>(<span class="number">16</span>)</span><br><span class="line">                &#125;.<span class="title function_">padding</span>(&#123; <span class="attr">left</span>: <span class="number">10</span> &#125;)</span><br><span class="line">              &#125;)</span><br><span class="line">            &#125;</span><br><span class="line">          &#125;)</span><br><span class="line">        &#125;</span><br><span class="line">        .<span class="title function_">sticky</span>(<span class="title class_">StickyStyle</span>.<span class="property">Header</span>) <span class="comment">// 设置吸顶，实现粘性标题效果</span></span><br><span class="line">        .<span class="title function_">onScrollIndex</span>(<span class="function">(<span class="params">firstIndex: <span class="built_in">number</span></span>) =&gt;</span> &#123; <span class="comment">// 获取滚动的索引值</span></span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">selectedIndex</span> = firstIndex</span><br><span class="line">        &#125;)</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 字母表索引组件</span></span><br><span class="line">        <span class="title class_">AlphabetIndexer</span>(&#123; <span class="attr">arrayValue</span>: alphabets, <span class="attr">selected</span>: <span class="number">0</span> &#125;)</span><br><span class="line">          .<span class="title function_">selected</span>(<span class="variable language_">this</span>.<span class="property">selectedIndex</span>)</span><br><span class="line">          .<span class="title function_">onSelect</span>(<span class="function">(<span class="params">index: <span class="built_in">number</span></span>) =&gt;</span> &#123;</span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">listScroller</span>.<span class="title function_">scrollToIndex</span>(index - <span class="number">1</span>)</span><br><span class="line">          &#125;)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;.<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>).<span class="title function_">height</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@Builder</span></span><br><span class="line">  <span class="title function_">itemHead</span>(<span class="params">text: <span class="built_in">string</span></span>) &#123;</span><br><span class="line">    <span class="comment">// 列表分组的头部组件，对应联系人分组 A、B 等位置的组件</span></span><br><span class="line">    <span class="title class_">Text</span>(text)</span><br><span class="line">      .<span class="title function_">fontSize</span>(<span class="number">22</span>)</span><br><span class="line">      .<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">      .<span class="title function_">padding</span>(<span class="number">5</span>)</span><br><span class="line">      .<span class="title function_">backgroundColor</span>(<span class="string">&#x27;#fff1f3f5&#x27;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<img data-src="https://gitee.com/zch0304/images/raw/master/note/1719025735980.jpg" style="zoom:50%;" />	

<h3 id="Grid-网格布局"><a href="#Grid-网格布局" class="headerlink" title="Grid 网格布局"></a>Grid 网格布局</h3><p>网格容器，由“行”和“列”分割的单元格所组成，通过指定“项目”所在的单元格做出各种各样的布局 。</p>
<h4 id="Grid-接口"><a href="#Grid-接口" class="headerlink" title="Grid 接口"></a>Grid 接口</h4><p>参数：</p>
<table>
<thead>
<tr>
<th>参数名</th>
<th>参数类型</th>
<th>必填</th>
<th>参数描述</th>
</tr>
</thead>
<tbody><tr>
<td>scroller</td>
<td><span class="exturl" data-url="aHR0cHM6Ly9kZXZlbG9wZXIuaHVhd2VpLmNvbS9jb25zdW1lci9jbi9kb2MvaGFybW9ueW9zLXJlZmVyZW5jZXMtVjIvdHMtY29udGFpbmVyLXNjcm9sbC0wMDAwMDAxNDI3OTAyNDgwLVYyI1pILUNOX1RPUElDXzAwMDAwMDE1MjM2NDg3OTBfX3Njcm9sbGVy">Scroller<i class="fa fa-external-link-alt"></i></span></td>
<td>否</td>
<td>可滚动组件的控制器。用于与可滚动组件进行绑定。说明：不允许和其它滚动类组件绑定同一个滚动控制对象。</td>
</tr>
</tbody></table>
<h4 id="Grid-属性"><a href="#Grid-属性" class="headerlink" title="Grid 属性"></a>Grid 属性</h4><table>
<thead>
<tr>
<th>名称</th>
<th>参数类型</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td>columnsTemplate</td>
<td>string</td>
<td>设置当前网格布局列的数量，不设置时默认 1 列。例如， ‘1fr 1fr 2fr’ 是将父组件分 3 列，将父组件允许的宽分为 4 等份，第一列占 1 份，第二列占 1 份，第三列占 2 份。说明：设置为 ‘0fr’ 时，该列的列宽为 0，不显示 GridItem。设置为其它非法值时，GridItem 显示为固定 1 列。</td>
</tr>
<tr>
<td>rowsTemplate</td>
<td>string</td>
<td>设置当前网格布局行的数量，不设置时默认 1 行。例如， ‘1fr 1fr 2fr’ 是将父组件分 3 行，将父组件允许的高分为 4 等份，第一行占 1 份，第二行占 1 份，第三行占 2 份。说明：设置为 ‘0fr’ 时，该行的行高为 0，这一行不显示 GridItem。设置为其它非法值时，GridItem 显示为固定 1 行。</td>
</tr>
<tr>
<td>columnsGap</td>
<td>Length</td>
<td>设置列与列的间距。默认值：0。说明：设置为小于 0 的值时，按默认值显示。</td>
</tr>
<tr>
<td>rowsGap</td>
<td>Length</td>
<td>设置行与行的间距。默认值：0。说明：设置为小于 0 的值时，按默认值显示。</td>
</tr>
<tr>
<td>scrollBar</td>
<td><span class="exturl" data-url="aHR0cHM6Ly9kZXZlbG9wZXIuaHVhd2VpLmNvbS9jb25zdW1lci9jbi9kb2MvaGFybW9ueW9zLXJlZmVyZW5jZXMtVjIvdHMtYXBwZW5kaXgtZW51bXMtMDAwMDAwMTQ3ODA2MTc0MS1WMiNaSC1DTl9UT1BJQ18wMDAwMDAxNTc0MjQ4Nzg5X19iYXJzdGF0ZQ==">BarState<i class="fa fa-external-link-alt"></i></span></td>
<td>设置滚动条状态。默认值：BarState.Oﬀ。</td>
</tr>
<tr>
<td>scrollBarColor</td>
<td>string &#124; number &#124; Color</td>
<td>设置滚动条的颜色。</td>
</tr>
<tr>
<td>scrollBarWidth</td>
<td>string &#124; number</td>
<td>设置滚动条的宽度。宽度设置后，滚动条正常状态和按压状态宽度均为滚动条的宽度值。默认值：4，单位：vp。</td>
</tr>
<tr>
<td>cachedCount</td>
<td>number</td>
<td>设置预加载的 GridItem 的数量，只在 <span class="exturl" data-url="aHR0cHM6Ly9kZXZlbG9wZXIuaHVhd2VpLmNvbS9jb25zdW1lci9jbi9kb2MvaGFybW9ueW9zLWd1aWRlcy1WMi9hcmt0cy1yZW5kZXJpbmctY29udHJvbC1sYXp5Zm9yZWFjaC0wMDAwMDAxNTI0NDE3MjEzLVYy">LazyForEach<i class="fa fa-external-link-alt"></i></span> 中生效。具体使用可参考减少应用白块说明。默认值：1。说明：设置缓存后会在 Grid 显示区域上下各缓存 cachedCount * 列数个 GridItem。LazyForEach 超出显示和缓存范围的 GridItem 会被释放。设置为小于 0 的值时，按默认值显示。</td>
</tr>
<tr>
<td>editMode8+</td>
<td>boolean</td>
<td>设置 Grid 是否进入编辑模式，进入编辑模式可以拖拽 Grid 组件内部 GridItem。默认值：false。</td>
</tr>
<tr>
<td>layoutDirection8+</td>
<td><span class="exturl" data-url="aHR0cHM6Ly9kZXZlbG9wZXIuaHVhd2VpLmNvbS9jb25zdW1lci9jbi9kb2MvaGFybW9ueW9zLXJlZmVyZW5jZXMtVjIvdHMtY29udGFpbmVyLWdyaWQtMDAwMDAwMTQ3ODM0MTE2MS1WMiNaSC1DTl9UT1BJQ18wMDAwMDAxNTc0MTI4OTY5X19ncmlkZGlyZWN0aW9uOCVFNiU5RSU5QSVFNCVCOCVCRSVFOCVBRiVCNCVFNiU5OCU4RQ==">GridDirection<i class="fa fa-external-link-alt"></i></span></td>
<td>设置布局的主轴方向。默认值：GridDirection.Row。</td>
</tr>
<tr>
<td>maxCount8+</td>
<td>number</td>
<td>当 layoutDirection 是 Row&#x2F;RowReverse 时，表示可显示的最大列数。当 layoutDirection 是 Column&#x2F;ColumnReverse 时，表示可显示的最大行数。默认值：Inﬁnity。说明：当 maxCount 小于 minCount 时，maxCount 和 minCount 都按默认值处理。设置为小于 0 的值时，按默认值显示。</td>
</tr>
<tr>
<td>minCount8+</td>
<td>number</td>
<td>当 layoutDirection 是 Row&#x2F;RowReverse 时，表示可显示的最小列数。当 layoutDirection 是 Column&#x2F;ColumnReverse 时，表示可显示的最小行数。默认值：1。说明：设置为小于 0 的值时，按默认值显示。</td>
</tr>
<tr>
<td>cellLength8+</td>
<td>number</td>
<td>当 layoutDirection 是 Row&#x2F;RowReverse 时，表示一行的高度。当 layoutDirection 是 Column&#x2F;ColumnReverse 时，表示一列的宽度。默认值：第一个元素的大小。</td>
</tr>
<tr>
<td>multiSelectable8+</td>
<td>boolean</td>
<td>是否开启鼠标框选。默认值：false。- false：关闭框选。- true：开启框选。</td>
</tr>
<tr>
<td>supportAnimation8+</td>
<td>boolean</td>
<td>是否支持动画。当前支持 GridItem 拖拽动画。默认值：false。</td>
</tr>
</tbody></table>
<p>Grid 组件根据 rowsTemplate、columnsTemplate 属性的设置情况，可分为以下三种布局模式：</p>
<ul>
<li>行、列数量与占比同时设置：Grid 只展示固定行列数的元素，其余元素不展示，且 Grid 不可滚动。</li>
<li>只设置行、列数量与占比中的一个：元素按照设置的方向进行排布，超出的元素可通过滚动的方式展示。</li>
<li>行列数量与占比都不设置：元素在布局方向上排布，其行列数由布局方向、单个网格的宽高等多个属性共同决定。超出行列容纳范围的元素不展示，且 Grid 不可滚动。</li>
</ul>
<h4 id="固定数量的网格"><a href="#固定数量的网格" class="headerlink" title="固定数量的网格"></a>固定数量的网格</h4><p>行、列数量与占比同时设置：Grid 只展示固定行列数的元素，其余元素不展示，且 Grid 不可滚动。通过设置行列数量与尺寸占比可以确定网格布局的整体排列方式。Grid 组件提供了 rowsTemplate 和 columnsTemplate 属性用于设置网格布局行列数量与尺寸占比。rowsTemplate 和 columnsTemplate 属性值是一个由多个空格和 ‘数字+fr’ 间隔拼接的字符串，fr 的个数即网格布局的行或列数，fr 前面的数值大小，用于计算该行或列在网格布局宽度上的占比，最终决定该行或列的宽度。</p>
<img data-src="https://gitee.com/zch0304/images/raw/master/note/1719026155523.jpg" style="zoom:50%;" /> 

<p>如上图所示，构建的是一个三行三列的的网格布局，其在垂直方向上分为三等份，每行占一份；在水平方向上分为四等份，第一列占一份，第二列占两份，第三列占一份。 只要将 rowsTemplate 的值为 ‘1fr 1fr 1fr’，同时将 columnsTemplate 的值为 ‘1fr 2fr 1fr’，即可实现上述网格布局。</p>
<figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Entry</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line">struct <span class="title class_">Index</span> &#123;</span><br><span class="line">  <span class="keyword">private</span> <span class="attr">arr</span>: <span class="built_in">string</span>[] = [<span class="string">&#x27;1&#x27;</span>, <span class="string">&#x27;2&#x27;</span>, <span class="string">&#x27;3&#x27;</span>, <span class="string">&#x27;4&#x27;</span>, <span class="string">&#x27;5&#x27;</span>, <span class="string">&#x27;6&#x27;</span>, <span class="string">&#x27;7&#x27;</span>, <span class="string">&#x27;8&#x27;</span>, <span class="string">&#x27;9&#x27;</span>, <span class="string">&#x27;10&#x27;</span>, <span class="string">&#x27;11&#x27;</span>, <span class="string">&#x27;12&#x27;</span>, <span class="string">&#x27;13&#x27;</span>, <span class="string">&#x27;14&#x27;</span>, <span class="string">&#x27;15&#x27;</span>]</span><br><span class="line"></span><br><span class="line">  <span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">Column</span>() &#123;</span><br><span class="line">      <span class="title class_">Grid</span>() &#123;</span><br><span class="line">        <span class="title class_">ForEach</span>(<span class="variable language_">this</span>.<span class="property">arr</span>, <span class="function">(<span class="params">item: <span class="built_in">string</span></span>) =&gt;</span> &#123;</span><br><span class="line">          <span class="title class_">GridItem</span>() &#123;</span><br><span class="line">            <span class="title class_">Text</span>(item)</span><br><span class="line">              .<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">              .<span class="title function_">height</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">              .<span class="title function_">fontSize</span>(<span class="number">16</span>)</span><br><span class="line">              .<span class="title function_">fontColor</span>(<span class="title class_">Color</span>.<span class="property">White</span>)</span><br><span class="line">              .<span class="title function_">backgroundColor</span>(<span class="title class_">Color</span>.<span class="property">Blue</span>)</span><br><span class="line">              .<span class="title function_">textAlign</span>(<span class="title class_">TextAlign</span>.<span class="property">Center</span>)</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;, <span class="function">(<span class="params">item: <span class="built_in">string</span></span>) =&gt;</span> item)</span><br><span class="line">      &#125;</span><br><span class="line">      .<span class="title function_">height</span>(<span class="number">300</span>)</span><br><span class="line">      .<span class="title function_">columnsTemplate</span>(<span class="string">&#x27;1fr 2fr 1fr&#x27;</span>)</span><br><span class="line">      .<span class="title function_">rowsTemplate</span>(<span class="string">&#x27;1fr 1fr 1fr&#x27;</span>)</span><br><span class="line">      .<span class="title function_">columnsGap</span>(<span class="number">10</span>)</span><br><span class="line">      .<span class="title function_">rowsGap</span>(<span class="number">10</span>)</span><br><span class="line">    &#125;.<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>).<span class="title function_">padding</span>(<span class="number">12</span>).<span class="title function_">backgroundColor</span>(<span class="string">&#x27;#eee&#x27;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="上下滚动的网格"><a href="#上下滚动的网格" class="headerlink" title="上下滚动的网格"></a>上下滚动的网格</h4><p>只设置行、列数量与占比中的一个：元素按照设置的方向进行排布，超出的元素可通过滚动的方式展示。</p>
<figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Entry</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line">struct <span class="title class_">Index</span> &#123;</span><br><span class="line">  <span class="keyword">private</span> <span class="attr">arr</span>: <span class="built_in">string</span>[] = [<span class="string">&#x27;1&#x27;</span>, <span class="string">&#x27;2&#x27;</span>, <span class="string">&#x27;3&#x27;</span>, <span class="string">&#x27;4&#x27;</span>, <span class="string">&#x27;5&#x27;</span>, <span class="string">&#x27;6&#x27;</span>, <span class="string">&#x27;7&#x27;</span>, <span class="string">&#x27;8&#x27;</span>, <span class="string">&#x27;9&#x27;</span>, <span class="string">&#x27;10&#x27;</span>, <span class="string">&#x27;11&#x27;</span>, <span class="string">&#x27;12&#x27;</span>, <span class="string">&#x27;13&#x27;</span>, <span class="string">&#x27;14&#x27;</span>, <span class="string">&#x27;15&#x27;</span>]</span><br><span class="line"></span><br><span class="line">  <span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">Column</span>() &#123;</span><br><span class="line">      <span class="title class_">Grid</span>() &#123;</span><br><span class="line">        <span class="title class_">ForEach</span>(<span class="variable language_">this</span>.<span class="property">arr</span>, <span class="function">(<span class="params">item: <span class="built_in">string</span></span>) =&gt;</span> &#123;</span><br><span class="line">          <span class="title class_">GridItem</span>() &#123;</span><br><span class="line">            <span class="title class_">Text</span>(item)</span><br><span class="line">              .<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">              .<span class="title function_">height</span>(<span class="number">160</span>)</span><br><span class="line">              .<span class="title function_">fontSize</span>(<span class="number">16</span>)</span><br><span class="line">              .<span class="title function_">fontColor</span>(<span class="title class_">Color</span>.<span class="property">White</span>)</span><br><span class="line">              .<span class="title function_">backgroundColor</span>(<span class="string">&#x27;#1e90ff&#x27;</span>)</span><br><span class="line">              .<span class="title function_">textAlign</span>(<span class="title class_">TextAlign</span>.<span class="property">Center</span>)</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;, <span class="function">(<span class="params">item: <span class="built_in">string</span></span>) =&gt;</span> item)</span><br><span class="line">      &#125;</span><br><span class="line">      .<span class="title function_">columnsTemplate</span>(<span class="string">&#x27;1fr 1fr 1fr&#x27;</span>)</span><br><span class="line">      .<span class="title function_">columnsGap</span>(<span class="number">10</span>)</span><br><span class="line">      .<span class="title function_">rowsGap</span>(<span class="number">10</span>)</span><br><span class="line">    &#125;.<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>).<span class="title function_">padding</span>(<span class="number">12</span>).<span class="title function_">backgroundColor</span>(<span class="string">&#x27;#eee&#x27;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="不均匀网格布局"><a href="#不均匀网格布局" class="headerlink" title="不均匀网格布局"></a>不均匀网格布局</h4><img data-src="https://gitee.com/zch0304/images/raw/master/note/1719028446980.jpg" style="zoom:80%;" /> 

<p>在单个网格单元中，rowStart 和 rowEnd 属性表示指定当前元素起始行号和终点行号，columnStart 和 columnEnd 属性表示指定当前元素的起始列号和终点列号。 区块 3 横跨第三列和第四列，只要将区块 3 对应 GridItem 的 columnStart 和 columnEnd 设为 3 和 4。区块 4 横跨第二行和第三行，只要将区块 3 对应 GridItem 的 rowStart 和 rowEnd 设为 1 和 2。整个区块的高度是由 Grid 的高度决定的。</p>
<figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Entry</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line">struct <span class="title class_">Index</span> &#123;</span><br><span class="line">  <span class="keyword">private</span> <span class="attr">arr</span>: <span class="built_in">string</span>[] = [<span class="string">&#x27;1&#x27;</span>, <span class="string">&#x27;2&#x27;</span>, <span class="string">&#x27;3&#x27;</span>, <span class="string">&#x27;4&#x27;</span>, <span class="string">&#x27;5&#x27;</span>, <span class="string">&#x27;6&#x27;</span>, <span class="string">&#x27;7&#x27;</span>, <span class="string">&#x27;8&#x27;</span>, <span class="string">&#x27;9&#x27;</span>, <span class="string">&#x27;10&#x27;</span>, <span class="string">&#x27;11&#x27;</span>, <span class="string">&#x27;12&#x27;</span>, <span class="string">&#x27;13&#x27;</span>, <span class="string">&#x27;14&#x27;</span>, <span class="string">&#x27;15&#x27;</span>]</span><br><span class="line"></span><br><span class="line">  <span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">Column</span>() &#123;</span><br><span class="line">      <span class="title class_">Grid</span>() &#123;</span><br><span class="line">        <span class="title class_">GridItem</span>() &#123;</span><br><span class="line">          <span class="title class_">Text</span>(<span class="string">&#x27;1&#x27;</span>)</span><br><span class="line">            .<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">            .<span class="title function_">height</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">            .<span class="title function_">fontSize</span>(<span class="number">16</span>)</span><br><span class="line">            .<span class="title function_">fontColor</span>(<span class="title class_">Color</span>.<span class="property">White</span>)</span><br><span class="line">            .<span class="title function_">backgroundColor</span>(<span class="string">&#x27;#1e90ff&#x27;</span>)</span><br><span class="line">            .<span class="title function_">textAlign</span>(<span class="title class_">TextAlign</span>.<span class="property">Center</span>)</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="title class_">GridItem</span>() &#123;</span><br><span class="line">          <span class="title class_">Text</span>(<span class="string">&#x27;2&#x27;</span>)</span><br><span class="line">            .<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">            .<span class="title function_">height</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">            .<span class="title function_">fontSize</span>(<span class="number">16</span>)</span><br><span class="line">            .<span class="title function_">fontColor</span>(<span class="title class_">Color</span>.<span class="property">White</span>)</span><br><span class="line">            .<span class="title function_">backgroundColor</span>(<span class="string">&#x27;#1e90ff&#x27;</span>)</span><br><span class="line">            .<span class="title function_">textAlign</span>(<span class="title class_">TextAlign</span>.<span class="property">Center</span>)</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="title class_">GridItem</span>() &#123;</span><br><span class="line">          <span class="title class_">Text</span>(<span class="string">&#x27;3&#x27;</span>)</span><br><span class="line">            .<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">            .<span class="title function_">height</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">            .<span class="title function_">fontSize</span>(<span class="number">16</span>)</span><br><span class="line">            .<span class="title function_">fontColor</span>(<span class="title class_">Color</span>.<span class="property">White</span>)</span><br><span class="line">            .<span class="title function_">backgroundColor</span>(<span class="string">&#x27;#1e90ff&#x27;</span>)</span><br><span class="line">            .<span class="title function_">textAlign</span>(<span class="title class_">TextAlign</span>.<span class="property">Center</span>)</span><br><span class="line">        &#125;.<span class="title function_">columnStart</span>(<span class="number">3</span>).<span class="title function_">columnEnd</span>(<span class="number">4</span>)</span><br><span class="line"></span><br><span class="line">        <span class="title class_">GridItem</span>() &#123;</span><br><span class="line">          <span class="title class_">Text</span>(<span class="string">&#x27;4&#x27;</span>)</span><br><span class="line">            .<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">            .<span class="title function_">height</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">            .<span class="title function_">fontSize</span>(<span class="number">16</span>)</span><br><span class="line">            .<span class="title function_">fontColor</span>(<span class="title class_">Color</span>.<span class="property">White</span>)</span><br><span class="line">            .<span class="title function_">backgroundColor</span>(<span class="string">&#x27;#1e90ff&#x27;</span>)</span><br><span class="line">            .<span class="title function_">textAlign</span>(<span class="title class_">TextAlign</span>.<span class="property">Center</span>)</span><br><span class="line">        &#125;.<span class="title function_">rowStart</span>(<span class="number">2</span>).<span class="title function_">rowEnd</span>(<span class="number">3</span>)</span><br><span class="line"></span><br><span class="line">        <span class="title class_">GridItem</span>() &#123;</span><br><span class="line">          <span class="title class_">Text</span>(<span class="string">&#x27;5&#x27;</span>)</span><br><span class="line">            .<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">            .<span class="title function_">height</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">            .<span class="title function_">fontSize</span>(<span class="number">16</span>)</span><br><span class="line">            .<span class="title function_">fontColor</span>(<span class="title class_">Color</span>.<span class="property">White</span>)</span><br><span class="line">            .<span class="title function_">backgroundColor</span>(<span class="string">&#x27;#1e90ff&#x27;</span>)</span><br><span class="line">            .<span class="title function_">textAlign</span>(<span class="title class_">TextAlign</span>.<span class="property">Center</span>)</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="title class_">GridItem</span>() &#123;</span><br><span class="line">          <span class="title class_">Text</span>(<span class="string">&#x27;6&#x27;</span>)</span><br><span class="line">            .<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">            .<span class="title function_">height</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">            .<span class="title function_">fontSize</span>(<span class="number">16</span>)</span><br><span class="line">            .<span class="title function_">fontColor</span>(<span class="title class_">Color</span>.<span class="property">White</span>)</span><br><span class="line">            .<span class="title function_">backgroundColor</span>(<span class="string">&#x27;#1e90ff&#x27;</span>)</span><br><span class="line">            .<span class="title function_">textAlign</span>(<span class="title class_">TextAlign</span>.<span class="property">Center</span>)</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="title class_">GridItem</span>() &#123;</span><br><span class="line">          <span class="title class_">Text</span>(<span class="string">&#x27;7&#x27;</span>)</span><br><span class="line">            .<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">            .<span class="title function_">height</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">            .<span class="title function_">fontSize</span>(<span class="number">16</span>)</span><br><span class="line">            .<span class="title function_">fontColor</span>(<span class="title class_">Color</span>.<span class="property">White</span>)</span><br><span class="line">            .<span class="title function_">backgroundColor</span>(<span class="string">&#x27;#1e90ff&#x27;</span>)</span><br><span class="line">            .<span class="title function_">textAlign</span>(<span class="title class_">TextAlign</span>.<span class="property">Center</span>)</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="title class_">GridItem</span>() &#123;</span><br><span class="line">          <span class="title class_">Text</span>(<span class="string">&#x27;8&#x27;</span>)</span><br><span class="line">            .<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">            .<span class="title function_">height</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">            .<span class="title function_">fontSize</span>(<span class="number">16</span>)</span><br><span class="line">            .<span class="title function_">fontColor</span>(<span class="title class_">Color</span>.<span class="property">White</span>)</span><br><span class="line">            .<span class="title function_">backgroundColor</span>(<span class="string">&#x27;#1e90ff&#x27;</span>)</span><br><span class="line">            .<span class="title function_">textAlign</span>(<span class="title class_">TextAlign</span>.<span class="property">Center</span>)</span><br><span class="line">        &#125;.<span class="title function_">columnStart</span>(<span class="number">1</span>).<span class="title function_">columnEnd</span>(<span class="number">4</span>)</span><br><span class="line">      &#125;</span><br><span class="line">      .<span class="title function_">height</span>(<span class="number">300</span>)</span><br><span class="line">      .<span class="title function_">columnsTemplate</span>(<span class="string">&#x27;1fr 1fr 1fr 1fr&#x27;</span>)</span><br><span class="line">      .<span class="title function_">rowsTemplate</span>(<span class="string">&#x27;1fr 1fr 1fr&#x27;</span>)</span><br><span class="line">      .<span class="title function_">columnsGap</span>(<span class="number">10</span>)</span><br><span class="line">      .<span class="title function_">rowsGap</span>(<span class="number">10</span>)</span><br><span class="line">    &#125;.<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>).<span class="title function_">padding</span>(<span class="number">12</span>).<span class="title function_">backgroundColor</span>(<span class="string">&#x27;#eee&#x27;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="水平滚动的网格"><a href="#水平滚动的网格" class="headerlink" title="水平滚动的网格"></a>水平滚动的网格</h4><p>可滚动的网格布局常用在文件管理、购物或视频列表等页面中如下图所示。在设置 Grid 的行列数量与占比时，如果仅设置行、列数量与占比中的一个，即仅设置 rowsTemplate 或仅设置 columnsTemplate 属性，网格单元按照设置的方向排列，超出 Grid 显示区域后，Grid 拥有可滚动能力。</p>
<img data-src="https://gitee.com/zch0304/images/raw/master/note/1719029689146.jpg" style="zoom:80%;" /> 

<p>如果设置的是 columnsTemplate，Grid 的滚动方向为垂直方向；如果设置的是 rowsTemplate，Grid 的滚动方向为水平方向。</p>
<p>如上图所示的横向可滚动网格布局，只要设置 rowsTemplate 属性的值且不设置 columnsTemplate 属性，当内容超出 Grid 组件宽度时，Grid 可横向滚动进行内容展示。</p>
<figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Entry</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line">struct <span class="title class_">Index</span> &#123;</span><br><span class="line">  <span class="meta">@State</span> <span class="attr">arr</span>: <span class="title class_">Array</span>&lt;<span class="built_in">string</span>&gt; = [<span class="string">&#x27;直播&#x27;</span>, <span class="string">&#x27;进口&#x27;</span>, <span class="string">&#x27;分类&#x27;</span>, <span class="string">&#x27;充值&#x27;</span>, <span class="string">&#x27;领券&#x27;</span>, <span class="string">&#x27;抽奖&#x27;</span>, <span class="string">&#x27;会员&#x27;</span>, <span class="string">&#x27;抽奖&#x27;</span>, <span class="string">&#x27;积分&#x27;</span>, <span class="string">&#x27;更多&#x27;</span>]</span><br><span class="line">  <span class="meta">@State</span> <span class="attr">colors</span>: <span class="title class_">Array</span>&lt;<span class="title class_">Color</span>&gt; = [</span><br><span class="line">    <span class="title class_">Color</span>.<span class="property">Brown</span>,</span><br><span class="line">    <span class="title class_">Color</span>.<span class="property">Red</span>,</span><br><span class="line">    <span class="title class_">Color</span>.<span class="property">Orange</span>,</span><br><span class="line">    <span class="title class_">Color</span>.<span class="property">Blue</span>,</span><br><span class="line">    <span class="title class_">Color</span>.<span class="property">Grey</span>,</span><br><span class="line">    <span class="title class_">Color</span>.<span class="property">Pink</span>,</span><br><span class="line">    <span class="title class_">Color</span>.<span class="property">Red</span>,</span><br><span class="line">    <span class="title class_">Color</span>.<span class="property">Brown</span>,</span><br><span class="line">    <span class="title class_">Color</span>.<span class="property">Orange</span>,</span><br><span class="line">    <span class="title class_">Color</span>.<span class="property">Blue</span>,</span><br><span class="line">  ]</span><br><span class="line"></span><br><span class="line">  <span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">Column</span>() &#123;</span><br><span class="line">      <span class="title class_">Grid</span>() &#123;</span><br><span class="line">        <span class="title class_">ForEach</span>(<span class="variable language_">this</span>.<span class="property">arr</span>, <span class="function">(<span class="params">item: <span class="built_in">string</span>, index</span>) =&gt;</span> &#123;</span><br><span class="line">          <span class="title class_">GridItem</span>() &#123;</span><br><span class="line">            <span class="title class_">Row</span>() &#123;</span><br><span class="line">              <span class="title class_">Text</span>(<span class="string">`<span class="subst">$&#123;item&#125;</span>`</span>)</span><br><span class="line">                .<span class="title function_">width</span>(<span class="number">68</span>)</span><br><span class="line">                .<span class="title function_">height</span>(<span class="number">68</span>)</span><br><span class="line">                .<span class="title function_">fontSize</span>(<span class="number">16</span>)</span><br><span class="line">                .<span class="title function_">fontColor</span>(<span class="title class_">Color</span>.<span class="property">White</span>)</span><br><span class="line">                .<span class="title function_">textAlign</span>(<span class="title class_">TextAlign</span>.<span class="property">Center</span>)</span><br><span class="line">                .<span class="title function_">backgroundColor</span>(<span class="variable language_">this</span>.<span class="property">colors</span>[index])</span><br><span class="line">                .<span class="title function_">borderRadius</span>(<span class="number">68</span>)</span><br><span class="line">            &#125;.<span class="title function_">height</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">          &#125;.<span class="title function_">width</span>(<span class="string">&#x27;25%&#x27;</span>)</span><br><span class="line">        &#125;, <span class="function">(<span class="params">item: <span class="built_in">string</span></span>) =&gt;</span> item)</span><br><span class="line">      &#125;</span><br><span class="line">      .<span class="title function_">height</span>(<span class="number">168</span>)</span><br><span class="line">      .<span class="title function_">rowsTemplate</span>(<span class="string">&#x27;1fr 1fr&#x27;</span>)</span><br><span class="line">    &#125;.<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>).<span class="title function_">padding</span>(<span class="number">12</span>).<span class="title function_">backgroundColor</span>(<span class="string">&#x27;#eee&#x27;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="组件导航和页面路由"><a href="#组件导航和页面路由" class="headerlink" title="组件导航和页面路由"></a>组件导航和页面路由</h2><h3 id="组件导航"><a href="#组件导航" class="headerlink" title="组件导航"></a>组件导航</h3><h4 id="Navigation"><a href="#Navigation" class="headerlink" title="Navigation"></a>Navigation</h4><p>详细介绍请查看<span class="exturl" data-url="aHR0cHM6Ly9kZXZlbG9wZXIuaHVhd2VpLmNvbS9jb25zdW1lci9jbi9kb2MvaGFybW9ueW9zLWd1aWRlcy1WNS9hcmt0cy1uYXZpZ2F0aW9uLW5hdmlnYXRpb24tVjU=">官方文档<i class="fa fa-external-link-alt"></i></span>。</p>
<h4 id="Tabs"><a href="#Tabs" class="headerlink" title="Tabs"></a>Tabs</h4><h5 id="Tabs-组件的接口"><a href="#Tabs-组件的接口" class="headerlink" title="Tabs 组件的接口"></a>Tabs 组件的接口</h5><p>参数：</p>
<table>
<thead>
<tr>
<th>参数名</th>
<th>参数类型</th>
<th>必填</th>
<th>参数描述</th>
</tr>
</thead>
<tbody><tr>
<td>barPosition</td>
<td>BarPosition</td>
<td>否</td>
<td>设置 Tabs 的页签位置。默认值：BarPosition.Start。</td>
</tr>
<tr>
<td>index</td>
<td>number</td>
<td>否</td>
<td>设置当前显示页签的索引。默认值：0。说明：设置为小于 0 的值时按默认值显示。可选值为 [0, TabContent 子节点数量 - 1]。设置不同值时，默认生效切换动效，可以设置 animationDuration 为 0 关闭动画。</td>
</tr>
<tr>
<td>controller</td>
<td><span class="exturl" data-url="aHR0cHM6Ly9kZXZlbG9wZXIuaHVhd2VpLmNvbS9jb25zdW1lci9jbi9kb2MvaGFybW9ueW9zLXJlZmVyZW5jZXMtVjIvdHMtY29udGFpbmVyLXRhYnMtMDAwMDAwMTQ3ODE4MTQzMy1WMiNaSC1DTl9UT1BJQ18wMDAwMDAxNTIzNDg4ODA2X190YWJzY29udHJvbGxlcg==">TabsController<i class="fa fa-external-link-alt"></i></span></td>
<td>否</td>
<td>设置 Tabs 控制器。</td>
</tr>
</tbody></table>
<h5 id="Tabs-组件属性"><a href="#Tabs-组件属性" class="headerlink" title="Tabs 组件属性"></a>Tabs 组件属性</h5><table>
<thead>
<tr>
<th>名称</th>
<th>参数类型</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td>vertical</td>
<td>boolean</td>
<td>设置为 false 是为横向 Tabs，设置为 true 时为纵向 Tabs。默认值：false。</td>
</tr>
<tr>
<td>scrollable</td>
<td>boolean</td>
<td>设置为 true 时可以通过滑动页面进行页面切换，为 false 时不可滑动切换页面。默认值：true。</td>
</tr>
<tr>
<td>barMode</td>
<td>BarMode</td>
<td>TabBar 布局模式，具体描述见 BarMode 枚举说明。默认值：BarMode.Fixed。Scrollable 每一个 TabBar 均使用实际布局宽度，超过总长度（横向 Tabs 的 barWidth，纵向 Tabs 的 barHeight）后可滑动。 Fixed 所有 TabBar 平均分配 barWidth 宽度（纵向时平均分配 barHeight 高度）。</td>
</tr>
<tr>
<td>barWidth</td>
<td>number &#124; Length8+</td>
<td>TabBar 的宽度值。默认值：未设置带样式的 TabBar 且 vertical 属性为 false 时，默认值为 Tabs 的宽度。未设置带样式的 TabBar 且 vertical 属性为 true 时，默认值为 56vp。 设置 SubTabbarStyle 样式且 vertical 属性为 false 时，默认值为 Tabs 的宽度。设置 SubTabbarStyle 样式且 vertical 属性为 true 时，默认值为 56vp。设置 BottomTabbarStyle 样式且 vertical 属性为 true 时，默认值为 96vp。设置 BottomTabbarStyle 样式且 vertical 属性为 false 时，默认值为 Tabs 的宽度。说明：设置为小于 0 或大于 Tabs 宽度值时，按默认值显示。</td>
</tr>
<tr>
<td>barHeight</td>
<td>number &#124; Length8+</td>
<td>TabBar 的高度值。默认值：未设置带样式的 TabBar 且 vertical 属性为 false 时，默认值为 56vp。未设置带样式的 TabBar 且 vertical 属性为 true 时，默认值为 Tabs 的高度。 设置 SubTabbarStyle 样式且 vertical 属性为 false 时，默认值为 56vp。设置 SubTabbarStyle 样式且 vertical 属性为 true 时，默认值为 Tabs 的高度。设置 BottomTabbarStyle 样式且 vertical 属性为 true 时，默认值为 Tabs 的高度。设置 BottomTabbarStyle 样式且 vertical 属性为 false 时，默认值为 56vp。说明：设置为小于 0 或大于 Tabs 高度值时，按默认值显示。</td>
</tr>
<tr>
<td>animationDuration</td>
<td>number</td>
<td>点击 TabBar 页签切换 TabContent 的动画时长。不设置时，点击 TabBar 页签切换 TabContent 无动画。默认值：300。说明：该参数不支持百分比设置；设置为小于 0 时， 按默认值 300ms 显示。</td>
</tr>
</tbody></table>
<h5 id="基本布局"><a href="#基本布局" class="headerlink" title="基本布局"></a>基本布局</h5><p>Tabs 组件的页面组成包含两个部分，分别是 TabContent 和 TabBar。TabContent 是内容页，TabBar 是导航页签栏，页面结构如下图所示，根据不同的导航类型，布局会有区别，可以分为底部导航、顶部导航、侧边导航，其导航栏分别位于底部、顶部和侧边。</p>
<img data-src="https://gitee.com/zch0304/images/raw/master/note/1719036279766.jpg" style="zoom:50%;" /> 

<blockquote>
<p>提示：</p>
<p>TabContent 组件不支持设置通用宽度属性，其宽度默认撑满 Tabs 父组件。</p>
<p>TabContent 组件不支持设置通用高度属性，其高度由 Tabs 父组件高度与 TabBar 组件高度决定。 </p>
</blockquote>
<h5 id="顶部导航"><a href="#顶部导航" class="headerlink" title="顶部导航"></a>顶部导航</h5><p>Tabs 组件默认的 barPosition 参数为 Start，即顶部导航模式。 </p>
<figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Tabs</span>(&#123; <span class="attr">barPosition</span>: <span class="title class_">BarPosition</span>.<span class="property">Start</span> &#125;) &#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Entry</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line">struct <span class="title class_">Index</span> &#123;</span><br><span class="line">  <span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">Tabs</span>() &#123;</span><br><span class="line">      <span class="title class_">TabContent</span>() &#123;</span><br><span class="line">        <span class="title class_">Text</span>(<span class="string">&#x27;首页的内容&#x27;</span>).<span class="title function_">fontSize</span>(<span class="number">30</span>)</span><br><span class="line">      &#125;</span><br><span class="line">      .<span class="title function_">tabBar</span>(<span class="string">&#x27;首页&#x27;</span>)</span><br><span class="line"></span><br><span class="line">      <span class="title class_">TabContent</span>() &#123;</span><br><span class="line">        <span class="title class_">Text</span>(<span class="string">&#x27;推荐的内容&#x27;</span>).<span class="title function_">fontSize</span>(<span class="number">30</span>)</span><br><span class="line">      &#125;</span><br><span class="line">      .<span class="title function_">tabBar</span>(<span class="string">&#x27;推荐&#x27;</span>)</span><br><span class="line"></span><br><span class="line">      <span class="title class_">TabContent</span>() &#123;</span><br><span class="line">        <span class="title class_">Text</span>(<span class="string">&#x27;发现的内容&#x27;</span>).<span class="title function_">fontSize</span>(<span class="number">30</span>)</span><br><span class="line">      &#125;</span><br><span class="line">      .<span class="title function_">tabBar</span>(<span class="string">&#x27;发现&#x27;</span>)</span><br><span class="line"></span><br><span class="line">      <span class="title class_">TabContent</span>() &#123;</span><br><span class="line">        <span class="title class_">Text</span>(<span class="string">&#x27;我的内容&#x27;</span>).<span class="title function_">fontSize</span>(<span class="number">30</span>)</span><br><span class="line">      &#125;</span><br><span class="line">      .<span class="title function_">tabBar</span>(<span class="string">&#x27;我的&#x27;</span>)</span><br><span class="line">    &#125;.<span class="title function_">backgroundColor</span>(<span class="string">&#x27;#eee&#x27;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<img data-src="https://gitee.com/zch0304/images/raw/master/note/1719038178166.jpg" style="zoom:50%;" /> 

<h5 id="底部导航"><a href="#底部导航" class="headerlink" title="底部导航"></a>底部导航</h5><p>底部导航是应用中最常见的一种导航方式。底部导航位于应用一级页面的底部，用户打开应用，能够分清整个应用的功能分类，以及页签对应的内容，并且其位于底部更加方便用户单手操作。底部导航一般作为应用的主导航形式存在，其作用是将用户关心的内容按照功能进行分类，迎合用户使用习惯，方便在不同模块间的内容切换。</p>
<p>设置 barPosition 为 End 即可将导航栏设置在底部。</p>
<figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Tabs</span>(&#123; <span class="attr">barPosition</span>: <span class="title class_">BarPosition</span>.<span class="property">End</span> &#125;) &#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="侧边导航"><a href="#侧边导航" class="headerlink" title="侧边导航"></a>侧边导航</h5><p>侧边导航是手机应用较为少见的一种导航模式，更多适用于平板横屏界面，用于对应用进行导航操作，由于用户的视觉习惯是从左到右，侧边导航栏默认为左侧侧边栏。 </p>
<p>实现侧边导航栏需要设置 Tabs 的属性 vertical 为 true。在底部导航和顶部导航实现中，其默认值为 false，表明内容页和导航栏垂直方向排列。</p>
<figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Entry</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line">struct <span class="title class_">Index</span> &#123;</span><br><span class="line">  <span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">Tabs</span>() &#123;</span><br><span class="line">      <span class="title class_">TabContent</span>() &#123;</span><br><span class="line">        <span class="title class_">Text</span>(<span class="string">&#x27;首页的内容&#x27;</span>).<span class="title function_">fontSize</span>(<span class="number">30</span>)</span><br><span class="line">      &#125;</span><br><span class="line">      .<span class="title function_">tabBar</span>(<span class="string">&#x27;首页&#x27;</span>)</span><br><span class="line"></span><br><span class="line">      <span class="title class_">TabContent</span>() &#123;</span><br><span class="line">        <span class="title class_">Text</span>(<span class="string">&#x27;推荐的内容&#x27;</span>).<span class="title function_">fontSize</span>(<span class="number">30</span>)</span><br><span class="line">      &#125;</span><br><span class="line">      .<span class="title function_">tabBar</span>(<span class="string">&#x27;推荐&#x27;</span>)</span><br><span class="line"></span><br><span class="line">      <span class="title class_">TabContent</span>() &#123;</span><br><span class="line">        <span class="title class_">Text</span>(<span class="string">&#x27;发现的内容&#x27;</span>).<span class="title function_">fontSize</span>(<span class="number">30</span>)</span><br><span class="line">      &#125;</span><br><span class="line">      .<span class="title function_">tabBar</span>(<span class="string">&#x27;发现&#x27;</span>)</span><br><span class="line"></span><br><span class="line">      <span class="title class_">TabContent</span>() &#123;</span><br><span class="line">        <span class="title class_">Text</span>(<span class="string">&#x27;我的内容&#x27;</span>).<span class="title function_">fontSize</span>(<span class="number">30</span>)</span><br><span class="line">      &#125;</span><br><span class="line">      .<span class="title function_">tabBar</span>(<span class="string">&#x27;我的&#x27;</span>)</span><br><span class="line">    &#125;.<span class="title function_">vertical</span>(<span class="literal">true</span>).<span class="title function_">barWidth</span>(<span class="number">100</span>).<span class="title function_">barHeight</span>(<span class="number">200</span>).<span class="title function_">backgroundColor</span>(<span class="string">&#x27;#eee&#x27;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<img data-src="https://gitee.com/zch0304/images/raw/master/note/1719301633289.jpg" style="zoom:80%;" /> 

<h5 id="限制导航栏的滑动切换"><a href="#限制导航栏的滑动切换" class="headerlink" title="限制导航栏的滑动切换"></a>限制导航栏的滑动切换</h5><p>默认情况下，导航栏都支持滑动切换，在一些内容信息量需要进行多级分类的页面，如支持底部导航 + 顶部导航组合的情况下，底部导航栏的滑动效果与顶部导航出现冲突，此时需要限制底部导航的滑动，避免引起不好的用户体验。</p>
<p>控制滑动切换的属性为 scrollable，默认值为 true，表示可以滑动，若要限制滑动切换页签则需要设置为 false。</p>
<figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Tabs</span>() &#123;</span><br><span class="line">&#125;.<span class="title function_">scrollable</span>(<span class="literal">false</span>)</span><br></pre></td></tr></table></figure>

<h5 id="可以滚动导航栏"><a href="#可以滚动导航栏" class="headerlink" title="可以滚动导航栏"></a>可以滚动导航栏</h5><p>滚动导航栏可以用于顶部导航栏或者侧边导航栏的设置，内容分类较多，屏幕宽度无法容纳所有分类页签的情况下，需要使用可滚动的导航栏，支持用户点击和滑动来加载隐藏的页签内容。</p>
<p>滚动导航栏需要设置 Tabs 组件的 barMode 属性，默认情况下其值为 Fixed，表示为固定导航栏，设置为 Scrollable 即可设置为可滚动导航栏。</p>
<figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Tabs</span>() &#123;</span><br><span class="line">&#125;.<span class="title function_">barMode</span>(<span class="title class_">BarMode</span>.<span class="property">Scrollable</span>)</span><br></pre></td></tr></table></figure>

<h5 id="自定义导航栏"><a href="#自定义导航栏" class="headerlink" title="自定义导航栏"></a>自定义导航栏</h5><p>对于底部导航栏，一般作为应用主页面功能区分，为了更好的用户体验，会组合文字以及对应语义图标表示页签内容，这种情况下，需要自定义导航页签的样式。</p>
<p>系统默认情况下采用了下划线标志当前活跃的页签，而自定义导航栏需要自行实现相应的样式，用于区分当前活跃页签和未活跃页签。</p>
<p>设置自定义导航栏需要使用 tabBar 的参数，以其支持的 CustomBuilder 的方式传入自定义的函数组件样式。例如这里声明 TabBuilder 的自定义函数组件，传入参数包括页签文字 title，对应位置 index，以及选中状态和未选中状态的图片资源。通过当前活跃的 currentIndex 和页签对应的 targetIndex 匹配与否，决定 UI 显示的样式。</p>
<p>在 TabContent 对应 tabBar 属性中传入自定义函数组件，并传递相应的参数。 </p>
<p>在不使用自定义导航栏时，系统默认的 Tabs 会实现切换逻辑。在使用了自定义导航栏后，切换页签的逻辑需要手动实现。即用户点击对应页签时，屏幕需要显示相应的内容页 。</p>
<p>切换指定页签需要使用 TabsController，TabsController 是 Tabs 组件的控制器，用于控制 Tabs 组件进行页签切换。通过 TabsController 的 changeIndex 方法来实现跳转至指定索引值对应的 TabContent 内容。</p>
<figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Entry</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line">struct <span class="title class_">Index</span> &#123;</span><br><span class="line">  <span class="meta">@State</span> <span class="attr">currentIndex</span>: <span class="built_in">number</span> = <span class="number">0</span></span><br><span class="line">  <span class="keyword">private</span> <span class="attr">imgUrlArr</span>: <span class="title class_">Array</span>&lt;<span class="built_in">string</span>&gt; = [</span><br><span class="line">    <span class="string">&#x27;https://gitee.com/zch0304/images/raw/master/note/tab/tab_home_sel.png&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;https://gitee.com/zch0304/images/raw/master/note/tab/tab_home_nor.png&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;https://gitee.com/zch0304/images/raw/master/note/tab/tab_recommend_sel.png&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;https://gitee.com/zch0304/images/raw/master/note/tab/tab_recommend_nor.png&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;https://gitee.com/zch0304/images/raw/master/note/tab/tab_discover_sel.png&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;https://gitee.com/zch0304/images/raw/master/note/tab/tab_discover_nor.png&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;https://gitee.com/zch0304/images/raw/master/note/tab/tab_mine_sel.png&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;https://gitee.com/zch0304/images/raw/master/note/tab/tab_mine_nor.png&#x27;</span>,</span><br><span class="line">  ]</span><br><span class="line">  <span class="keyword">private</span> controller = <span class="keyword">new</span> <span class="title class_">TabsController</span>()</span><br><span class="line"></span><br><span class="line">  <span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">Tabs</span>(&#123; <span class="attr">barPosition</span>: <span class="title class_">BarPosition</span>.<span class="property">End</span>, <span class="attr">controller</span>: <span class="variable language_">this</span>.<span class="property">controller</span> &#125;) &#123;</span><br><span class="line">      <span class="title class_">TabContent</span>() &#123;</span><br><span class="line">        <span class="title class_">Text</span>(<span class="string">&#x27;首页的内容&#x27;</span>).<span class="title function_">fontSize</span>(<span class="number">30</span>)</span><br><span class="line">      &#125;</span><br><span class="line">      .<span class="title function_">tabBar</span>(<span class="variable language_">this</span>.<span class="title class_">TabBuilder</span>(<span class="string">&#x27;首页&#x27;</span>, <span class="number">0</span>, <span class="variable language_">this</span>.<span class="property">imgUrlArr</span>[<span class="number">0</span>], <span class="variable language_">this</span>.<span class="property">imgUrlArr</span>[<span class="number">1</span>]))</span><br><span class="line"></span><br><span class="line">      <span class="title class_">TabContent</span>() &#123;</span><br><span class="line">        <span class="title class_">Text</span>(<span class="string">&#x27;推荐的内容&#x27;</span>).<span class="title function_">fontSize</span>(<span class="number">30</span>)</span><br><span class="line">      &#125;</span><br><span class="line">      .<span class="title function_">tabBar</span>(<span class="variable language_">this</span>.<span class="title class_">TabBuilder</span>(<span class="string">&#x27;推荐&#x27;</span>, <span class="number">1</span>, <span class="variable language_">this</span>.<span class="property">imgUrlArr</span>[<span class="number">2</span>], <span class="variable language_">this</span>.<span class="property">imgUrlArr</span>[<span class="number">3</span>]))</span><br><span class="line"></span><br><span class="line">      <span class="title class_">TabContent</span>() &#123;</span><br><span class="line">        <span class="title class_">Text</span>(<span class="string">&#x27;发现的内容&#x27;</span>).<span class="title function_">fontSize</span>(<span class="number">30</span>)</span><br><span class="line">      &#125;</span><br><span class="line">      .<span class="title function_">tabBar</span>(<span class="variable language_">this</span>.<span class="title class_">TabBuilder</span>(<span class="string">&#x27;发现&#x27;</span>, <span class="number">2</span>, <span class="variable language_">this</span>.<span class="property">imgUrlArr</span>[<span class="number">4</span>], <span class="variable language_">this</span>.<span class="property">imgUrlArr</span>[<span class="number">5</span>]))</span><br><span class="line"></span><br><span class="line">      <span class="title class_">TabContent</span>() &#123;</span><br><span class="line">        <span class="title class_">Text</span>(<span class="string">&#x27;我的内容&#x27;</span>).<span class="title function_">fontSize</span>(<span class="number">30</span>)</span><br><span class="line">      &#125;</span><br><span class="line">      .<span class="title function_">tabBar</span>(<span class="variable language_">this</span>.<span class="title class_">TabBuilder</span>(<span class="string">&#x27;我的&#x27;</span>, <span class="number">3</span>, <span class="variable language_">this</span>.<span class="property">imgUrlArr</span>[<span class="number">6</span>], <span class="variable language_">this</span>.<span class="property">imgUrlArr</span>[<span class="number">7</span>]))</span><br><span class="line">    &#125;</span><br><span class="line">    .<span class="title function_">backgroundColor</span>(<span class="string">&#x27;#eee&#x27;</span>)</span><br><span class="line">    .<span class="title function_">onChange</span>(<span class="function">(<span class="params">index: <span class="built_in">number</span></span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="variable language_">this</span>.<span class="title function_">changePage</span>(index)</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 自定义导航页签的样式</span></span><br><span class="line">  <span class="meta">@Builder</span></span><br><span class="line">  <span class="title class_">TabBuilder</span>(<span class="attr">title</span>: <span class="built_in">string</span>, <span class="attr">targetIndex</span>: <span class="built_in">number</span>, <span class="attr">selImg</span>: <span class="built_in">string</span>, <span class="attr">norImg</span>: <span class="built_in">string</span>) &#123;</span><br><span class="line">    <span class="title class_">Column</span>() &#123;</span><br><span class="line">      <span class="title class_">Image</span>(<span class="variable language_">this</span>.<span class="property">currentIndex</span> == targetIndex ? selImg : norImg)</span><br><span class="line">        .<span class="title function_">size</span>(&#123; <span class="attr">width</span>: <span class="number">25</span>, <span class="attr">height</span>: <span class="number">25</span> &#125;)</span><br><span class="line">      <span class="title class_">Text</span>(title)</span><br><span class="line">        .<span class="title function_">fontColor</span>(<span class="variable language_">this</span>.<span class="property">currentIndex</span> == targetIndex ? <span class="string">&#x27;#1296db&#x27;</span> : <span class="string">&#x27;#707070&#x27;</span>)</span><br><span class="line">        .<span class="title function_">margin</span>(&#123; <span class="attr">top</span>: <span class="number">5</span> &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">    .<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">    .<span class="title function_">height</span>(<span class="number">50</span>)</span><br><span class="line">    .<span class="title function_">justifyContent</span>(<span class="title class_">FlexAlign</span>.<span class="property">Center</span>)</span><br><span class="line">    .<span class="title function_">onClick</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">      <span class="variable language_">this</span>.<span class="title function_">changePage</span>(targetIndex)</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">changePage</span>(<span class="params">pageIndex: <span class="built_in">number</span></span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">currentIndex</span> = pageIndex</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">controller</span>.<span class="title function_">changeIndex</span>(pageIndex)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<img data-src="https://gitee.com/zch0304/images/raw/master/note/1719321422435.jpg" style="zoom:50%;" /> 

<h5 id="Tabs-页面模块化"><a href="#Tabs-页面模块化" class="headerlink" title="Tabs 页面模块化"></a>Tabs 页面模块化</h5><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">HomePage</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;./tabs/HomePage&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">RecommendPage</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;./tabs/RecommendPage&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">DiscoveryPage</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;./tabs/DiscoveryPage&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">MinePage</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;./tabs/MinePage&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="meta">@Entry</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line">struct <span class="title class_">Index</span> &#123;</span><br><span class="line">  <span class="meta">@State</span> <span class="attr">currentIndex</span>: <span class="built_in">number</span> = <span class="number">0</span></span><br><span class="line">  <span class="keyword">private</span> <span class="attr">imgUrlArr</span>: <span class="title class_">Array</span>&lt;<span class="built_in">string</span>&gt; = [</span><br><span class="line">    <span class="string">&#x27;https://gitee.com/zch0304/images/raw/master/note/tab/tab_home_sel.png&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;https://gitee.com/zch0304/images/raw/master/note/tab/tab_home_nor.png&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;https://gitee.com/zch0304/images/raw/master/note/tab/tab_recommend_sel.png&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;https://gitee.com/zch0304/images/raw/master/note/tab/tab_recommend_nor.png&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;https://gitee.com/zch0304/images/raw/master/note/tab/tab_discover_sel.png&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;https://gitee.com/zch0304/images/raw/master/note/tab/tab_discover_nor.png&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;https://gitee.com/zch0304/images/raw/master/note/tab/tab_mine_sel.png&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;https://gitee.com/zch0304/images/raw/master/note/tab/tab_mine_nor.png&#x27;</span>,</span><br><span class="line">  ]</span><br><span class="line">  <span class="keyword">private</span> controller = <span class="keyword">new</span> <span class="title class_">TabsController</span>()</span><br><span class="line"></span><br><span class="line">  <span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">Tabs</span>(&#123; <span class="attr">barPosition</span>: <span class="title class_">BarPosition</span>.<span class="property">End</span>, <span class="attr">controller</span>: <span class="variable language_">this</span>.<span class="property">controller</span> &#125;) &#123;</span><br><span class="line">      <span class="title class_">TabContent</span>() &#123;</span><br><span class="line">        <span class="title class_">HomePage</span>()</span><br><span class="line">      &#125;</span><br><span class="line">      .<span class="title function_">tabBar</span>(<span class="variable language_">this</span>.<span class="title class_">TabBuilder</span>(<span class="string">&#x27;首页&#x27;</span>, <span class="number">0</span>, <span class="variable language_">this</span>.<span class="property">imgUrlArr</span>[<span class="number">0</span>], <span class="variable language_">this</span>.<span class="property">imgUrlArr</span>[<span class="number">1</span>]))</span><br><span class="line"></span><br><span class="line">      <span class="title class_">TabContent</span>() &#123;</span><br><span class="line">        <span class="title class_">RecommendPage</span>()</span><br><span class="line">      &#125;</span><br><span class="line">      .<span class="title function_">tabBar</span>(<span class="variable language_">this</span>.<span class="title class_">TabBuilder</span>(<span class="string">&#x27;推荐&#x27;</span>, <span class="number">1</span>, <span class="variable language_">this</span>.<span class="property">imgUrlArr</span>[<span class="number">2</span>], <span class="variable language_">this</span>.<span class="property">imgUrlArr</span>[<span class="number">3</span>]))</span><br><span class="line"></span><br><span class="line">      <span class="title class_">TabContent</span>() &#123;</span><br><span class="line">        <span class="title class_">DiscoveryPage</span>()</span><br><span class="line">      &#125;</span><br><span class="line">      .<span class="title function_">tabBar</span>(<span class="variable language_">this</span>.<span class="title class_">TabBuilder</span>(<span class="string">&#x27;发现&#x27;</span>, <span class="number">2</span>, <span class="variable language_">this</span>.<span class="property">imgUrlArr</span>[<span class="number">4</span>], <span class="variable language_">this</span>.<span class="property">imgUrlArr</span>[<span class="number">5</span>]))</span><br><span class="line"></span><br><span class="line">      <span class="title class_">TabContent</span>() &#123;</span><br><span class="line">        <span class="title class_">MinePage</span>()</span><br><span class="line">      &#125;</span><br><span class="line">      .<span class="title function_">tabBar</span>(<span class="variable language_">this</span>.<span class="title class_">TabBuilder</span>(<span class="string">&#x27;我的&#x27;</span>, <span class="number">3</span>, <span class="variable language_">this</span>.<span class="property">imgUrlArr</span>[<span class="number">6</span>], <span class="variable language_">this</span>.<span class="property">imgUrlArr</span>[<span class="number">7</span>]))</span><br><span class="line">    &#125;</span><br><span class="line">    .<span class="title function_">backgroundColor</span>(<span class="string">&#x27;#eee&#x27;</span>)</span><br><span class="line">    .<span class="title function_">onChange</span>(<span class="function">(<span class="params">index: <span class="built_in">number</span></span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="variable language_">this</span>.<span class="title function_">changePage</span>(index)</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 自定义导航页签的样式</span></span><br><span class="line">  <span class="meta">@Builder</span></span><br><span class="line">  <span class="title class_">TabBuilder</span>(<span class="attr">title</span>: <span class="built_in">string</span>, <span class="attr">targetIndex</span>: <span class="built_in">number</span>, <span class="attr">selImg</span>: <span class="built_in">string</span>, <span class="attr">norImg</span>: <span class="built_in">string</span>) &#123;</span><br><span class="line">    <span class="title class_">Column</span>() &#123;</span><br><span class="line">      <span class="title class_">Image</span>(<span class="variable language_">this</span>.<span class="property">currentIndex</span> == targetIndex ? selImg : norImg)</span><br><span class="line">        .<span class="title function_">size</span>(&#123; <span class="attr">width</span>: <span class="number">25</span>, <span class="attr">height</span>: <span class="number">25</span> &#125;)</span><br><span class="line">      <span class="title class_">Text</span>(title)</span><br><span class="line">        .<span class="title function_">fontColor</span>(<span class="variable language_">this</span>.<span class="property">currentIndex</span> == targetIndex ? <span class="string">&#x27;#1296db&#x27;</span> : <span class="string">&#x27;#707070&#x27;</span>)</span><br><span class="line">        .<span class="title function_">margin</span>(&#123; <span class="attr">top</span>: <span class="number">5</span> &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">    .<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">    .<span class="title function_">height</span>(<span class="number">50</span>)</span><br><span class="line">    .<span class="title function_">justifyContent</span>(<span class="title class_">FlexAlign</span>.<span class="property">Center</span>)</span><br><span class="line">    .<span class="title function_">onClick</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">      <span class="variable language_">this</span>.<span class="title function_">changePage</span>(targetIndex)</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">changePage</span>(<span class="params">pageIndex: <span class="built_in">number</span></span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">currentIndex</span> = pageIndex</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">controller</span>.<span class="title function_">changeIndex</span>(pageIndex)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">AppBar</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;../widget/AppBar&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">export</span> struct <span class="title class_">HomePage</span> &#123;</span><br><span class="line">  <span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">Column</span>() &#123;</span><br><span class="line">      <span class="title class_">AppBar</span>(&#123; <span class="attr">title</span>: <span class="string">&#x27;首页&#x27;</span> &#125;)</span><br><span class="line">    &#125;.<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>).<span class="title function_">height</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">AppBar</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;../widget/AppBar&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">export</span> struct <span class="title class_">RecommendPage</span> &#123;</span><br><span class="line">  <span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">Column</span>() &#123;</span><br><span class="line">      <span class="title class_">AppBar</span>(&#123; <span class="attr">title</span>: <span class="string">&#x27;推荐&#x27;</span> &#125;)</span><br><span class="line">    &#125;.<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>).<span class="title function_">height</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">AppBar</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;../widget/AppBar&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">export</span> struct <span class="title class_">DiscoveryPage</span> &#123;</span><br><span class="line">  <span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">Column</span>() &#123;</span><br><span class="line">      <span class="title class_">AppBar</span>(&#123; <span class="attr">title</span>: <span class="string">&#x27;发现&#x27;</span> &#125;)</span><br><span class="line">    &#125;.<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>).<span class="title function_">height</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">AppBar</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;../widget/AppBar&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">export</span> struct <span class="title class_">MinePage</span> &#123;</span><br><span class="line">  <span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">Column</span>() &#123;</span><br><span class="line">      <span class="title class_">AppBar</span>(&#123; <span class="attr">title</span>: <span class="string">&#x27;我的&#x27;</span> &#125;)</span><br><span class="line">    &#125;.<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>).<span class="title function_">height</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">export</span> struct <span class="title class_">AppBar</span> &#123;</span><br><span class="line">  <span class="attr">title</span>: <span class="built_in">string</span> = <span class="string">&quot;&quot;</span></span><br><span class="line"></span><br><span class="line">  <span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">Text</span>(<span class="variable language_">this</span>.<span class="property">title</span>)</span><br><span class="line">      .<span class="title function_">size</span>(&#123; <span class="attr">width</span>: <span class="string">&#x27;100%&#x27;</span>, <span class="attr">height</span>: <span class="number">50</span> &#125;)</span><br><span class="line">      .<span class="title function_">backgroundColor</span>(<span class="string">&#x27;#d81e06&#x27;</span>)</span><br><span class="line">      .<span class="title function_">fontColor</span>(<span class="string">&#x27;#ffffff&#x27;</span>)</span><br><span class="line">      .<span class="title function_">textAlign</span>(<span class="title class_">TextAlign</span>.<span class="property">Center</span>)</span><br><span class="line">      .<span class="title function_">fontSize</span>(<span class="number">18</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<img data-src="https://gitee.com/zch0304/images/raw/master/note/1719323465787.jpg" style="zoom:50%;" /> 

<h3 id="页面路由（router）"><a href="#页面路由（router）" class="headerlink" title="页面路由（router）"></a>页面路由（router）</h3><p>页面路由指在应用程序中实现不同页面之间的跳转和数据传递。HarmonyOS 提供了 Router 模块，通过不同的 url 地址，可以方便地进行页面路由，轻松地访问不同的页面 。</p>
<p>Router 适用于模块间与模块内页面切换，通过每个页面的 url 实现模块间解耦。模块内页面跳转时，为了实现更好的转场动效场景不建议使用该模块，推荐使用 <span class="exturl" data-url="aHR0cHM6Ly9kZXZlbG9wZXIuaHVhd2VpLmNvbS9jb25zdW1lci9jbi9kb2MvaGFybW9ueW9zLWd1aWRlcy9hcmt0cy1uYXZpZ2F0aW9uLW5hdmlnYXRpb24tMDAwMDAwMTc3NDEyMDE1MA==">Navigation<i class="fa fa-external-link-alt"></i></span>。</p>
<h4 id="路由跳转的几种方法"><a href="#路由跳转的几种方法" class="headerlink" title="路由跳转的几种方法"></a>路由跳转的几种方法</h4><p>Router 模块提供了两种跳转模式，分别是 router.pushUrl() 和 router.replaceUrl()。这两种模式决定了目标页是否会替换当前页。</p>
<ul>
<li><strong>pushUrl</strong>：目标页不会替换当前页，而是压入页面栈。这样可以保留当前页的状态，并且可以通过返回键或者调用 router.back() 方法返回到当前页。</li>
<li><strong>replaceUrl</strong>：目标页会替换当前页，并销毁当前页。这样可以释放当前页的资源，并且无法返回到当前页。</li>
</ul>
<blockquote>
<p>页面栈的最大容量为 <strong>32</strong> 个页面。如果超过这个限制，可以调用 <strong>router.clear()</strong> 方法清空历史页面栈，释放内存空间。</p>
</blockquote>
<p>同时，Router 模块提供了两种实例模式，分别是 Standard 和 Single。这两种模式决定了目标 url 是否会对应多个实例。</p>
<ul>
<li><strong>Standard</strong>：标准实例模式，也是默认情况下的实例模式。每次调用该方法都会新建一个目标页，并压入栈顶。</li>
<li><strong>Single</strong>：单实例模式。即如果目标页的 url 在页面栈中已经存在同 url 页面，则离栈顶最近的同 url 页面会被移动到栈顶，并重新加载；如果目标页的 url 在页面栈中不存在同 url 页面，则按照标准模式跳转。</li>
</ul>
<h5 id="pushUrl-Standard模式"><a href="#pushUrl-Standard模式" class="headerlink" title="pushUrl + Standard模式"></a>pushUrl + Standard模式</h5><p>希望从主页点击一个按钮，跳转到另一个页面。同时，需要保留主页在页面栈中，以便返回时恢复状态。这种场景下，可以使用 pushUrl() 方法，并且使用 Standard 实例模式（或者省略）。</p>
<figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> router <span class="keyword">from</span> <span class="string">&#x27;@ohos.router&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="meta">@Entry</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line">struct <span class="title class_">Index</span> &#123;</span><br><span class="line">  <span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">Column</span>() &#123;</span><br><span class="line">      <span class="title class_">Button</span>(<span class="string">&quot;新闻页&quot;</span>).<span class="title function_">onClick</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="title function_">onJumpClick</span>()</span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;.<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>).<span class="title function_">height</span>(<span class="string">&#x27;100%&#x27;</span>).<span class="title function_">justifyContent</span>(<span class="title class_">FlexAlign</span>.<span class="property">Center</span>)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">onJumpClick</span>(<span class="params"></span>) &#123;</span><br><span class="line">    router.<span class="title function_">pushUrl</span>(&#123; <span class="attr">url</span>: <span class="string">&#x27;pages/News&#x27;</span> &#125;, router.<span class="property">RouterMode</span>.<span class="property">Standard</span>, <span class="function">(<span class="params">err</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">if</span> (err) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">`Invoke pushUrl failed, code is <span class="subst">$&#123;err.code&#125;</span>, message is <span class="subst">$&#123;err.message&#125;</span>`</span>)</span><br><span class="line">        <span class="keyword">return</span></span><br><span class="line">      &#125;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">info</span>(<span class="string">&#x27;Invoke pushUrl succeeded.&#x27;</span>);</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="replaceUrl-Standard模式"><a href="#replaceUrl-Standard模式" class="headerlink" title="replaceUrl+ Standard模式"></a>replaceUrl+ Standard模式</h5><p>有一个登录页（Login）和一个个人中心页（Profile），希望从登录页成功登录后，跳转到个人中心页。同时，销毁登录页，在返回时直接退出应用。这种场景下，可以使用 replaceUrl() 方法，并且使用 Standard 实例模式（或者省略）。</p>
<figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> router <span class="keyword">from</span> <span class="string">&#x27;@ohos.router&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="meta">@Entry</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line">struct <span class="title class_">Login</span> &#123;</span><br><span class="line">  <span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">Column</span>() &#123;</span><br><span class="line">      <span class="title class_">Button</span>(<span class="string">&quot;个人中心页&quot;</span>).<span class="title function_">onClick</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="title function_">onJumpClick</span>()</span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;.<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>).<span class="title function_">height</span>(<span class="string">&#x27;100%&#x27;</span>).<span class="title function_">justifyContent</span>(<span class="title class_">FlexAlign</span>.<span class="property">Center</span>)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">onJumpClick</span>(<span class="params"></span>) &#123;</span><br><span class="line">    router.<span class="title function_">replaceUrl</span>(&#123; <span class="attr">url</span>: <span class="string">&#x27;pages/Profile&#x27;</span> &#125;, router.<span class="property">RouterMode</span>.<span class="property">Standard</span>, <span class="function">(<span class="params">err</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">if</span> (err) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">`Invoke pushUrl failed, code is <span class="subst">$&#123;err.code&#125;</span>, message is <span class="subst">$&#123;err.message&#125;</span>`</span>)</span><br><span class="line">        <span class="keyword">return</span></span><br><span class="line">      &#125;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">info</span>(<span class="string">&#x27;Invoke pushUrl succeeded.&#x27;</span>);</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="pushUrl-Single模式"><a href="#pushUrl-Single模式" class="headerlink" title="pushUrl + Single模式"></a>pushUrl + Single模式</h5><p>有一个设置页（Setting）和一个主题切换页（Theme），希望从设置页点击主题选项，跳转到主题切换页。同时，需要保证每次只有一个主题切换页存在于页面栈中，在返回时直接回到设置页。这种场景下，可以使用 pushUrl() 方法，并且使用 Single 实例模式。</p>
<h5 id="replaceUrl-Single模式"><a href="#replaceUrl-Single模式" class="headerlink" title="replaceUrl + Single模式"></a>replaceUrl + Single模式</h5><p>有一个搜索结果列表页（SearchResult）和一个搜索结果详情页（SearchDetail），希望从搜索结果列表页点击某一项结果，跳转到搜索结果详情页。同时，如果该结果已经被查看过，则不需要再新建一个详情页，而是直接跳转到已经存在的详情页。这种场景下，可以使用 replaceUrl() 方法，并且使用 Single 实例模式。</p>
<h4 id="路由跳转传值"><a href="#路由跳转传值" class="headerlink" title="路由跳转传值"></a>路由跳转传值</h4><p>如果需要在跳转时传递一些数据给目标页，则可以在调用 Router 模块的方法时，添加一个 params 属性，并指定一个对象作为参数。例如：</p>
<figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">class</span> <span class="title class_">DataModel</span> &#123;</span><br><span class="line">  <span class="attr">id</span>: <span class="built_in">number</span> = <span class="number">0</span></span><br><span class="line">  <span class="attr">info</span>: <span class="title class_">DataModelInfo</span> | <span class="literal">null</span> = <span class="literal">null</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">class</span> <span class="title class_">DataModelInfo</span> &#123;</span><br><span class="line">  <span class="attr">name</span>: <span class="built_in">string</span> | <span class="literal">null</span> = <span class="literal">null</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> router <span class="keyword">from</span> <span class="string">&#x27;@ohos.router&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">DataModel</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;../model/DataModel&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="meta">@Entry</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line">struct <span class="title class_">Index</span> &#123;</span><br><span class="line">  <span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">Column</span>() &#123;</span><br><span class="line">      <span class="title class_">Button</span>(<span class="string">&quot;新闻页&quot;</span>).<span class="title function_">onClick</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="title function_">onJumpClick</span>()</span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;.<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>).<span class="title function_">height</span>(<span class="string">&#x27;100%&#x27;</span>).<span class="title function_">justifyContent</span>(<span class="title class_">FlexAlign</span>.<span class="property">Center</span>)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">onJumpClick</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">let</span> <span class="attr">param</span>: <span class="title class_">DataModel</span> = &#123;</span><br><span class="line">      <span class="attr">id</span>: <span class="number">123</span>,</span><br><span class="line">      <span class="attr">info</span>: &#123;</span><br><span class="line">        <span class="attr">name</span>: <span class="string">&#x27;张三&#x27;</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;;</span><br><span class="line">    router.<span class="title function_">pushUrl</span>(&#123; <span class="attr">url</span>: <span class="string">&#x27;pages/News&#x27;</span>, <span class="attr">params</span>: param &#125;, <span class="function">(<span class="params">err</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">if</span> (err) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">`Invoke pushUrl failed, code is <span class="subst">$&#123;err.code&#125;</span>, message is <span class="subst">$&#123;err.message&#125;</span>`</span>)</span><br><span class="line">        <span class="keyword">return</span></span><br><span class="line">      &#125;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">info</span>(<span class="string">&#x27;Invoke pushUrl succeeded.&#x27;</span>);</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>在目标页面中，可以通过调用 Router 模块的 getParams() 方法来获取传递过来的参数。例如：</p>
<figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> router <span class="keyword">from</span> <span class="string">&#x27;@ohos.router&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">DataModel</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;../model/DataModel&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="meta">@Entry</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line">struct <span class="title class_">News</span> &#123;</span><br><span class="line">  <span class="meta">@State</span> <span class="attr">message</span>: <span class="built_in">string</span> = <span class="string">&#x27;新闻页面&#x27;</span></span><br><span class="line"></span><br><span class="line">  <span class="title function_">onPageShow</span>(): <span class="built_in">void</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> dataModel = router.<span class="title function_">getParams</span>() <span class="keyword">as</span> <span class="title class_">DataModel</span></span><br><span class="line">    <span class="keyword">const</span> id = dataModel.<span class="property">id</span></span><br><span class="line">    <span class="keyword">const</span> name = dataModel.<span class="property">info</span>?.<span class="property">name</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="页面返回"><a href="#页面返回" class="headerlink" title="页面返回"></a>页面返回</h4><p>当用户在一个页面完成操作后，通常需要返回到上一个页面或者指定页面，这就需要用到页面返回功能。在返回的过程中，可能需要将数据传递给目标页面，这就需要用到数据传递功能。</p>
<p>可以使用以下几种方式返回页面：</p>
<ul>
<li><p>方式一：返回到上一个页面。</p>
<figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> router <span class="keyword">from</span> <span class="string">&#x27;@ohos.router&#x27;</span></span><br><span class="line">router.<span class="title function_">back</span>();</span><br></pre></td></tr></table></figure>

<p>这种方式会返回到上一个页面，即上一个页面在页面栈中的位置。但是，上一个页面必须存在于页面栈中才能够返回，否则该方法将无效。</p>
</li>
<li><p>方式二：返回到指定页面。</p>
<p>返回普通页面：</p>
<figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> router <span class="keyword">from</span> <span class="string">&#x27;@ohos.router&#x27;</span></span><br><span class="line">router.<span class="title function_">back</span>(&#123;</span><br><span class="line">  <span class="attr">url</span>: <span class="string">&#x27;pages/Home&#x27;</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>返回命名路由页面：</p>
<figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> router <span class="keyword">from</span> <span class="string">&#x27;@ohos.router&#x27;</span></span><br><span class="line">router.<span class="title function_">back</span>(&#123;</span><br><span class="line">  <span class="attr">url</span>: <span class="string">&#x27;myPage&#x27;</span> <span class="comment">// myPage 为返回的命名路由页面别名</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>这种方式可以返回到指定页面，需要指定目标页面的路径。目标页面必须存在于页面栈中才能够返回。</p>
</li>
<li><p>方式三：返回到指定页面，并传递自定义参数信息。</p>
<p>返回到普通页面：</p>
<figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> router <span class="keyword">from</span> <span class="string">&#x27;@ohos.router&#x27;</span></span><br><span class="line">router.<span class="title function_">back</span>(&#123;</span><br><span class="line">  <span class="attr">url</span>: <span class="string">&#x27;pages/Home&#x27;</span>,</span><br><span class="line">  <span class="attr">params</span>: &#123;</span><br><span class="line">    <span class="attr">info</span>: <span class="string">&#x27;来自Home页&#x27;</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>返回命名路由页面：</p>
<figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> router <span class="keyword">from</span> <span class="string">&#x27;@ohos.router&#x27;</span></span><br><span class="line">router.<span class="title function_">back</span>(&#123;</span><br><span class="line">  <span class="attr">url</span>: <span class="string">&#x27;myPage&#x27;</span>, <span class="comment">// myPage 为返回的命名路由页面别名</span></span><br><span class="line">  <span class="attr">params</span>: &#123;</span><br><span class="line">    <span class="attr">info</span>: <span class="string">&#x27;来自Home页&#x27;</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>这种方式不仅可以返回到指定页面，还可以在返回的同时传递自定义参数信息。这些参数信息可以在目标页面中通过调用 router.getParams() 方法进行获取和解析。</p>
</li>
</ul>
<p>在目标页面中，在需要获取参数的位置调用 router.getParams() 方法即可，例如在 onPageShow() 生命周期回调中：</p>
<figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> router <span class="keyword">from</span> <span class="string">&#x27;@ohos.router&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="meta">@Entry</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line">struct <span class="title class_">Home</span> &#123;</span><br><span class="line">  <span class="meta">@State</span> <span class="attr">message</span>: <span class="built_in">string</span> = <span class="string">&#x27;Hello World&#x27;</span></span><br><span class="line"></span><br><span class="line">  <span class="title function_">onPageShow</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> params = router.<span class="title function_">getParams</span>() <span class="keyword">as</span> <span class="title class_">Record</span>&lt;<span class="built_in">string</span>, <span class="built_in">string</span>&gt;; <span class="comment">// 获取传递过来的参数对象</span></span><br><span class="line">    <span class="keyword">if</span> (params) &#123;</span><br><span class="line">      <span class="keyword">const</span> <span class="attr">info</span>: <span class="built_in">string</span> = params.<span class="property">info</span> <span class="keyword">as</span> <span class="built_in">string</span>; <span class="comment">// 获取 info 属性的值</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>当使用 router.back() 方法返回到指定页面时，原栈顶页面（包括）到指定页面（不包括）之间的所有页面栈都将从栈中弹出并销毁。另外，如果使用 router.back() 方法返回到原来的页面，原页面不会被重复创建，因此使用 @State 声明的变量不会重复声明，也不会触发页面的 aboutToAppear() 生命周期回调。如果需要在原页面中使用返回页面传递的自定义参数，可以在需要的位置进行参数解析。例如，在 onPageShow() 生命周期回调中进行参数解析。</p>
</blockquote>
<h4 id="页面返回前增加一个询问框"><a href="#页面返回前增加一个询问框" class="headerlink" title="页面返回前增加一个询问框"></a>页面返回前增加一个询问框</h4><p>在开发应用时，为了避免用户误操作或者丢失数据，有时候需要在用户从一个页面返回到另一个页面之前，弹出一个询问框，让用户确认是否要执行这个操作。</p>
<p><strong>系统默认询问框</strong></p>
<p>如果想要在目标界面开启页面返回询问框，需要在调用 <span class="exturl" data-url="aHR0cHM6Ly9kZXZlbG9wZXIuaHVhd2VpLmNvbS9jb25zdW1lci9jbi9kb2MvaGFybW9ueW9zLXJlZmVyZW5jZXMvanMtYXBpcy1yb3V0ZXItMDAwMDAwMTgyMDg4MDc3MyNaSC1DTl9UT1BJQ18wMDAwMDAxODExMzE3MTU4X19yb3V0ZXJiYWNr">router.back()<i class="fa fa-external-link-alt"></i></span> 方法之前，通过调用 <span class="exturl" data-url="aHR0cHM6Ly9kZXZlbG9wZXIuaHVhd2VpLmNvbS9jb25zdW1lci9jbi9kb2MvaGFybW9ueW9zLXJlZmVyZW5jZXMvanMtYXBpcy1yb3V0ZXItMDAwMDAwMTgyMDg4MDc3MyNaSC1DTl9UT1BJQ18wMDAwMDAxODExMzE3MTU4X19yb3V0ZXJzaG93YWxlcnRiZWZvcmViYWNrcGFnZTk=">router.showAlertBeforeBackPage()<i class="fa fa-external-link-alt"></i></span> 方法设置返回询问框的信息。例如，在支付页面中定义一个返回按钮的点击事件处理函数：</p>
<figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> router <span class="keyword">from</span> <span class="string">&#x27;@ohos.router&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">BusinessError</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;@ohos.base&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 定义一个返回按钮的点击事件处理函数</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">onBackClick</span>(<span class="params"></span>): <span class="built_in">void</span> &#123;</span><br><span class="line">  <span class="comment">// 调用 router.showAlertBeforeBackPage() 方法，设置返回询问框的信息</span></span><br><span class="line">  <span class="keyword">try</span> &#123;</span><br><span class="line">    router.<span class="title function_">showAlertBeforeBackPage</span>(&#123;</span><br><span class="line">      <span class="attr">message</span>: <span class="string">&#x27;您还没有完成支付，确定要返回吗？&#x27;</span> <span class="comment">// 设置询问框的内容</span></span><br><span class="line">    &#125;);</span><br><span class="line">  &#125; <span class="keyword">catch</span> (err) &#123;</span><br><span class="line">    <span class="keyword">let</span> message = (err <span class="keyword">as</span> <span class="title class_">BusinessError</span>).<span class="property">message</span></span><br><span class="line">    <span class="keyword">let</span> code = (err <span class="keyword">as</span> <span class="title class_">BusinessError</span>).<span class="property">code</span></span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">`Invoke showAlertBeforeBackPage failed, code is <span class="subst">$&#123;code&#125;</span>, message is <span class="subst">$&#123;message&#125;</span>`</span>)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 调用 router.back() 方法，返回上一个页面</span></span><br><span class="line">  router.<span class="title function_">back</span>()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>其中，router.showAlertBeforeBackPage() 方法接收一个对象作为参数，该对象包含以下属性：</p>
<ul>
<li>message：string 类型，表示询问框的内容。</li>
</ul>
<p>如果调用成功，则会在目标界面开启页面返回询问框；如果调用失败，则会抛出异常，并通过 err.code 和 err.message 获取错误码和错误信息。</p>
<p>当用户点击“返回”按钮时，会弹出确认对话框，询问用户是否确认返回。选择“取消”将停留在当前页目标页面；选择“确认”将触发 router.back() 方法，并根据参数决定如何执行跳转。</p>
<p><strong>自定义询问框</strong></p>
<p>自定义询问框的方式，可以使用<span class="exturl" data-url="aHR0cHM6Ly9kZXZlbG9wZXIuaHVhd2VpLmNvbS9jb25zdW1lci9jbi9kb2MvaGFybW9ueW9zLXJlZmVyZW5jZXMvanMtYXBpcy1wcm9tcHRhY3Rpb24tMDAwMDAwMTgyMTAwMDc0OSNaSC1DTl9UT1BJQ18wMDAwMDAxODU3OTE2MDYxX19wcm9tcHRhY3Rpb25zaG93ZGlhbG9n">弹窗<i class="fa fa-external-link-alt"></i></span>或者自定义弹窗实现。这样可以让应用界面与系统默认询问框有所区别，提高应用的用户体验度。本文以弹窗为例，介绍如何实现自定义询问框。</p>
<figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> router <span class="keyword">from</span> <span class="string">&#x27;@ohos.router&#x27;</span></span><br><span class="line"><span class="keyword">import</span> promptAction <span class="keyword">from</span> <span class="string">&#x27;@ohos.promptAction&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">BusinessError</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;@ohos.base&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">onBackClick</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="comment">// 弹出自定义的询问框</span></span><br><span class="line">  promptAction.<span class="title function_">showDialog</span>(&#123;</span><br><span class="line">    <span class="attr">message</span>: <span class="string">&#x27;您还没有完成支付，确定要返回吗？&#x27;</span>,</span><br><span class="line">    <span class="attr">buttons</span>: [</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">text</span>: <span class="string">&#x27;取消&#x27;</span>,</span><br><span class="line">        <span class="attr">color</span>: <span class="string">&#x27;#FF0000&#x27;</span></span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">text</span>: <span class="string">&#x27;确认&#x27;</span>,</span><br><span class="line">        <span class="attr">color</span>: <span class="string">&#x27;#0099FF&#x27;</span></span><br><span class="line">      &#125;</span><br><span class="line">    ]</span><br><span class="line">  &#125;).<span class="title function_">then</span>(<span class="function">(<span class="params">result:promptAction.ShowDialogSuccessResponse</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (result.<span class="property">index</span> === <span class="number">0</span>) &#123;</span><br><span class="line">      <span class="comment">// 用户点击了“取消”按钮</span></span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">info</span>(<span class="string">&#x27;User canceled the operation.&#x27;</span>)</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (result.<span class="property">index</span> === <span class="number">1</span>) &#123;</span><br><span class="line">      <span class="comment">// 用户点击了“确认”按钮</span></span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">info</span>(<span class="string">&#x27;User confirmed the operation.&#x27;</span>)</span><br><span class="line">      <span class="comment">// 调用 router.back() 方法，返回上一个页面</span></span><br><span class="line">      router.<span class="title function_">back</span>();</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;).<span class="title function_">catch</span>(<span class="function">(<span class="params">err:<span class="built_in">Error</span></span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">let</span> message = (err <span class="keyword">as</span> <span class="title class_">BusinessError</span>).<span class="property">message</span></span><br><span class="line">    <span class="keyword">let</span> code = (err <span class="keyword">as</span> <span class="title class_">BusinessError</span>).<span class="property">code</span></span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">`Invoke showDialog failed, code is <span class="subst">$&#123;code&#125;</span>, message is <span class="subst">$&#123;message&#125;</span>`</span>)</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>当用户点击“返回”按钮时，会弹出自定义的询问框，询问用户是否确认返回。选择“取消”将停留在当前页目标页面；选择“确认”将触发 router.back() 方法，并根据参数决定如何执行跳转。</p>
<h4 id="命名路由"><a href="#命名路由" class="headerlink" title="命名路由"></a>命名路由</h4><p>在开发中为了跳转到共享包 <span class="exturl" data-url="aHR0cHM6Ly9kZXZlbG9wZXIuaHVhd2VpLmNvbS9jb25zdW1lci9jbi9kb2MvaGFybW9ueW9zLWd1aWRlcy9oYXItcGFja2FnZS0wMDAwMDAxNzc0Mjc5NTcw">Har<i class="fa fa-external-link-alt"></i></span> 或者 <span class="exturl" data-url="aHR0cHM6Ly9kZXZlbG9wZXIuaHVhd2VpLmNvbS9jb25zdW1lci9jbi9kb2MvaGFybW9ueW9zLWd1aWRlcy9pbi1hcHAtaHNwLTAwMDAwMDE3NzQxMTk4OTg=">Hsp<i class="fa fa-external-link-alt"></i></span> 中的页面（即共享包中路由跳转），可以使用 <span class="exturl" data-url="aHR0cHM6Ly9kZXZlbG9wZXIuaHVhd2VpLmNvbS9jb25zdW1lci9jbi9kb2MvaGFybW9ueW9zLXJlZmVyZW5jZXMvanMtYXBpcy1yb3V0ZXItMDAwMDAwMTgyMDg4MDc3MyNaSC1DTl9UT1BJQ18wMDAwMDAxODExMzE3MTU4X19yb3V0ZXJwdXNobmFtZWRyb3V0ZTEw">router.pushNamedRoute()<i class="fa fa-external-link-alt"></i></span> 来实现。</p>
<p>在想要跳转到的共享包 Har 或者 Hsp 页面里，给 <span class="exturl" data-url="aHR0cHM6Ly9kZXZlbG9wZXIuaHVhd2VpLmNvbS9jb25zdW1lci9jbi9kb2MvaGFybW9ueW9zLWd1aWRlcy9hcmt0cy1jcmVhdGUtY3VzdG9tLWNvbXBvbmVudHMtMDAwMDAwMTgyMDk5OTU0OSNaSC1DTl9UT1BJQ18wMDAwMDAxODExMzE3MzU0X19lbnRyeW9wdGlvbnMxMA==">@Entry 修饰的自定义组件<i class="fa fa-external-link-alt"></i></span> 命名：</p>
<figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// library/src/main/ets/pages/Index.ets</span></span><br><span class="line"><span class="comment">// library 为新建共享包自定义的名字</span></span><br><span class="line"><span class="meta">@Entry</span>(&#123; <span class="attr">routeName</span>: <span class="string">&#x27;myPage&#x27;</span> &#125;)</span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">export</span> struct <span class="title class_">MyComponent</span> &#123;</span><br><span class="line">  <span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">Row</span>() &#123;</span><br><span class="line">      <span class="title class_">Column</span>() &#123;</span><br><span class="line">        <span class="title class_">Text</span>(<span class="string">&#x27;Library Page&#x27;</span>)</span><br><span class="line">          .<span class="title function_">fontSize</span>(<span class="number">50</span>)</span><br><span class="line">          .<span class="title function_">fontWeight</span>(<span class="title class_">FontWeight</span>.<span class="property">Bold</span>)</span><br><span class="line">      &#125;</span><br><span class="line">      .<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    .<span class="title function_">height</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>配置成功后需要在跳转的页面中引入命名路由的页面：</p>
<figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> router <span class="keyword">from</span> <span class="string">&#x27;@ohos.router&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">BusinessError</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;@ohos.base&#x27;</span></span><br><span class="line"><span class="keyword">import</span>(<span class="string">&#x27;@ohos/library/src/main/ets/pages/Index&#x27;</span>)  <span class="comment">// 引入共享包中的命名路由页面</span></span><br><span class="line"><span class="meta">@Entry</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line">struct <span class="title class_">Index</span> &#123;</span><br><span class="line">  <span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">Flex</span>(&#123; <span class="attr">direction</span>: <span class="title class_">FlexDirection</span>.<span class="property">Column</span>, <span class="attr">alignItems</span>: <span class="title class_">ItemAlign</span>.<span class="property">Center</span>, <span class="attr">justifyContent</span>: <span class="title class_">FlexAlign</span>.<span class="property">Center</span> &#125;) &#123;</span><br><span class="line">      <span class="title class_">Text</span>(<span class="string">&#x27;Hello World&#x27;</span>)</span><br><span class="line">        .<span class="title function_">fontSize</span>(<span class="number">50</span>)</span><br><span class="line">        .<span class="title function_">fontWeight</span>(<span class="title class_">FontWeight</span>.<span class="property">Bold</span>)</span><br><span class="line">        .<span class="title function_">margin</span>(&#123; <span class="attr">top</span>: <span class="number">20</span> &#125;)</span><br><span class="line">        .<span class="title function_">backgroundColor</span>(<span class="string">&#x27;#ccc&#x27;</span>)</span><br><span class="line">        .<span class="title function_">onClick</span>(<span class="function">() =&gt;</span> &#123; <span class="comment">// 点击跳转到其他共享包中的页面</span></span><br><span class="line">          <span class="keyword">try</span> &#123;</span><br><span class="line">            router.<span class="title function_">pushNamedRoute</span>(&#123;</span><br><span class="line">              <span class="attr">name</span>: <span class="string">&#x27;myPage&#x27;</span>,</span><br><span class="line">              <span class="attr">params</span>: &#123;</span><br><span class="line">                <span class="attr">data1</span>: <span class="string">&#x27;message&#x27;</span>,</span><br><span class="line">                <span class="attr">data2</span>: &#123;</span><br><span class="line">                  <span class="attr">data3</span>: [<span class="number">123</span>, <span class="number">456</span>, <span class="number">789</span>]</span><br><span class="line">                &#125;</span><br><span class="line">              &#125;</span><br><span class="line">            &#125;)</span><br><span class="line">          &#125; <span class="keyword">catch</span> (err) &#123;</span><br><span class="line">            <span class="keyword">let</span> message = (err <span class="keyword">as</span> <span class="title class_">BusinessError</span>).<span class="property">message</span></span><br><span class="line">            <span class="keyword">let</span> code = (err <span class="keyword">as</span> <span class="title class_">BusinessError</span>).<span class="property">code</span></span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">`pushNamedRoute failed, code is <span class="subst">$&#123;code&#125;</span>, message is <span class="subst">$&#123;message&#125;</span>`</span>);</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">    .<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">    .<span class="title function_">height</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>使用命名路由方式跳转时，需要在当前应用包的 oh-package.json5 文件中配置依赖。例如：</p>
<figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;dependencies&quot;</span>: &#123;</span><br><span class="line">   <span class="string">&quot;@ohos/library&quot;</span>: <span class="string">&quot;file:../library&quot;</span>,</span><br><span class="line">   ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</blockquote>
<h2 id="状态管理"><a href="#状态管理" class="headerlink" title="状态管理"></a>状态管理</h2><h3 id="管理组件拥有的状态"><a href="#管理组件拥有的状态" class="headerlink" title="管理组件拥有的状态"></a>管理组件拥有的状态</h3><p>@State、@Prop、@Link、@Provide、@Consume、@Observed、@ObjectLink 和 @Watch 用于管理页面级变量的状态。</p>
<table>
<thead>
<tr>
<th>装饰器</th>
<th>装饰内容</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>@State</td>
<td>基本数据类型，类，数组</td>
<td>修饰的状态数据被修改时会触发组件的 build 方法进行UI界面更新。</td>
</tr>
<tr>
<td>@Prop</td>
<td>基本数据类型</td>
<td>修改后的状态数据用于在父组件和子组件之间建立单向数据依赖关系。修改父组件关联数据时，更新当前组件的 UI。</td>
</tr>
<tr>
<td>@Link</td>
<td>基本数据类型，类，数组</td>
<td>父子组件之间的双向数据绑定，父组件的内部状态数据作为数据源，任何一方所做的修改都会反映给另一方。</td>
</tr>
<tr>
<td>@Provide</td>
<td>基本数据类型，类，数组</td>
<td>@Provide 作为数据的提供方，可以更新其子孙节点的数据，并触发页面渲染。</td>
</tr>
<tr>
<td>@Consume</td>
<td>基本数据类型，类，数组</td>
<td>@Consume 装饰的变量在感知到 @Provide 装饰的变量更新后，会触发当前自定义组件的重新渲染。</td>
</tr>
<tr>
<td>@Observed</td>
<td>类</td>
<td>@Observed 应用于类，表示该类中的数据变更被 UI 页面管理。(用不到)</td>
</tr>
<tr>
<td>@ObjectLink</td>
<td>被 @Observed 所装饰类的对象</td>
<td>装饰的状态数据被修改时，在父组件或者其它兄弟组件内与它关联的状态数据所在的组件都会更新 UI。(用不到)</td>
</tr>
<tr>
<td>@Watch</td>
<td>基本数据类型，类，数组</td>
<td>@Watch 应用于对状态变量的监听。如果开发者需要关注某个状态变量的值是否改变，可以使用 @Watch 为状态变量设置回调函数。</td>
</tr>
</tbody></table>
<h4 id="State"><a href="#State" class="headerlink" title="@State"></a>@State</h4><p>修饰的状态数据被修改时会触发组件的 build 方法进行UI界面更新。</p>
<figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Entry</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line">struct <span class="title class_">Index</span> &#123;</span><br><span class="line">  <span class="meta">@State</span> <span class="attr">count</span>: <span class="built_in">number</span> = <span class="number">0</span></span><br><span class="line"></span><br><span class="line">  <span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">Row</span>() &#123;</span><br><span class="line">      <span class="title class_">Text</span>(<span class="string">`<span class="subst">$&#123;<span class="variable language_">this</span>.count&#125;</span>`</span>).<span class="title function_">fontSize</span>(<span class="number">30</span>)</span><br><span class="line">      <span class="title class_">Box</span>(&#123; <span class="attr">count</span>: <span class="variable language_">this</span>.<span class="property">count</span>, <span class="attr">color</span>: <span class="title class_">Color</span>.<span class="property">Pink</span> &#125;).<span class="title function_">margin</span>(&#123; <span class="attr">left</span>: <span class="number">10</span> &#125;)</span><br><span class="line">      <span class="title class_">Box</span>(&#123; <span class="attr">count</span>: <span class="variable language_">this</span>.<span class="property">count</span>, <span class="attr">color</span>: <span class="title class_">Color</span>.<span class="property">Brown</span> &#125;).<span class="title function_">margin</span>(&#123; <span class="attr">left</span>: <span class="number">10</span> &#125;)</span><br><span class="line">      <span class="title class_">Button</span>() &#123;</span><br><span class="line">        <span class="title class_">Text</span>(<span class="string">&quot;+&quot;</span>).<span class="title function_">fontWeight</span>(<span class="title class_">FontWeight</span>.<span class="property">Bold</span>).<span class="title function_">fontSize</span>(<span class="number">30</span>).<span class="title function_">fontColor</span>(<span class="title class_">Color</span>.<span class="property">White</span>)</span><br><span class="line">      &#125;</span><br><span class="line">      .<span class="title function_">width</span>(<span class="number">60</span>)</span><br><span class="line">      .<span class="title function_">height</span>(<span class="number">60</span>)</span><br><span class="line">      .<span class="title function_">margin</span>(&#123; <span class="attr">left</span>: <span class="number">50</span> &#125;)</span><br><span class="line">      .<span class="title function_">onClick</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">count</span>++</span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">    .<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">    .<span class="title function_">height</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">    .<span class="title function_">backgroundColor</span>(<span class="string">&#x27;#eee&#x27;</span>)</span><br><span class="line">    .<span class="title function_">justifyContent</span>(<span class="title class_">FlexAlign</span>.<span class="property">Center</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line">struct <span class="title class_">Box</span> &#123;</span><br><span class="line">  <span class="attr">count</span>: <span class="built_in">number</span> = <span class="number">0</span></span><br><span class="line">  <span class="attr">color</span>: <span class="title class_">Color</span> = <span class="title class_">Color</span>.<span class="property">Black</span></span><br><span class="line"></span><br><span class="line">  <span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">Column</span>() &#123;</span><br><span class="line">      <span class="title class_">Text</span>(<span class="string">`<span class="subst">$&#123;<span class="variable language_">this</span>.count&#125;</span>`</span>).<span class="title function_">fontSize</span>(<span class="number">30</span>).<span class="title function_">fontColor</span>(<span class="title class_">Color</span>.<span class="property">White</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    .<span class="title function_">width</span>(<span class="number">60</span>)</span><br><span class="line">    .<span class="title function_">height</span>(<span class="number">60</span>)</span><br><span class="line">    .<span class="title function_">backgroundColor</span>(<span class="variable language_">this</span>.<span class="property">color</span>)</span><br><span class="line">    .<span class="title function_">justifyContent</span>(<span class="title class_">FlexAlign</span>.<span class="property">Center</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img data-src="https://gitee.com/zch0304/images/raw/master/note/1719480697081.jpg"> </p>
<blockquote>
<p>Index 组件的 count 改变了，不会改变 Box 组件的 count。</p>
</blockquote>
<h4 id="Prop"><a href="#Prop" class="headerlink" title="@Prop"></a>@Prop</h4><p>修改后的状态数据用于在父组件和子组件之间建立单向数据依赖关系。修改父组件关联数据时，更新当前组件的 UI。</p>
<figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Entry</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line">struct <span class="title class_">Index</span> &#123;</span><br><span class="line">  <span class="meta">@State</span> <span class="attr">count</span>: <span class="built_in">number</span> = <span class="number">0</span></span><br><span class="line"></span><br><span class="line">  <span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">Row</span>() &#123;</span><br><span class="line">      <span class="title class_">Text</span>(<span class="string">`<span class="subst">$&#123;<span class="variable language_">this</span>.count&#125;</span>`</span>).<span class="title function_">fontSize</span>(<span class="number">30</span>)</span><br><span class="line">      <span class="title class_">Box</span>(&#123; <span class="attr">count</span>: <span class="variable language_">this</span>.<span class="property">count</span>, <span class="attr">color</span>: <span class="title class_">Color</span>.<span class="property">Pink</span> &#125;).<span class="title function_">margin</span>(&#123; <span class="attr">left</span>: <span class="number">10</span> &#125;)</span><br><span class="line">      <span class="title class_">Box</span>(&#123; <span class="attr">count</span>: <span class="variable language_">this</span>.<span class="property">count</span>, <span class="attr">color</span>: <span class="title class_">Color</span>.<span class="property">Brown</span> &#125;).<span class="title function_">margin</span>(&#123; <span class="attr">left</span>: <span class="number">10</span> &#125;)</span><br><span class="line">      <span class="title class_">Button</span>() &#123;</span><br><span class="line">        <span class="title class_">Text</span>(<span class="string">&quot;+&quot;</span>).<span class="title function_">fontWeight</span>(<span class="title class_">FontWeight</span>.<span class="property">Bold</span>).<span class="title function_">fontSize</span>(<span class="number">30</span>).<span class="title function_">fontColor</span>(<span class="title class_">Color</span>.<span class="property">White</span>)</span><br><span class="line">      &#125;</span><br><span class="line">      .<span class="title function_">width</span>(<span class="number">60</span>)</span><br><span class="line">      .<span class="title function_">height</span>(<span class="number">60</span>)</span><br><span class="line">      .<span class="title function_">margin</span>(&#123; <span class="attr">left</span>: <span class="number">50</span> &#125;)</span><br><span class="line">      .<span class="title function_">onClick</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">count</span>++</span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">    .<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">    .<span class="title function_">height</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">    .<span class="title function_">backgroundColor</span>(<span class="string">&#x27;#eee&#x27;</span>)</span><br><span class="line">    .<span class="title function_">justifyContent</span>(<span class="title class_">FlexAlign</span>.<span class="property">Center</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line">struct <span class="title class_">Box</span> &#123;</span><br><span class="line">  <span class="meta">@Prop</span> <span class="attr">count</span>: <span class="built_in">number</span></span><br><span class="line">  <span class="attr">color</span>: <span class="title class_">Color</span> = <span class="title class_">Color</span>.<span class="property">Black</span></span><br><span class="line"></span><br><span class="line">  <span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">Column</span>() &#123;</span><br><span class="line">      <span class="title class_">Text</span>(<span class="string">`<span class="subst">$&#123;<span class="variable language_">this</span>.count&#125;</span>`</span>).<span class="title function_">fontSize</span>(<span class="number">30</span>).<span class="title function_">fontColor</span>(<span class="title class_">Color</span>.<span class="property">White</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    .<span class="title function_">width</span>(<span class="number">60</span>)</span><br><span class="line">    .<span class="title function_">height</span>(<span class="number">60</span>)</span><br><span class="line">    .<span class="title function_">backgroundColor</span>(<span class="variable language_">this</span>.<span class="property">color</span>)</span><br><span class="line">    .<span class="title function_">justifyContent</span>(<span class="title class_">FlexAlign</span>.<span class="property">Center</span>)</span><br><span class="line">    .<span class="title function_">onClick</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">count</span>++ <span class="comment">// 只有当前组件有效，无法改变父组件的 count</span></span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img data-src="https://gitee.com/zch0304/images/raw/master/note/1719480390745.jpg"> </p>
<blockquote>
<p>Index 组件的 count 改变了，会改变到 Box 组件的 count。但是 Box 组件的 count 改变了，不会改变到 Index 组件的 count。</p>
</blockquote>
<h4 id="Link"><a href="#Link" class="headerlink" title="@Link"></a>@Link</h4><blockquote>
<p>注意：传参使用 $。</p>
</blockquote>
<p>父子组件之间的双向数据绑定，父组件的内部状态数据作为数据源，任何一方所做的修改都会反映给另一方。</p>
<figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Entry</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line">struct <span class="title class_">Index</span> &#123;</span><br><span class="line">  <span class="meta">@State</span> <span class="attr">count</span>: <span class="built_in">number</span> = <span class="number">0</span></span><br><span class="line"></span><br><span class="line">  <span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">Row</span>() &#123;</span><br><span class="line">      <span class="title class_">Text</span>(<span class="string">`<span class="subst">$&#123;<span class="variable language_">this</span>.count&#125;</span>`</span>).<span class="title function_">fontSize</span>(<span class="number">30</span>)</span><br><span class="line">      <span class="title class_">Box</span>(&#123; <span class="attr">count</span>: $count, <span class="attr">color</span>: <span class="title class_">Color</span>.<span class="property">Pink</span> &#125;).<span class="title function_">margin</span>(&#123; <span class="attr">left</span>: <span class="number">10</span> &#125;)</span><br><span class="line">      <span class="title class_">Box</span>(&#123; <span class="attr">count</span>: $count, <span class="attr">color</span>: <span class="title class_">Color</span>.<span class="property">Brown</span> &#125;).<span class="title function_">margin</span>(&#123; <span class="attr">left</span>: <span class="number">10</span> &#125;)</span><br><span class="line">      <span class="title class_">Button</span>() &#123;</span><br><span class="line">        <span class="title class_">Text</span>(<span class="string">&quot;+&quot;</span>).<span class="title function_">fontWeight</span>(<span class="title class_">FontWeight</span>.<span class="property">Bold</span>).<span class="title function_">fontSize</span>(<span class="number">30</span>).<span class="title function_">fontColor</span>(<span class="title class_">Color</span>.<span class="property">White</span>)</span><br><span class="line">      &#125;</span><br><span class="line">      .<span class="title function_">width</span>(<span class="number">60</span>)</span><br><span class="line">      .<span class="title function_">height</span>(<span class="number">60</span>)</span><br><span class="line">      .<span class="title function_">margin</span>(&#123; <span class="attr">left</span>: <span class="number">50</span> &#125;)</span><br><span class="line">      .<span class="title function_">onClick</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">count</span>++</span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">    .<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">    .<span class="title function_">height</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">    .<span class="title function_">backgroundColor</span>(<span class="string">&#x27;#eee&#x27;</span>)</span><br><span class="line">    .<span class="title function_">justifyContent</span>(<span class="title class_">FlexAlign</span>.<span class="property">Center</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line">struct <span class="title class_">Box</span> &#123;</span><br><span class="line">  <span class="meta">@Link</span> <span class="attr">count</span>: <span class="built_in">number</span></span><br><span class="line">  <span class="attr">color</span>: <span class="title class_">Color</span> = <span class="title class_">Color</span>.<span class="property">Black</span></span><br><span class="line"></span><br><span class="line">  <span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">Column</span>() &#123;</span><br><span class="line">      <span class="title class_">Text</span>(<span class="string">`<span class="subst">$&#123;<span class="variable language_">this</span>.count&#125;</span>`</span>).<span class="title function_">fontSize</span>(<span class="number">30</span>).<span class="title function_">fontColor</span>(<span class="title class_">Color</span>.<span class="property">White</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    .<span class="title function_">width</span>(<span class="number">60</span>)</span><br><span class="line">    .<span class="title function_">height</span>(<span class="number">60</span>)</span><br><span class="line">    .<span class="title function_">backgroundColor</span>(<span class="variable language_">this</span>.<span class="property">color</span>)</span><br><span class="line">    .<span class="title function_">justifyContent</span>(<span class="title class_">FlexAlign</span>.<span class="property">Center</span>)</span><br><span class="line">    .<span class="title function_">onClick</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">count</span>++ <span class="comment">// 当前组件有效，也改变父组件的 count</span></span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img data-src="https://gitee.com/zch0304/images/raw/master/note/1719479929105.jpg"> </p>
<blockquote>
<p>Index 组件和 Box 组件的 count 相互绑定，改变一方的 count 也会改变到另一方的 count。</p>
</blockquote>
<h4 id="Provide-Consume"><a href="#Provide-Consume" class="headerlink" title="@Provide @Consume"></a>@Provide @Consume</h4><p>@Provide 和 @Consume，应用于与后代组件的双向数据同步，应用于状态数据在多个层级之间传递的场景。不同于上文提到的父子组件之间通过命名参数机制传递，@Provide 和 @Consume 摆脱参数传递机制的束缚，实现跨层级传递。</p>
<p>Index 组件调用了 SecondBox 组件，SecondBox 组件调用了 ThirdBox 组件，我们要实现的功能是 Index 组件和 ThirdBox 组件直接的数据相互绑定。</p>
<figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Entry</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line">struct <span class="title class_">Index</span> &#123;</span><br><span class="line">  <span class="meta">@Provide</span>(<span class="string">&#x27;count&#x27;</span>) <span class="attr">count</span>: <span class="built_in">number</span> = <span class="number">0</span></span><br><span class="line"></span><br><span class="line">  <span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">Row</span>() &#123;</span><br><span class="line">      <span class="title class_">Text</span>(<span class="string">`<span class="subst">$&#123;<span class="variable language_">this</span>.count&#125;</span>`</span>).<span class="title function_">fontSize</span>(<span class="number">30</span>)</span><br><span class="line">      <span class="title class_">SecondBox</span>(&#123; <span class="attr">color</span>: <span class="title class_">Color</span>.<span class="property">Pink</span> &#125;).<span class="title function_">margin</span>(&#123; <span class="attr">left</span>: <span class="number">10</span> &#125;)</span><br><span class="line">      <span class="title class_">SecondBox</span>(&#123; <span class="attr">color</span>: <span class="title class_">Color</span>.<span class="property">Brown</span> &#125;).<span class="title function_">margin</span>(&#123; <span class="attr">left</span>: <span class="number">10</span> &#125;)</span><br><span class="line">      <span class="title class_">Button</span>() &#123;</span><br><span class="line">        <span class="title class_">Text</span>(<span class="string">&quot;+&quot;</span>).<span class="title function_">fontWeight</span>(<span class="title class_">FontWeight</span>.<span class="property">Bold</span>).<span class="title function_">fontSize</span>(<span class="number">30</span>).<span class="title function_">fontColor</span>(<span class="title class_">Color</span>.<span class="property">White</span>)</span><br><span class="line">      &#125;</span><br><span class="line">      .<span class="title function_">width</span>(<span class="number">60</span>)</span><br><span class="line">      .<span class="title function_">height</span>(<span class="number">60</span>)</span><br><span class="line">      .<span class="title function_">margin</span>(&#123; <span class="attr">left</span>: <span class="number">50</span> &#125;)</span><br><span class="line">      .<span class="title function_">onClick</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">count</span>++</span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">    .<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">    .<span class="title function_">height</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">    .<span class="title function_">backgroundColor</span>(<span class="string">&#x27;#eee&#x27;</span>)</span><br><span class="line">    .<span class="title function_">justifyContent</span>(<span class="title class_">FlexAlign</span>.<span class="property">Center</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line">struct <span class="title class_">SecondBox</span> &#123;</span><br><span class="line">  <span class="attr">color</span>: <span class="title class_">Color</span> = <span class="title class_">Color</span>.<span class="property">Black</span></span><br><span class="line"></span><br><span class="line">  <span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">Column</span>() &#123;</span><br><span class="line">      <span class="title class_">ThirdBox</span>()</span><br><span class="line">    &#125;</span><br><span class="line">    .<span class="title function_">width</span>(<span class="number">60</span>)</span><br><span class="line">    .<span class="title function_">height</span>(<span class="number">60</span>)</span><br><span class="line">    .<span class="title function_">backgroundColor</span>(<span class="variable language_">this</span>.<span class="property">color</span>)</span><br><span class="line">    .<span class="title function_">justifyContent</span>(<span class="title class_">FlexAlign</span>.<span class="property">Center</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line">struct <span class="title class_">ThirdBox</span> &#123;</span><br><span class="line">  <span class="meta">@Consume</span>(<span class="string">&#x27;count&#x27;</span>) <span class="attr">count</span>: <span class="built_in">number</span></span><br><span class="line"></span><br><span class="line">  <span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">Text</span>(<span class="string">`<span class="subst">$&#123;<span class="variable language_">this</span>.count&#125;</span>`</span>).<span class="title function_">fontSize</span>(<span class="number">30</span>).<span class="title function_">fontColor</span>(<span class="title class_">Color</span>.<span class="property">White</span>)</span><br><span class="line">      .<span class="title function_">onClick</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">count</span>++</span><br><span class="line">      &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img data-src="https://gitee.com/zch0304/images/raw/master/note/1719479929105.jpg"> </p>
<blockquote>
<p>Index 组件到 ThirdBox 组件之间的 count 相互绑定。</p>
</blockquote>
<h4 id="Watch"><a href="#Watch" class="headerlink" title="@Watch"></a>@Watch</h4><p>@Watch 用于监听状态变量的变化，当状态变量变化时，@Watch 的回调方法将被调用。@Watch 在 ArkUI 框架内部判断数值有无更新使用的是严格相等（&#x3D;&#x3D;&#x3D;），遵循严格相等规范。当在严格相等为 false 的情况下，就会触发 @Watch 的回调。</p>
<p>@Watch 可用于购物车计算总价，或者实现计算器功能等。</p>
<figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Entry</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line">struct <span class="title class_">Index</span> &#123;</span><br><span class="line">  <span class="meta">@State</span> <span class="meta">@Watch</span>(<span class="string">&#x27;change&#x27;</span>) <span class="attr">count</span>: <span class="built_in">number</span> = <span class="number">1</span></span><br><span class="line">  <span class="meta">@State</span> <span class="meta">@Watch</span>(<span class="string">&#x27;change&#x27;</span>) <span class="attr">pow</span>: <span class="built_in">number</span> = <span class="number">2</span></span><br><span class="line">  <span class="meta">@State</span> <span class="attr">res</span>: <span class="built_in">number</span> = <span class="number">1</span></span><br><span class="line"></span><br><span class="line">  <span class="title function_">change</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">res</span> = <span class="title class_">Math</span>.<span class="title function_">pow</span>(<span class="variable language_">this</span>.<span class="property">count</span>, <span class="variable language_">this</span>.<span class="property">pow</span>)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">Column</span>() &#123;</span><br><span class="line">      <span class="title class_">Row</span>() &#123;</span><br><span class="line">        <span class="title class_">Text</span>(<span class="string">&#x27;基数：&#x27;</span>).<span class="title function_">fontSize</span>(<span class="number">20</span>)</span><br><span class="line">        <span class="title class_">TextInput</span>(&#123; <span class="attr">text</span>: <span class="variable language_">this</span>.<span class="property">count</span>.<span class="title function_">toString</span>() &#125;)</span><br><span class="line">          .<span class="title function_">type</span>(<span class="title class_">InputType</span>.<span class="property">Number</span>)</span><br><span class="line">          .<span class="title function_">layoutWeight</span>(<span class="number">1</span>)</span><br><span class="line">          .<span class="title function_">height</span>(<span class="number">40</span>)</span><br><span class="line">          .<span class="title function_">borderRadius</span>(<span class="number">10</span>)</span><br><span class="line">          .<span class="title function_">onChange</span>(<span class="function">(<span class="params">value</span>) =&gt;</span> &#123;</span><br><span class="line">            <span class="keyword">if</span> (value == <span class="literal">null</span> || value == <span class="string">&#x27;&#x27;</span> || value == <span class="literal">undefined</span>) &#123;</span><br><span class="line">              value = <span class="string">&#x27;0&#x27;</span></span><br><span class="line">            &#125;</span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">count</span> = <span class="built_in">parseInt</span>(value)</span><br><span class="line">          &#125;)</span><br><span class="line">          .<span class="title function_">margin</span>(&#123; <span class="attr">bottom</span>: <span class="number">20</span> &#125;)</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      <span class="title class_">Row</span>() &#123;</span><br><span class="line">        <span class="title class_">Text</span>(<span class="string">&#x27;次幂：&#x27;</span>).<span class="title function_">fontSize</span>(<span class="number">20</span>)</span><br><span class="line">        <span class="title class_">TextInput</span>(&#123; <span class="attr">text</span>: <span class="variable language_">this</span>.<span class="property">pow</span>.<span class="title function_">toString</span>() &#125;)</span><br><span class="line">          .<span class="title function_">type</span>(<span class="title class_">InputType</span>.<span class="property">Number</span>)</span><br><span class="line">          .<span class="title function_">layoutWeight</span>(<span class="number">1</span>)</span><br><span class="line">          .<span class="title function_">height</span>(<span class="number">40</span>)</span><br><span class="line">          .<span class="title function_">borderRadius</span>(<span class="number">10</span>)</span><br><span class="line">          .<span class="title function_">onChange</span>(<span class="function">(<span class="params">value</span>) =&gt;</span> &#123;</span><br><span class="line">            <span class="keyword">if</span> (value == <span class="literal">null</span> || value == <span class="string">&#x27;&#x27;</span> || value == <span class="literal">undefined</span>) &#123;</span><br><span class="line">              value = <span class="string">&#x27;0&#x27;</span></span><br><span class="line">            &#125;</span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">pow</span> = <span class="built_in">parseInt</span>(value)</span><br><span class="line">          &#125;)</span><br><span class="line">          .<span class="title function_">margin</span>(&#123; <span class="attr">bottom</span>: <span class="number">20</span> &#125;)</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      <span class="title class_">Row</span>() &#123;</span><br><span class="line">        <span class="title class_">Text</span>(<span class="string">&#x27;结果：&#x27;</span> + <span class="variable language_">this</span>.<span class="property">res</span>).<span class="title function_">fontSize</span>(<span class="number">30</span>)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    .<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">    .<span class="title function_">height</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">    .<span class="title function_">padding</span>(<span class="number">20</span>)</span><br><span class="line">    .<span class="title function_">backgroundColor</span>(<span class="string">&#x27;#eee&#x27;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img data-src="https://gitee.com/zch0304/images/raw/master/note/1719479760961.jpg"> </p>
<h3 id="管理应用拥有的状态"><a href="#管理应用拥有的状态" class="headerlink" title="管理应用拥有的状态"></a>管理应用拥有的状态</h3><h4 id="概述"><a href="#概述" class="headerlink" title="概述"></a>概述</h4><p>上一节介绍的装饰器仅能在页面内，即一个组件树上共享状态变量。如果要实现应用级的，或者多个页面的状态数据共享，就需要用到应用级别的状态管理的概念。ArkTS 根据不同特性，提供了多种应用状态管理的能力：</p>
<ul>
<li><span class="exturl" data-url="aHR0cHM6Ly9kZXZlbG9wZXIuaHVhd2VpLmNvbS9jb25zdW1lci9jbi9kb2MvaGFybW9ueW9zLWd1aWRlcy9hcmt0cy1sb2NhbHN0b3JhZ2UtMDAwMDAwMTgyMDg3OTU5Mw==">LocalStorage<i class="fa fa-external-link-alt"></i></span>：页面级UI状态存储，通常用于 <span class="exturl" data-url="aHR0cHM6Ly9kZXZlbG9wZXIuaHVhd2VpLmNvbS9jb25zdW1lci9jbi9kb2MvaGFybW9ueW9zLXJlZmVyZW5jZXMvanMtYXBpcy1hcHAtYWJpbGl0eS11aWFiaWxpdHktMDAwMDAwMTc3NDEyMDg3MA==">UIAbility<i class="fa fa-external-link-alt"></i></span> 内、页面间的状态共享。</li>
<li><span class="exturl" data-url="aHR0cHM6Ly9kZXZlbG9wZXIuaHVhd2VpLmNvbS9jb25zdW1lci9jbi9kb2MvaGFybW9ueW9zLWd1aWRlcy9hcmt0cy1hcHBzdG9yYWdlLTAwMDAwMDE3NzQyNzk2MjI=">AppStorage<i class="fa fa-external-link-alt"></i></span>：特殊的单例 LocalStorage 对象，由 UI 框架在应用程序启动时创建，为应用程序 UI 状态属性提供中央存储。</li>
<li><span class="exturl" data-url="aHR0cHM6Ly9kZXZlbG9wZXIuaHVhd2VpLmNvbS9jb25zdW1lci9jbi9kb2MvaGFybW9ueW9zLWd1aWRlcy9hcmt0cy1wZXJzaXN0c3RvcmFnZS0wMDAwMDAxNzc0MTE5OTUw">PersistentStorage<i class="fa fa-external-link-alt"></i></span>：持久化存储 UI 状态，通常和 AppStorage 配合使用，选择 AppStorage 存储的数据写入磁盘，以确保这些属性在应用程序重新启动时的值与应用程序关闭时的值相同。</li>
<li><span class="exturl" data-url="aHR0cHM6Ly9kZXZlbG9wZXIuaHVhd2VpLmNvbS9jb25zdW1lci9jbi9kb2MvaGFybW9ueW9zLWd1aWRlcy9hcmt0cy1lbnZpcm9ubWVudC0wMDAwMDAxODIwOTk5NTcz">Environment<i class="fa fa-external-link-alt"></i></span>：应用程序运行的设备的环境参数，环境参数会同步到 AppStorage 中，可以和 AppStorage 搭配使用。</li>
</ul>
<h4 id="LocalStorage：页面级-UI-状态存储"><a href="#LocalStorage：页面级-UI-状态存储" class="headerlink" title="LocalStorage：页面级 UI 状态存储"></a>LocalStorage：页面级 UI 状态存储</h4><p>LocalStorage 是页面级的 UI 状态存储，通过 @Entry 装饰器接收的参数可以在页面内共享同一个 LocalStorage 实例。LocalStorage 支持 UIAbility 实例内多个页面间状态共享。</p>
<h5 id="概述-1"><a href="#概述-1" class="headerlink" title="概述"></a>概述</h5><p>LocalStorage 是 ArkTS 为构建页面级别状态变量提供存储的内存内“数据库”。</p>
<ul>
<li>应用程序可以创建多个 LocalStorage 实例，LocalStorage 实例可以在页面内共享，也可以通过 GetShared 接口，实现跨页面、UIAbility 实例内共享。</li>
<li>组件树的根节点，即被 @Entry 装饰的 @Component，可以被分配一个 LocalStorage 实例，此组件的所有子组件实例将自动获得对该 LocalStorage 实例的访问权限。</li>
<li>被 @Component 装饰的组件最多可以访问一个 LocalStorage 实例和 <span class="exturl" data-url="aHR0cHM6Ly9kZXZlbG9wZXIuaHVhd2VpLmNvbS9jb25zdW1lci9jbi9kb2MvaGFybW9ueW9zLWd1aWRlcy9hcmt0cy1hcHBzdG9yYWdlLTAwMDAwMDE3NzQyNzk2MjI=">AppStorage<i class="fa fa-external-link-alt"></i></span>，未被 @Entry 装饰的组件不可被独立分配 LocalStorage 实例，只能接受父组件通过 @Entry 传递来的 LocalStorage 实例。一个LocalStorage 实例在组件树上可以被分配给多个组件。</li>
<li>LocalStorage 中的所有属性都是可变的。</li>
</ul>
<p>应用程序决定 LocalStorage 对象的生命周期。当应用释放最后一个指向 LocalStorage 的引用时，比如销毁最后一个自定义组件，LocalStorage 将被 JS Engine 垃圾回收。</p>
<p>LocalStorage 根据与 @Component 装饰的组件的同步类型不同，提供了两个装饰器：</p>
<ul>
<li><span class="exturl" data-url="aHR0cHM6Ly9kZXZlbG9wZXIuaHVhd2VpLmNvbS9jb25zdW1lci9jbi9kb2MvaGFybW9ueW9zLWd1aWRlcy9hcmt0cy1sb2NhbHN0b3JhZ2UtMDAwMDAwMTgyMDg3OTU5MyNaSC1DTl9UT1BJQ18wMDAwMDAxODExMzE4MTU0X19sb2NhbHN0b3JhZ2Vwcm9w">@LocalStorageProp<i class="fa fa-external-link-alt"></i></span>：@LocalStorageProp 装饰的变量与 LocalStorage 中给定属性建立单向同步关系。</li>
<li><span class="exturl" data-url="aHR0cHM6Ly9kZXZlbG9wZXIuaHVhd2VpLmNvbS9jb25zdW1lci9jbi9kb2MvaGFybW9ueW9zLWd1aWRlcy9hcmt0cy1sb2NhbHN0b3JhZ2UtMDAwMDAwMTgyMDg3OTU5MyNaSC1DTl9UT1BJQ18wMDAwMDAxODExMzE4MTU0X19sb2NhbHN0b3JhZ2VsaW5r">@LocalStorageLink<i class="fa fa-external-link-alt"></i></span>：@LocalStorageLink 装饰的变量与 LocalStorage 中给定属性建立双向同步关系。</li>
</ul>
<h5 id="限制条件"><a href="#限制条件" class="headerlink" title="限制条件"></a>限制条件</h5><ul>
<li>LocalStorage 创建后，命名属性的类型不可更改。后续调用 Set 时必须使用相同类型的值。</li>
<li>LocalStorage 是页面级存储，<span class="exturl" data-url="aHR0cHM6Ly9kZXZlbG9wZXIuaHVhd2VpLmNvbS9jb25zdW1lci9jbi9kb2MvaGFybW9ueW9zLXJlZmVyZW5jZXMvdHMtc3RhdGUtbWFuYWdlbWVudC0wMDAwMDAxODE1NzY3OTE2I1pILUNOX1RPUElDXzAwMDAwMDE4MTU3Njc5MTZfX2dldHNoYXJlZDEw">getShared<i class="fa fa-external-link-alt"></i></span> 接口仅能获取当前 Stage 通过 <span class="exturl" data-url="aHR0cHM6Ly9kZXZlbG9wZXIuaHVhd2VpLmNvbS9jb25zdW1lci9jbi9kb2MvaGFybW9ueW9zLXJlZmVyZW5jZXMvanMtYXBpcy13aW5kb3ctMDAwMDAwMTgyMDg4MDc4NSNaSC1DTl9UT1BJQ18wMDAwMDAxODExMzE3MjE4X19sb2FkY29udGVudDk=">windowStage.loadContent<i class="fa fa-external-link-alt"></i></span> 传入的 LocalStorage 实例，否则返回 undefined。例子可见 <span class="exturl" data-url="aHR0cHM6Ly9kZXZlbG9wZXIuaHVhd2VpLmNvbS9jb25zdW1lci9jbi9kb2MvaGFybW9ueW9zLWd1aWRlcy9hcmt0cy1sb2NhbHN0b3JhZ2UtMDAwMDAwMTgyMDg3OTU5MyNaSC1DTl9UT1BJQ18wMDAwMDAxODExMzE4MTU0X18lRTUlQjAlODZsb2NhbHN0b3JhZ2UlRTUlQUUlOUUlRTQlQkUlOEIlRTQlQkIlOEV1aWFiaWxpdHklRTUlODUlQjElRTQlQkElQUIlRTUlODglQjAlRTQlQjglODAlRTQlQjglQUElRTYlODglOTYlRTUlQTQlOUElRTQlQjglQUElRTglQTclODYlRTUlOUIlQkU=">将 LocalStorage 实例从 UIAbility 共享到一个或多个视图<i class="fa fa-external-link-alt"></i></span>。</li>
</ul>
<h5 id="LocalStorageProp"><a href="#LocalStorageProp" class="headerlink" title="@LocalStorageProp"></a>@LocalStorageProp</h5><p>要建立 LocalStorage 和自定义组件的联系，需要使用 @LocalStorageProp 和 @LocalStorageLink 装饰器。使用 @LocalStorageProp(key)&#x2F;@LocalStorageLink(key) 装饰组件内的变量，key 标识了 LocalStorage 的属性。</p>
<p>当自定义组件初始化的时候，@LocalStorageProp(key)&#x2F;@LocalStorageLink(key) 装饰的变量会通过给定的 key，绑定 LocalStorage 对应的属性，完成初始化。本地初始化是必要的，因为无法保证 LocalStorage 一定存在给定的 key。</p>
<p>@LocalStorageProp(key) 是和 LocalStorage 中 key 对应的属性建立<strong>单向数据同步</strong>，修改 @LocalStorageProp(key) 在本地的值，不会同步回 LocalStorage 中。相反，如果 LocalStorage 中 key 对应的属性值发生改变，例如通过 set 接口对 LocalStorage 中的值进行修改，改变会同步给 @LocalStorageProp(key)，并覆盖掉本地的值。</p>
<p><strong>装饰器使用规则说明：</strong></p>
<table>
<thead>
<tr>
<th>@LocalStorageProp变量装饰器</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>装饰器参数</td>
<td>key：常量字符串，必填（字符串需要有引号）。</td>
</tr>
<tr>
<td>允许装饰的变量类型</td>
<td>Object、class、string、number、boolean、enum类型，以及这些类型的数组。API12及以上支持Map、Set、Date类型。嵌套类型的场景请参考<span class="exturl" data-url="aHR0cHM6Ly9kZXZlbG9wZXIuaHVhd2VpLmNvbS9jb25zdW1lci9jbi9kb2MvaGFybW9ueW9zLWd1aWRlcy1WNS9hcmt0cy1sb2NhbHN0b3JhZ2UtVjUjJUU4JUE3JTgyJUU1JUFGJTlGJUU1JThGJTk4JUU1JThDJTk2JUU1JTkyJThDJUU4JUExJThDJUU0JUI4JUJBJUU4JUExJUE4JUU3JThFJUIw">观察变化和行为表现<i class="fa fa-external-link-alt"></i></span>。类型必须被指定，建议和LocalStorage中对应属性类型相同，否则会发生类型隐式转换，从而导致应用行为异常。不支持any，API12及以上支持undefined和null类型。API12及以上支持上述支持类型的联合类型，比如string | number, string | undefined 或者 ClassA | null，示例见<span class="exturl" data-url="aHR0cHM6Ly9kZXZlbG9wZXIuaHVhd2VpLmNvbS9jb25zdW1lci9jbi9kb2MvaGFybW9ueW9zLWd1aWRlcy1WNS9hcmt0cy1sb2NhbHN0b3JhZ2UtVjUjbG9jYWxzdG9yYWdlJUU2JTk0JUFGJUU2JThDJTgxJUU4JTgxJTk0JUU1JTkwJTg4JUU3JUIxJUJCJUU1JTlFJThC">LocalStorage支持联合类型<i class="fa fa-external-link-alt"></i></span>。<strong>注意</strong>当使用undefined和null的时候，建议显式指定类型，遵循TypeScript类型校验，比如：@LocalStorageProp(“AA”) a: number | null &#x3D; null是推荐的，不推荐@LocalStorageProp(“AA”) a: number &#x3D; null。</td>
</tr>
<tr>
<td>同步类型</td>
<td>单向同步：从LocalStorage的对应属性到组件的状态变量。组件本地的修改是允许的，但是LocalStorage中给定的属性一旦发生变化，将覆盖本地的修改。</td>
</tr>
<tr>
<td>被装饰变量的初始值</td>
<td>必须指定，如果LocalStorage实例中不存在属性，则用该初始值初始化该属性，并存入LocalStorage中。</td>
</tr>
</tbody></table>
<p><strong>变量的传递&#x2F;访问规则说明：</strong></p>
<table>
<thead>
<tr>
<th>传递&#x2F;访问</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>从父节点初始化和更新</td>
<td>禁止，@LocalStorageProp不支持从父节点初始化，只能从LocalStorage中key对应的属性初始化，如果没有对应key的话，将使用本地默认值初始化。</td>
</tr>
<tr>
<td>初始化子节点</td>
<td>支持，可用于初始化@State、@Link、@Prop、@Provide。</td>
</tr>
<tr>
<td>是否支持组件外访问</td>
<td>否。</td>
</tr>
</tbody></table>
<p><strong>观察变化和行为表现：</strong></p>
<p><strong>观察变化</strong></p>
<ul>
<li>当装饰的数据类型为boolean、string、number类型时，可以观察到数值的变化。</li>
<li>当装饰的数据类型为class或者Object时，可以观察到对象整体赋值和对象属性变化（详见<span class="exturl" data-url="aHR0cHM6Ly9kZXZlbG9wZXIuaHVhd2VpLmNvbS9jb25zdW1lci9jbi9kb2MvaGFybW9ueW9zLWd1aWRlcy1WNS9hcmt0cy1sb2NhbHN0b3JhZ2UtVjUjJUU0JUJCJThFdWklRTUlODYlODUlRTklODMlQTglRTQlQkQlQkYlRTclOTQlQThsb2NhbHN0b3JhZ2U=">从ui内部使用localstorage<i class="fa fa-external-link-alt"></i></span>）。</li>
<li>当装饰的对象是array时，可以观察到数组添加、删除、更新数组单元的变化。</li>
<li>当装饰的对象是Date时，可以观察到Date整体的赋值，同时可通过调用Date的接口setFullYear, setMonth, setDate, setHours, setMinutes, setSeconds, setMilliseconds, setTime, setUTCFullYear, setUTCMonth, setUTCDate, setUTCHours, setUTCMinutes, setUTCSeconds, setUTCMilliseconds 更新Date的属性。详见<span class="exturl" data-url="aHR0cHM6Ly9kZXZlbG9wZXIuaHVhd2VpLmNvbS9jb25zdW1lci9jbi9kb2MvaGFybW9ueW9zLWd1aWRlcy1WNS9hcmt0cy1sb2NhbHN0b3JhZ2UtVjUjJUU4JUEzJTg1JUU5JUE1JUIwZGF0ZSVFNyVCMSVCQiVFNSU5RSU4QiVFNSU4RiU5OCVFOSU4NyU4Rg==">装饰Date类型变量<i class="fa fa-external-link-alt"></i></span>。</li>
<li>当装饰的变量是Map时，可以观察到Map整体的赋值，同时可通过调用Map的接口set, clear, delete 更新Map的值。详见<span class="exturl" data-url="aHR0cHM6Ly9kZXZlbG9wZXIuaHVhd2VpLmNvbS9jb25zdW1lci9jbi9kb2MvaGFybW9ueW9zLWd1aWRlcy1WNS9hcmt0cy1sb2NhbHN0b3JhZ2UtVjUjJUU4JUEzJTg1JUU5JUE1JUIwbWFwJUU3JUIxJUJCJUU1JTlFJThCJUU1JThGJTk4JUU5JTg3JThG">装饰Map类型变量<i class="fa fa-external-link-alt"></i></span>。</li>
<li>当装饰的变量是Set时，可以观察到Set整体的赋值，同时可通过调用Set的接口add, clear, delete 更新Set的值。详见<span class="exturl" data-url="aHR0cHM6Ly9kZXZlbG9wZXIuaHVhd2VpLmNvbS9jb25zdW1lci9jbi9kb2MvaGFybW9ueW9zLWd1aWRlcy1WNS9hcmt0cy1sb2NhbHN0b3JhZ2UtVjUjJUU4JUEzJTg1JUU5JUE1JUIwc2V0JUU3JUIxJUJCJUU1JTlFJThCJUU1JThGJTk4JUU5JTg3JThG">装饰Set类型变量<i class="fa fa-external-link-alt"></i></span>。</li>
</ul>
<p><strong>框架行为</strong></p>
<ul>
<li>被@LocalStorageProp装饰的变量的值的变化不会同步回LocalStorage里。</li>
<li>@LocalStorageProp装饰的变量变化会使当前自定义组件中关联的组件刷新。</li>
<li>LocalStorage(key)中值的变化会引发所有被@LocalStorageProp对应key装饰的变量的变化，会覆盖@LocalStorageProp本地的改变。</li>
</ul>
<h5 id="LocalStorageLink"><a href="#LocalStorageLink" class="headerlink" title="@LocalStorageLink"></a>@LocalStorageLink</h5><p>如果需要将自定义组件的状态变量的更新同步回 LocalStorage，就需要用到 @LocalStorageLink。</p>
<p>@LocalStorageLink(key) 是和 LocalStorage 中 key 对应的属性建立<strong>双向数据同步</strong>：</p>
<ul>
<li><p>本地修改发生，该修改会被写回 LocalStorage 中。</p>
</li>
<li><p>LocalStorage 中的修改发生后，该修改会被同步到所有绑定 LocalStorage 对应 key 的属性上，包括单向（@LocalStorageProp 和通过 prop 创建的单向绑定变量）、双向（@LocalStorageLink 和通过 link 创建的双向绑定变量）变量。</p>
</li>
</ul>
<p><strong>装饰器使用规则说明：</strong></p>
<table>
<thead>
<tr>
<th>@LocalStorageLink变量装饰器</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>装饰器参数</td>
<td>key：常量字符串，必填（字符串需要有引号）。</td>
</tr>
<tr>
<td>允许装饰的变量类型</td>
<td>Object、class、string、number、boolean、enum类型，以及这些类型的数组。API12及以上支持Map、Set、Date类型。嵌套类型的场景请参考<span class="exturl" data-url="aHR0cHM6Ly9kZXZlbG9wZXIuaHVhd2VpLmNvbS9jb25zdW1lci9jbi9kb2MvaGFybW9ueW9zLWd1aWRlcy1WNS9hcmt0cy1sb2NhbHN0b3JhZ2UtVjUjJUU4JUE3JTgyJUU1JUFGJTlGJUU1JThGJTk4JUU1JThDJTk2JUU1JTkyJThDJUU4JUExJThDJUU0JUI4JUJBJUU4JUExJUE4JUU3JThFJUIw">观察变化和行为表现<i class="fa fa-external-link-alt"></i></span>。类型必须被指定，建议和LocalStorage中对应属性类型相同，否则会发生类型隐式转换，从而导致应用行为异常。不支持any，API12及以上支持undefined和null类型。API12及以上支持上述支持类型的联合类型，比如string | number, string | undefined 或者 ClassA | null，示例见<span class="exturl" data-url="aHR0cHM6Ly9kZXZlbG9wZXIuaHVhd2VpLmNvbS9jb25zdW1lci9jbi9kb2MvaGFybW9ueW9zLWd1aWRlcy1WNS9hcmt0cy1sb2NhbHN0b3JhZ2UtVjUjbG9jYWxzdG9yYWdlJUU2JTk0JUFGJUU2JThDJTgxJUU4JTgxJTk0JUU1JTkwJTg4JUU3JUIxJUJCJUU1JTlFJThC">LocalStorage支持联合类型<i class="fa fa-external-link-alt"></i></span>。<strong>注意</strong>当使用undefined和null的时候，建议显式指定类型，遵循TypeScript类型校验，比如：@LocalStorageLink(“AA”) a: number | null &#x3D; null是推荐的，不推荐@LocalStorageLink(“AA”) a: number &#x3D; null。</td>
</tr>
<tr>
<td>同步类型</td>
<td>双向同步：从LocalStorage的对应属性到自定义组件，从自定义组件到LocalStorage对应属性。</td>
</tr>
<tr>
<td>被装饰变量的初始值</td>
<td>必须指定，如果LocalStorage实例中不存在属性，则用该初始值初始化该属性，并存入LocalStorage中。</td>
</tr>
</tbody></table>
<p><strong>变量的传递&#x2F;访问规则说明：</strong></p>
<table>
<thead>
<tr>
<th>传递&#x2F;访问</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>从父节点初始化和更新</td>
<td>禁止，@LocalStorageLink不支持从父节点初始化，只能从LocalStorage中key对应的属性初始化，如果没有对应key的话，将使用本地默认值初始化。</td>
</tr>
<tr>
<td>初始化子节点</td>
<td>支持，可用于初始化@State、@Link、@Prop、@Provide。</td>
</tr>
<tr>
<td>是否支持组件外访问</td>
<td>否。</td>
</tr>
</tbody></table>
<p><strong>观察变化和行为表现：</strong></p>
<p><strong>观察变化</strong></p>
<ul>
<li>当装饰的数据类型为boolean、string、number类型时，可以观察到数值的变化。</li>
<li>当装饰的数据类型为class或者Object时，可以观察到对象整体赋值和对象属性变化（详见<span class="exturl" data-url="aHR0cHM6Ly9kZXZlbG9wZXIuaHVhd2VpLmNvbS9jb25zdW1lci9jbi9kb2MvaGFybW9ueW9zLWd1aWRlcy1WNS9hcmt0cy1sb2NhbHN0b3JhZ2UtVjUjJUU0JUJCJThFdWklRTUlODYlODUlRTklODMlQTglRTQlQkQlQkYlRTclOTQlQThsb2NhbHN0b3JhZ2U=">从ui内部使用localstorage<i class="fa fa-external-link-alt"></i></span>）。</li>
<li>当装饰的对象是array时，可以观察到数组添加、删除、更新数组单元的变化。</li>
<li>当装饰的对象是Date时，可以观察到Date整体的赋值，同时可通过调用Date的接口setFullYear, setMonth, setDate, setHours, setMinutes, setSeconds, setMilliseconds, setTime, setUTCFullYear, setUTCMonth, setUTCDate, setUTCHours, setUTCMinutes, setUTCSeconds, setUTCMilliseconds 更新Date的属性。详见<span class="exturl" data-url="aHR0cHM6Ly9kZXZlbG9wZXIuaHVhd2VpLmNvbS9jb25zdW1lci9jbi9kb2MvaGFybW9ueW9zLWd1aWRlcy1WNS9hcmt0cy1sb2NhbHN0b3JhZ2UtVjUjJUU4JUEzJTg1JUU5JUE1JUIwZGF0ZSVFNyVCMSVCQiVFNSU5RSU4QiVFNSU4RiU5OCVFOSU4NyU4Rg==">装饰Date类型变量<i class="fa fa-external-link-alt"></i></span>。</li>
<li>当装饰的变量是Map时，可以观察到Map整体的赋值，同时可通过调用Map的接口set, clear, delete 更新Map的值。详见<span class="exturl" data-url="aHR0cHM6Ly9kZXZlbG9wZXIuaHVhd2VpLmNvbS9jb25zdW1lci9jbi9kb2MvaGFybW9ueW9zLWd1aWRlcy1WNS9hcmt0cy1sb2NhbHN0b3JhZ2UtVjUjJUU4JUEzJTg1JUU5JUE1JUIwbWFwJUU3JUIxJUJCJUU1JTlFJThCJUU1JThGJTk4JUU5JTg3JThG">装饰Map类型变量<i class="fa fa-external-link-alt"></i></span>。</li>
<li>当装饰的变量是Set时，可以观察到Set整体的赋值，同时可通过调用Set的接口add, clear, delete 更新Set的值。详见<span class="exturl" data-url="aHR0cHM6Ly9kZXZlbG9wZXIuaHVhd2VpLmNvbS9jb25zdW1lci9jbi9kb2MvaGFybW9ueW9zLWd1aWRlcy1WNS9hcmt0cy1sb2NhbHN0b3JhZ2UtVjUjJUU4JUEzJTg1JUU5JUE1JUIwc2V0JUU3JUIxJUJCJUU1JTlFJThCJUU1JThGJTk4JUU5JTg3JThG">装饰Set类型变量<i class="fa fa-external-link-alt"></i></span>。</li>
</ul>
<p><strong>框架行为</strong></p>
<ol>
<li>当@LocalStorageLink(key)装饰的数值改变被观察到时，修改将被同步回LocalStorage对应属性键值key的属性中。</li>
<li>LocalStorage中属性键值key对应的数据一旦改变，属性键值key绑定的所有的数据（包括双向@LocalStorageLink和单向@LocalStorageProp）都将同步修改。</li>
<li>当@LocalStorageLink(key)装饰的数据本身是状态变量，它的改变不仅仅会同步回LocalStorage中，还会引起所属的自定义组件的重新渲染。</li>
</ol>
<h5 id="使用场景"><a href="#使用场景" class="headerlink" title="使用场景"></a>使用场景</h5><h6 id="应用逻辑使用-LocalStorage"><a href="#应用逻辑使用-LocalStorage" class="headerlink" title="应用逻辑使用 LocalStorage"></a>应用逻辑使用 LocalStorage</h6><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="attr">para</span>: <span class="title class_">Record</span>&lt;<span class="built_in">string</span>,<span class="built_in">number</span>&gt; = &#123; <span class="string">&#x27;PropA&#x27;</span>: <span class="number">47</span> &#125;;</span><br><span class="line"><span class="keyword">let</span> <span class="attr">storage</span>: <span class="title class_">LocalStorage</span> = <span class="keyword">new</span> <span class="title class_">LocalStorage</span>(para); <span class="comment">// 创建新实例并使用给定对象初始化</span></span><br><span class="line"><span class="keyword">let</span> <span class="attr">propA</span>: <span class="built_in">number</span> | <span class="literal">undefined</span> = storage.<span class="title function_">get</span>(<span class="string">&#x27;PropA&#x27;</span>) <span class="comment">// propA == 47</span></span><br><span class="line"><span class="keyword">let</span> <span class="attr">link1</span>: <span class="title class_">SubscribedAbstractProperty</span>&lt;<span class="built_in">number</span>&gt; = storage.<span class="title function_">link</span>(<span class="string">&#x27;PropA&#x27;</span>); <span class="comment">// link1.get() == 47</span></span><br><span class="line"><span class="keyword">let</span> <span class="attr">link2</span>: <span class="title class_">SubscribedAbstractProperty</span>&lt;<span class="built_in">number</span>&gt; = storage.<span class="title function_">link</span>(<span class="string">&#x27;PropA&#x27;</span>); <span class="comment">// link2.get() == 47</span></span><br><span class="line"><span class="keyword">let</span> <span class="attr">prop</span>: <span class="title class_">SubscribedAbstractProperty</span>&lt;<span class="built_in">number</span>&gt; = storage.<span class="title function_">prop</span>(<span class="string">&#x27;PropA&#x27;</span>); <span class="comment">// prop.get() == 47</span></span><br><span class="line">link1.<span class="title function_">set</span>(<span class="number">48</span>); <span class="comment">// two-way sync: link1.get() == link2.get() == prop.get() == 48</span></span><br><span class="line">prop.<span class="title function_">set</span>(<span class="number">1</span>); <span class="comment">// one-way sync: prop.get() == 1; but link1.get() == link2.get() == 48</span></span><br><span class="line">link1.<span class="title function_">set</span>(<span class="number">49</span>); <span class="comment">// two-way sync: link1.get() == link2.get() == prop.get() == 49</span></span><br></pre></td></tr></table></figure>

<h6 id="从-UI-内部使用-LocalStorage"><a href="#从-UI-内部使用-LocalStorage" class="headerlink" title="从 UI 内部使用 LocalStorage"></a>从 UI 内部使用 LocalStorage</h6><p>除了应用程序逻辑使用 LocalStorage，还可以借助 LocalStorage 相关的两个装饰器 @LocalStorageProp 和 @LocalStorageLink，在 UI 组件内部获取到 LocalStorage 实例中存储的状态变量。</p>
<p>本示例以 @LocalStorageLink 为例，展示了：</p>
<ul>
<li>使用构造函数创建 LocalStorage 实例 storage；</li>
<li>使用 @Entry 装饰器将 storage 添加到 CompA 顶层组件中；</li>
<li>@LocalStorageLink 绑定 LocalStorage 对给定的属性，建立双向数据同步。</li>
</ul>
<figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">PropB</span> &#123;</span><br><span class="line"> <span class="attr">code</span>: <span class="built_in">number</span>;</span><br><span class="line"></span><br><span class="line"> <span class="title function_">constructor</span>(<span class="params">code: <span class="built_in">number</span></span>) &#123;</span><br><span class="line">   <span class="variable language_">this</span>.<span class="property">code</span> = code;</span><br><span class="line"> &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 创建新实例并使用给定对象初始化</span></span><br><span class="line"><span class="keyword">let</span> <span class="attr">para</span>: <span class="title class_">Record</span>&lt;<span class="built_in">string</span>, <span class="built_in">number</span>&gt; = &#123; <span class="string">&#x27;PropA&#x27;</span>: <span class="number">47</span> &#125;;</span><br><span class="line"><span class="keyword">let</span> <span class="attr">storage</span>: <span class="title class_">LocalStorage</span> = <span class="keyword">new</span> <span class="title class_">LocalStorage</span>(para);</span><br><span class="line">storage.<span class="title function_">setOrCreate</span>(<span class="string">&#x27;PropB&#x27;</span>, <span class="keyword">new</span> <span class="title class_">PropB</span>(<span class="number">50</span>));</span><br><span class="line"></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line">struct <span class="title class_">Child</span> &#123;</span><br><span class="line"> <span class="comment">// @LocalStorageLink变量装饰器与LocalStorage中的&#x27;PropA&#x27;属性建立双向绑定</span></span><br><span class="line"> <span class="meta">@LocalStorageLink</span>(<span class="string">&#x27;PropA&#x27;</span>) <span class="attr">childLinkNumber</span>: <span class="built_in">number</span> = <span class="number">1</span>;</span><br><span class="line"> <span class="comment">// @LocalStorageLink变量装饰器与LocalStorage中的&#x27;PropB&#x27;属性建立双向绑定</span></span><br><span class="line"> <span class="meta">@LocalStorageLink</span>(<span class="string">&#x27;PropB&#x27;</span>) <span class="attr">childLinkObject</span>: <span class="title class_">PropB</span> = <span class="keyword">new</span> <span class="title class_">PropB</span>(<span class="number">0</span>);</span><br><span class="line"></span><br><span class="line"> <span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">   <span class="title class_">Column</span>() &#123;</span><br><span class="line">     <span class="title class_">Button</span>(<span class="string">`Child from LocalStorage <span class="subst">$&#123;<span class="variable language_">this</span>.childLinkNumber&#125;</span>`</span>) <span class="comment">// 更改将同步至LocalStorage中的&#x27;PropA&#x27;以及Parent.parentLinkNumber</span></span><br><span class="line">       .<span class="title function_">onClick</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">         <span class="variable language_">this</span>.<span class="property">childLinkNumber</span> += <span class="number">1</span>;</span><br><span class="line">       &#125;)</span><br><span class="line">     <span class="title class_">Button</span>(<span class="string">`Child from LocalStorage <span class="subst">$&#123;<span class="variable language_">this</span>.childLinkObject.code&#125;</span>`</span>) <span class="comment">// 更改将同步至LocalStorage中的&#x27;PropB&#x27;以及Parent.parentLinkObject.code</span></span><br><span class="line">       .<span class="title function_">onClick</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">         <span class="variable language_">this</span>.<span class="property">childLinkObject</span>.<span class="property">code</span> += <span class="number">1</span>;</span><br><span class="line">       &#125;)</span><br><span class="line">   &#125;</span><br><span class="line"> &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 使LocalStorage可从@Component组件访问</span></span><br><span class="line"><span class="meta">@Entry</span>(storage)</span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line">struct <span class="title class_">CompA</span> &#123;</span><br><span class="line"> <span class="comment">// @LocalStorageLink变量装饰器与LocalStorage中的&#x27;PropA&#x27;属性建立双向绑定</span></span><br><span class="line"> <span class="meta">@LocalStorageLink</span>(<span class="string">&#x27;PropA&#x27;</span>) <span class="attr">parentLinkNumber</span>: <span class="built_in">number</span> = <span class="number">1</span>;</span><br><span class="line"> <span class="comment">// @LocalStorageLink变量装饰器与LocalStorage中的&#x27;PropB&#x27;属性建立双向绑定</span></span><br><span class="line"> <span class="meta">@LocalStorageLink</span>(<span class="string">&#x27;PropB&#x27;</span>) <span class="attr">parentLinkObject</span>: <span class="title class_">PropB</span> = <span class="keyword">new</span> <span class="title class_">PropB</span>(<span class="number">0</span>);</span><br><span class="line"></span><br><span class="line"> <span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">   <span class="title class_">Column</span>(&#123; <span class="attr">space</span>: <span class="number">15</span> &#125;) &#123;</span><br><span class="line">     <span class="title class_">Button</span>(<span class="string">`Parent from LocalStorage <span class="subst">$&#123;<span class="variable language_">this</span>.parentLinkNumber&#125;</span>`</span>) <span class="comment">// initial value from LocalStorage will be 47, because &#x27;PropA&#x27; initialized already</span></span><br><span class="line">       .<span class="title function_">onClick</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">         <span class="variable language_">this</span>.<span class="property">parentLinkNumber</span> += <span class="number">1</span>;</span><br><span class="line">       &#125;)</span><br><span class="line"></span><br><span class="line">     <span class="title class_">Button</span>(<span class="string">`Parent from LocalStorage <span class="subst">$&#123;<span class="variable language_">this</span>.parentLinkObject.code&#125;</span>`</span>) <span class="comment">// initial value from LocalStorage will be 50, because &#x27;PropB&#x27; initialized already</span></span><br><span class="line">       .<span class="title function_">onClick</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">         <span class="variable language_">this</span>.<span class="property">parentLinkObject</span>.<span class="property">code</span> += <span class="number">1</span>;</span><br><span class="line">       &#125;)</span><br><span class="line">     <span class="comment">// @Component子组件自动获得对CompA LocalStorage实例的访问权限。</span></span><br><span class="line">     <span class="title class_">Child</span>()</span><br><span class="line">   &#125;</span><br><span class="line"> &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h6 id="LocalStorageProp-和-LocalStorage-单向同步的简单场景"><a href="#LocalStorageProp-和-LocalStorage-单向同步的简单场景" class="headerlink" title="@LocalStorageProp 和 LocalStorage 单向同步的简单场景"></a>@LocalStorageProp 和 LocalStorage 单向同步的简单场景</h6><p>在下面的示例中，CompA 组件和 Child 组件分别在本地创建了与 storage 的 ‘PropA’ 对应属性的单向同步的数据，我们可以看到：</p>
<ul>
<li>CompA 中对 this.storageProp1 的修改，只会在 CompA 中生效，并没有同步回 storage；</li>
<li>Child 组件中，Text 绑定的 storageProp2 依旧显示 47。</li>
</ul>
<figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 创建新实例并使用给定对象初始化</span></span><br><span class="line"><span class="keyword">let</span> <span class="attr">para</span>: <span class="title class_">Record</span>&lt;<span class="built_in">string</span>, <span class="built_in">number</span>&gt; = &#123; <span class="string">&#x27;PropA&#x27;</span>: <span class="number">47</span> &#125;;</span><br><span class="line"><span class="keyword">let</span> <span class="attr">storage</span>: <span class="title class_">LocalStorage</span> = <span class="keyword">new</span> <span class="title class_">LocalStorage</span>(para);</span><br><span class="line"><span class="comment">// 使LocalStorage可从@Component组件访问</span></span><br><span class="line"><span class="meta">@Entry</span>(storage)</span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line">struct <span class="title class_">CompA</span> &#123;</span><br><span class="line">  <span class="comment">// @LocalStorageProp变量装饰器与LocalStorage中的&#x27;PropA&#x27;属性建立单向绑定</span></span><br><span class="line">  <span class="meta">@LocalStorageProp</span>(<span class="string">&#x27;PropA&#x27;</span>) <span class="attr">storageProp1</span>: <span class="built_in">number</span> = <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">Column</span>(&#123; <span class="attr">space</span>: <span class="number">15</span> &#125;) &#123;</span><br><span class="line">      <span class="comment">// 点击后从47开始加1，只改变当前组件显示的storageProp1，不会同步到LocalStorage中</span></span><br><span class="line">      <span class="title class_">Button</span>(<span class="string">`Parent from LocalStorage <span class="subst">$&#123;<span class="variable language_">this</span>.storageProp1&#125;</span>`</span>)</span><br><span class="line">        .<span class="title function_">onClick</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">storageProp1</span> += <span class="number">1</span></span><br><span class="line">        &#125;)</span><br><span class="line">      <span class="title class_">Child</span>()</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line">struct <span class="title class_">Child</span> &#123;</span><br><span class="line">  <span class="comment">// @LocalStorageProp变量装饰器与LocalStorage中的&#x27;PropA&#x27;属性建立单向绑定</span></span><br><span class="line">  <span class="meta">@LocalStorageProp</span>(<span class="string">&#x27;PropA&#x27;</span>) <span class="attr">storageProp2</span>: <span class="built_in">number</span> = <span class="number">2</span>;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">Column</span>(&#123; <span class="attr">space</span>: <span class="number">15</span> &#125;) &#123;</span><br><span class="line">      <span class="comment">// 当CompA改变时，当前storageProp2不会改变，显示47</span></span><br><span class="line">      <span class="title class_">Text</span>(<span class="string">`Parent from LocalStorage <span class="subst">$&#123;<span class="variable language_">this</span>.storageProp2&#125;</span>`</span>)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h6 id="LocalStorageLink-和-LocalStorage-双向同步的简单场景"><a href="#LocalStorageLink-和-LocalStorage-双向同步的简单场景" class="headerlink" title="@LocalStorageLink 和 LocalStorage 双向同步的简单场景"></a>@LocalStorageLink 和 LocalStorage 双向同步的简单场景</h6><p>下面的示例展示了 @LocalStorageLink 装饰的数据和 LocalStorage 双向同步的场景：</p>
<figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 构造LocalStorage实例</span></span><br><span class="line"><span class="keyword">let</span> <span class="attr">para</span>: <span class="title class_">Record</span>&lt;<span class="built_in">string</span>, <span class="built_in">number</span>&gt; = &#123; <span class="string">&#x27;PropA&#x27;</span>: <span class="number">47</span> &#125;;</span><br><span class="line"><span class="keyword">let</span> <span class="attr">storage</span>: <span class="title class_">LocalStorage</span> = <span class="keyword">new</span> <span class="title class_">LocalStorage</span>(para);</span><br><span class="line"><span class="comment">// 调用link（api9以上）接口构造&#x27;PropA&#x27;的双向同步数据，linkToPropA 是全局变量</span></span><br><span class="line"><span class="keyword">let</span> <span class="attr">linkToPropA</span>: <span class="title class_">SubscribedAbstractProperty</span>&lt;<span class="built_in">object</span>&gt; = storage.<span class="title function_">link</span>(<span class="string">&#x27;PropA&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="meta">@Entry</span>(storage)</span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line">struct <span class="title class_">CompA</span> &#123;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// @LocalStorageLink(&#x27;PropA&#x27;)在CompA自定义组件中创建&#x27;PropA&#x27;的双向同步数据，初始值为47，因为在构造LocalStorage已经给“PropA”设置47</span></span><br><span class="line">  <span class="meta">@LocalStorageLink</span>(<span class="string">&#x27;PropA&#x27;</span>) <span class="attr">storageLink</span>: <span class="built_in">number</span> = <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">Column</span>() &#123;</span><br><span class="line">      <span class="title class_">Text</span>(<span class="string">`incr @LocalStorageLink variable`</span>)</span><br><span class="line">        <span class="comment">// 点击“incr @LocalStorageLink variable”，this.storageLink加1，改变同步回storage，全局变量linkToPropA也会同步改变</span></span><br><span class="line"></span><br><span class="line">        .<span class="title function_">onClick</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">storageLink</span> += <span class="number">1</span></span><br><span class="line">        &#125;)</span><br><span class="line"></span><br><span class="line">      <span class="comment">// 并不建议在组件内使用全局变量linkToPropA.get()，因为可能会有生命周期不同引起的错误。</span></span><br><span class="line">      <span class="title class_">Text</span>(<span class="string">`@LocalStorageLink: <span class="subst">$&#123;<span class="variable language_">this</span>.storageLink&#125;</span> - linkToPropA: <span class="subst">$&#123;linkToPropA.get()&#125;</span>`</span>)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h6 id="兄弟组件之间同步状态变量"><a href="#兄弟组件之间同步状态变量" class="headerlink" title="兄弟组件之间同步状态变量"></a>兄弟组件之间同步状态变量</h6><p>下面的示例展示了通过 @LocalStorageLink 双向同步兄弟组件之间的状态。</p>
<p>先看 Parent 自定义组件中发生的变化：</p>
<ol>
<li>点击 “playCount ${this.playCount} dec by 1”，this.playCount 减 1，修改同步回 LocalStorage 中，Child 组件中的 playCountLink 绑定的组件会同步刷新；</li>
<li>点击 “countStorage ${this.playCount} incr by 1”，调用 LocalStorage 的 set 接口，更新 LocalStorage 中 “countStorage” 对应的属性，Child 组件中的 playCountLink 绑定的组件会同步刷新；</li>
<li>Text 组件 “playCount in LocalStorage for debug ${storage.get<number>(‘countStorage’)}” 没有同步刷新，因为 storage.get<number>(‘countStorage’) 返回的是常规变量，常规变量的更新并不会引起 Text 组件的重新渲染。</li>
</ol>
<p>Child 自定义组件中的变化：</p>
<ol>
<li>playCountLink 的刷新会同步回 LocalStorage，并且引起兄弟组件和父组件相应的刷新。</li>
</ol>
<figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="attr">ls</span>: <span class="title class_">Record</span>&lt;<span class="built_in">string</span>, <span class="built_in">number</span>&gt; = &#123; <span class="string">&#x27;countStorage&#x27;</span>: <span class="number">1</span> &#125;</span><br><span class="line"><span class="keyword">let</span> <span class="attr">storage</span>: <span class="title class_">LocalStorage</span> = <span class="keyword">new</span> <span class="title class_">LocalStorage</span>(ls);</span><br><span class="line"></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line">struct <span class="title class_">Child</span> &#123;</span><br><span class="line">  <span class="comment">// 子组件实例的名字</span></span><br><span class="line">  <span class="attr">label</span>: <span class="built_in">string</span> = <span class="string">&#x27;no name&#x27;</span>;</span><br><span class="line">  <span class="comment">// 和LocalStorage中“countStorage”的双向绑定数据</span></span><br><span class="line">  <span class="meta">@LocalStorageLink</span>(<span class="string">&#x27;countStorage&#x27;</span>) <span class="attr">playCountLink</span>: <span class="built_in">number</span> = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">Row</span>() &#123;</span><br><span class="line">      <span class="title class_">Text</span>(<span class="variable language_">this</span>.<span class="property">label</span>)</span><br><span class="line">        .<span class="title function_">width</span>(<span class="number">50</span>).<span class="title function_">height</span>(<span class="number">60</span>).<span class="title function_">fontSize</span>(<span class="number">12</span>)</span><br><span class="line">      <span class="title class_">Text</span>(<span class="string">`playCountLink <span class="subst">$&#123;<span class="variable language_">this</span>.playCountLink&#125;</span>: inc by 1`</span>)</span><br><span class="line">        .<span class="title function_">onClick</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">playCountLink</span> += <span class="number">1</span>;</span><br><span class="line">        &#125;)</span><br><span class="line">        .<span class="title function_">width</span>(<span class="number">200</span>).<span class="title function_">height</span>(<span class="number">60</span>).<span class="title function_">fontSize</span>(<span class="number">12</span>)</span><br><span class="line">    &#125;.<span class="title function_">width</span>(<span class="number">300</span>).<span class="title function_">height</span>(<span class="number">60</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Entry</span>(storage)</span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line">struct <span class="title class_">Parent</span> &#123;</span><br><span class="line">  <span class="meta">@LocalStorageLink</span>(<span class="string">&#x27;countStorage&#x27;</span>) <span class="attr">playCount</span>: <span class="built_in">number</span> = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">Column</span>() &#123;</span><br><span class="line">      <span class="title class_">Row</span>() &#123;</span><br><span class="line">        <span class="title class_">Text</span>(<span class="string">&#x27;Parent&#x27;</span>)</span><br><span class="line">          .<span class="title function_">width</span>(<span class="number">50</span>).<span class="title function_">height</span>(<span class="number">60</span>).<span class="title function_">fontSize</span>(<span class="number">12</span>)</span><br><span class="line">        <span class="title class_">Text</span>(<span class="string">`playCount <span class="subst">$&#123;<span class="variable language_">this</span>.playCount&#125;</span> dec by 1`</span>)</span><br><span class="line">          .<span class="title function_">onClick</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">playCount</span> -= <span class="number">1</span>;</span><br><span class="line">          &#125;)</span><br><span class="line">          .<span class="title function_">width</span>(<span class="number">250</span>).<span class="title function_">height</span>(<span class="number">60</span>).<span class="title function_">fontSize</span>(<span class="number">12</span>)</span><br><span class="line">      &#125;.<span class="title function_">width</span>(<span class="number">300</span>).<span class="title function_">height</span>(<span class="number">60</span>)</span><br><span class="line"></span><br><span class="line">      <span class="title class_">Row</span>() &#123;</span><br><span class="line">        <span class="title class_">Text</span>(<span class="string">&#x27;LocalStorage&#x27;</span>)</span><br><span class="line">          .<span class="title function_">width</span>(<span class="number">50</span>).<span class="title function_">height</span>(<span class="number">60</span>).<span class="title function_">fontSize</span>(<span class="number">12</span>)</span><br><span class="line">        <span class="title class_">Text</span>(<span class="string">`countStorage <span class="subst">$&#123;<span class="variable language_">this</span>.playCount&#125;</span> incr by 1`</span>)</span><br><span class="line">          .<span class="title function_">onClick</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">            storage.<span class="property">set</span>&lt;<span class="built_in">number</span> | <span class="literal">undefined</span>&gt;(<span class="string">&#x27;countStorage&#x27;</span>, <span class="title class_">Number</span>(storage.<span class="property">get</span>&lt;<span class="built_in">number</span>&gt;(<span class="string">&#x27;countStorage&#x27;</span>)) + <span class="number">1</span>);</span><br><span class="line">          &#125;)</span><br><span class="line">          .<span class="title function_">width</span>(<span class="number">250</span>).<span class="title function_">height</span>(<span class="number">60</span>).<span class="title function_">fontSize</span>(<span class="number">12</span>)</span><br><span class="line">      &#125;.<span class="title function_">width</span>(<span class="number">300</span>).<span class="title function_">height</span>(<span class="number">60</span>)</span><br><span class="line"></span><br><span class="line">      <span class="title class_">Child</span>(&#123; <span class="attr">label</span>: <span class="string">&#x27;ChildA&#x27;</span> &#125;)</span><br><span class="line">      <span class="title class_">Child</span>(&#123; <span class="attr">label</span>: <span class="string">&#x27;ChildB&#x27;</span> &#125;)</span><br><span class="line"></span><br><span class="line">      <span class="title class_">Text</span>(<span class="string">`playCount in LocalStorage for debug <span class="subst">$&#123;storage.get&lt;<span class="built_in">number</span>&gt;(<span class="string">&#x27;countStorage&#x27;</span>)&#125;</span>`</span>)</span><br><span class="line">        .<span class="title function_">width</span>(<span class="number">300</span>).<span class="title function_">height</span>(<span class="number">60</span>).<span class="title function_">fontSize</span>(<span class="number">12</span>)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h6 id="将-LocalStorage-实例从-UIAbility-共享到一个或多个视图"><a href="#将-LocalStorage-实例从-UIAbility-共享到一个或多个视图" class="headerlink" title="将 LocalStorage 实例从 UIAbility 共享到一个或多个视图"></a>将 LocalStorage 实例从 UIAbility 共享到一个或多个视图</h6><p>上面的实例中，LocalStorage 的实例仅仅在一个 @Entry 装饰的组件和其所属的子组件（一个页面）中共享，如果希望其在多个视图中共享，可以在所属 UIAbility 中创建 LocalStorage 实例，并调用 windowStage.<span class="exturl" data-url="aHR0cHM6Ly9kZXZlbG9wZXIuaHVhd2VpLmNvbS9jb25zdW1lci9jbi9kb2MvaGFybW9ueW9zLXJlZmVyZW5jZXMvanMtYXBpcy13aW5kb3ctMDAwMDAwMTgyMDg4MDc4NSNaSC1DTl9UT1BJQ18wMDAwMDAxODExMzE3MjE4X19sb2FkY29udGVudDk=">loadContent<i class="fa fa-external-link-alt"></i></span>。</p>
<figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// EntryAbility.ets</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">UIAbility</span> <span class="keyword">from</span> <span class="string">&#x27;@ohos.app.ability.UIAbility&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="variable language_">window</span> <span class="keyword">from</span> <span class="string">&#x27;@ohos.window&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">class</span> <span class="title class_">EntryAbility</span> <span class="keyword">extends</span> <span class="title class_ inherited__">UIAbility</span> &#123;</span><br><span class="line">  <span class="attr">para</span>:<span class="title class_">Record</span>&lt;<span class="built_in">string</span>, <span class="built_in">number</span>&gt; = &#123; <span class="string">&#x27;PropA&#x27;</span>: <span class="number">47</span> &#125;;</span><br><span class="line">  <span class="attr">storage</span>: <span class="title class_">LocalStorage</span> = <span class="keyword">new</span> <span class="title class_">LocalStorage</span>(<span class="variable language_">this</span>.<span class="property">para</span>);</span><br><span class="line"></span><br><span class="line">  <span class="title function_">onWindowStageCreate</span>(<span class="params">windowStage: <span class="variable language_">window</span>.WindowStage</span>) &#123;</span><br><span class="line">    windowStage.<span class="title function_">loadContent</span>(<span class="string">&#x27;pages/Index&#x27;</span>, <span class="variable language_">this</span>.<span class="property">storage</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>说明：</p>
<p>在 UI 页面通过 getShared 接口获取通过 loadContent 共享的 LocalStorage 实例。</p>
<p>LocalStorage.getShared() 只在模拟器或者实机上才有效，在 Previewer 预览器中使用不生效。</p>
</blockquote>
<p>在下面的用例中，Index 页面中的 propA 通过 getShared() 方法获取到共享的 LocalStorage 实例。点击 Button 跳转到 Page 页面，点击 Change propA 改变 propA 的值，back 回 Index 页面后，页面中 propA 的值也同步修改。</p>
<figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// index.ets</span></span><br><span class="line"><span class="keyword">import</span> router <span class="keyword">from</span> <span class="string">&#x27;@ohos.router&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 通过getShared接口获取stage共享的LocalStorage实例</span></span><br><span class="line"><span class="keyword">let</span> storage = <span class="title class_">LocalStorage</span>.<span class="title function_">getShared</span>()</span><br><span class="line"></span><br><span class="line"><span class="meta">@Entry</span>(storage)</span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line">struct <span class="title class_">Index</span> &#123;</span><br><span class="line">  <span class="comment">// can access LocalStorage instance using </span></span><br><span class="line">  <span class="comment">// @LocalStorageLink/Prop decorated variables</span></span><br><span class="line">  <span class="meta">@LocalStorageLink</span>(<span class="string">&#x27;PropA&#x27;</span>) <span class="attr">propA</span>: <span class="built_in">number</span> = <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">Row</span>() &#123;</span><br><span class="line">      <span class="title class_">Column</span>() &#123;</span><br><span class="line">        <span class="title class_">Text</span>(<span class="string">`<span class="subst">$&#123;<span class="variable language_">this</span>.propA&#125;</span>`</span>)</span><br><span class="line">          .<span class="title function_">fontSize</span>(<span class="number">50</span>)</span><br><span class="line">          .<span class="title function_">fontWeight</span>(<span class="title class_">FontWeight</span>.<span class="property">Bold</span>)</span><br><span class="line">        <span class="title class_">Button</span>(<span class="string">&quot;To Page&quot;</span>)</span><br><span class="line">          .<span class="title function_">onClick</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">            router.<span class="title function_">pushUrl</span>(&#123;</span><br><span class="line">              <span class="attr">url</span>: <span class="string">&#x27;pages/Page&#x27;</span></span><br><span class="line">            &#125;)</span><br><span class="line">          &#125;)</span><br><span class="line">      &#125;</span><br><span class="line">      .<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    .<span class="title function_">height</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Page.ets</span></span><br><span class="line"><span class="keyword">import</span> router <span class="keyword">from</span> <span class="string">&#x27;@ohos.router&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> storage = <span class="title class_">LocalStorage</span>.<span class="title function_">getShared</span>()</span><br><span class="line"></span><br><span class="line"><span class="meta">@Entry</span>(storage)</span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line">struct <span class="title class_">Page</span> &#123;</span><br><span class="line">  <span class="meta">@LocalStorageLink</span>(<span class="string">&#x27;PropA&#x27;</span>) <span class="attr">propA</span>: <span class="built_in">number</span> = <span class="number">2</span>;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">Row</span>() &#123;</span><br><span class="line">      <span class="title class_">Column</span>() &#123;</span><br><span class="line">        <span class="title class_">Text</span>(<span class="string">`<span class="subst">$&#123;<span class="variable language_">this</span>.propA&#125;</span>`</span>)</span><br><span class="line">          .<span class="title function_">fontSize</span>(<span class="number">50</span>)</span><br><span class="line">          .<span class="title function_">fontWeight</span>(<span class="title class_">FontWeight</span>.<span class="property">Bold</span>)</span><br><span class="line"></span><br><span class="line">        <span class="title class_">Button</span>(<span class="string">&quot;Change propA&quot;</span>)</span><br><span class="line">          .<span class="title function_">onClick</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">propA</span> = <span class="number">100</span>;</span><br><span class="line">          &#125;)</span><br><span class="line"></span><br><span class="line">        <span class="title class_">Button</span>(<span class="string">&quot;Back Index&quot;</span>)</span><br><span class="line">          .<span class="title function_">onClick</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">            router.<span class="title function_">back</span>()</span><br><span class="line">          &#125;)</span><br><span class="line">      &#125;</span><br><span class="line">      .<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>说明：</p>
<p>对于开发者更建议使用这个方式来构建 LocalStorage 的实例，并且在创建 LocalStorage 实例的时候就写入默认值，因为默认值可以作为运行异常的备份，也可以用作页面的单元测试。</p>
</blockquote>
<h6 id="自定义组件接收LocalStorage实例"><a href="#自定义组件接收LocalStorage实例" class="headerlink" title="自定义组件接收LocalStorage实例"></a>自定义组件接收LocalStorage实例</h6><p>除了根节点可通过@Entry来接收LocalStorage实例，自定义组件（子节点）也可以通过构造参数来传递LocalStorage实例。</p>
<p>本示例以@LocalStorageLink为例，展示了：</p>
<ul>
<li>父组件中的Text，显示LocalStorage实例localStorage1中PropA的值为“PropA”。</li>
<li>Child组件中，Text绑定的PropB，显示LocalStorage实例localStorage2中PropB的值为“PropB”。</li>
</ul>
<blockquote>
<p>说明：</p>
<p>从API version 12开始，自定义组件支持接收LocalStorage实例。</p>
<p>当自定义组件作为子节点，定义了成员属性时，LocalStorage实例必须要放在第二个参数位置传递，否则会报类型不匹配的编译问题。</p>
<p>当在自定义组件中定义了属性时，暂时不支持只有一个LocalStorage实例作为入参。如果没定义属性，可以只<span class="exturl" data-url="aHR0cHM6Ly9kZXZlbG9wZXIuaHVhd2VpLmNvbS9jb25zdW1lci9jbi9kb2MvaGFybW9ueW9zLWd1aWRlcy1WNS9hcmt0cy1sb2NhbHN0b3JhZ2UtVjUjJUU1JUJEJTkzJUU4JTg3JUFBJUU1JUFFJTlBJUU0JUI5JTg5JUU3JUJCJTg0JUU0JUJCJUI2JUU2JUIyJUExJUU2JTlDJTg5JUU1JUFFJTlBJUU0JUI5JTg5JUU1JUIxJTlFJUU2JTgwJUE3JUU2JTk3JUI2JUU1JThGJUFGJUU0JUJCJUE1JUU1JThGJUFBJUU0JUJDJUEwJUU1JTg1JUE1JUU0JUI4JTgwJUU0JUI4JUFBbG9jYWxzdG9yYWdlJUU1JUFFJTlFJUU0JUJFJThCJUU0JUJEJTlDJUU0JUI4JUJBJUU1JTg1JUE1JUU1JThGJTgy">传入一个LocalStorage实例作为入参<i class="fa fa-external-link-alt"></i></span>。</p>
<p>如果定义的属性不需要从父组件初始化变量，则<span class="exturl" data-url="aHR0cHM6Ly9kZXZlbG9wZXIuaHVhd2VpLmNvbS9jb25zdW1lci9jbi9kb2MvaGFybW9ueW9zLWd1aWRlcy1WNS9hcmt0cy1sb2NhbHN0b3JhZ2UtVjUjJUU1JUJEJTkzJUU1JUFFJTlBJUU0JUI5JTg5JUU3JTlBJTg0JUU1JUIxJTlFJUU2JTgwJUE3JUU0JUI4JThEJUU5JTlDJTgwJUU4JUE2JTgxJUU0JUJCJThFJUU3JTg4JUI2JUU3JUJCJTg0JUU0JUJCJUI2JUU1JTg4JTlEJUU1JUE3JThCJUU1JThDJTk2JUU1JThGJTk4JUU5JTg3JThGJUU2JTk3JUI2JUU3JUFDJUFDJUU0JUI4JTgwJUU0JUI4JUFBJUU1JThGJTgyJUU2JTk1JUIwJUU5JTlDJTgwJUU4JUE2JTgxJUU0JUJDJUEw">第一个参数需要传{}<i class="fa fa-external-link-alt"></i></span>。</p>
<p>作为构造参数传给子组件的LocalStorage实例在初始化时就会被决定，可以通过@LocalStorageLink或者LocalStorage的API修改LocalStorage实例中保存的属性值，但LocalStorage实例自身不能被动态修改。</p>
</blockquote>
<figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="attr">localStorage1</span>: <span class="title class_">LocalStorage</span> = <span class="keyword">new</span> <span class="title class_">LocalStorage</span>();</span><br><span class="line">localStorage1.<span class="title function_">setOrCreate</span>(<span class="string">&#x27;PropA&#x27;</span>, <span class="string">&#x27;PropA&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> <span class="attr">localStorage2</span>: <span class="title class_">LocalStorage</span> = <span class="keyword">new</span> <span class="title class_">LocalStorage</span>();</span><br><span class="line">localStorage2.<span class="title function_">setOrCreate</span>(<span class="string">&#x27;PropB&#x27;</span>, <span class="string">&#x27;PropB&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="meta">@Entry</span>(localStorage1)</span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line">struct <span class="title class_">Index</span> &#123;</span><br><span class="line">  <span class="comment">// &#x27;PropA&#x27;，和localStorage1中&#x27;PropA&#x27;的双向同步</span></span><br><span class="line">  <span class="meta">@LocalStorageLink</span>(<span class="string">&#x27;PropA&#x27;</span>) <span class="title class_">PropA</span>: <span class="built_in">string</span> = <span class="string">&#x27;Hello World&#x27;</span>;</span><br><span class="line">  <span class="meta">@State</span> <span class="attr">count</span>: <span class="built_in">number</span> = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">Row</span>() &#123;</span><br><span class="line">      <span class="title class_">Column</span>() &#123;</span><br><span class="line">        <span class="title class_">Text</span>(<span class="variable language_">this</span>.<span class="property">PropA</span>)</span><br><span class="line">          .<span class="title function_">fontSize</span>(<span class="number">50</span>)</span><br><span class="line">          .<span class="title function_">fontWeight</span>(<span class="title class_">FontWeight</span>.<span class="property">Bold</span>)</span><br><span class="line">        <span class="comment">// 使用LocalStorage 实例localStorage2</span></span><br><span class="line">        <span class="title class_">Child</span>(&#123; <span class="attr">count</span>: <span class="variable language_">this</span>.<span class="property">count</span> &#125;, localStorage2)</span><br><span class="line">      &#125;</span><br><span class="line">      .<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    .<span class="title function_">height</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line">struct <span class="title class_">Child</span> &#123;</span><br><span class="line">  <span class="meta">@Link</span> <span class="attr">count</span>: <span class="built_in">number</span>;</span><br><span class="line">  <span class="comment">//  &#x27;Hello World&#x27;，和localStorage2中&#x27;PropB&#x27;的双向同步，localStorage2中没有&#x27;PropB&#x27;，则使用默认值&#x27;Hello World&#x27;</span></span><br><span class="line">  <span class="meta">@LocalStorageLink</span>(<span class="string">&#x27;PropB&#x27;</span>) <span class="title class_">PropB</span>: <span class="built_in">string</span> = <span class="string">&#x27;Hello World&#x27;</span>;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">Text</span>(<span class="variable language_">this</span>.<span class="property">PropB</span>)</span><br><span class="line">      .<span class="title function_">fontSize</span>(<span class="number">50</span>)</span><br><span class="line">      .<span class="title function_">fontWeight</span>(<span class="title class_">FontWeight</span>.<span class="property">Bold</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h6 id="当自定义组件没有定义属性时，可以只传入一个LocalStorage实例作为入参"><a href="#当自定义组件没有定义属性时，可以只传入一个LocalStorage实例作为入参" class="headerlink" title="当自定义组件没有定义属性时，可以只传入一个LocalStorage实例作为入参"></a>当自定义组件没有定义属性时，可以只传入一个LocalStorage实例作为入参</h6><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="attr">localStorage1</span>: <span class="title class_">LocalStorage</span> = <span class="keyword">new</span> <span class="title class_">LocalStorage</span>();</span><br><span class="line">localStorage1.<span class="title function_">setOrCreate</span>(<span class="string">&#x27;PropA&#x27;</span>, <span class="string">&#x27;PropA&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> <span class="attr">localStorage2</span>: <span class="title class_">LocalStorage</span> = <span class="keyword">new</span> <span class="title class_">LocalStorage</span>();</span><br><span class="line">localStorage2.<span class="title function_">setOrCreate</span>(<span class="string">&#x27;PropB&#x27;</span>, <span class="string">&#x27;PropB&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="meta">@Entry</span>(localStorage1)</span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line">struct <span class="title class_">Index</span> &#123;</span><br><span class="line">  <span class="comment">// &#x27;PropA&#x27;，和localStorage1中&#x27;PropA&#x27;的双向同步</span></span><br><span class="line">  <span class="meta">@LocalStorageLink</span>(<span class="string">&#x27;PropA&#x27;</span>) <span class="title class_">PropA</span>: <span class="built_in">string</span> = <span class="string">&#x27;Hello World&#x27;</span>;</span><br><span class="line">  <span class="meta">@State</span> <span class="attr">count</span>: <span class="built_in">number</span> = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">Row</span>() &#123;</span><br><span class="line">      <span class="title class_">Column</span>() &#123;</span><br><span class="line">        <span class="title class_">Text</span>(<span class="variable language_">this</span>.<span class="property">PropA</span>)</span><br><span class="line">          .<span class="title function_">fontSize</span>(<span class="number">50</span>)</span><br><span class="line">          .<span class="title function_">fontWeight</span>(<span class="title class_">FontWeight</span>.<span class="property">Bold</span>)</span><br><span class="line">        <span class="comment">// 使用LocalStorage 实例localStorage2</span></span><br><span class="line">        <span class="title class_">Child</span>(localStorage2)</span><br><span class="line">      &#125;</span><br><span class="line">      .<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    .<span class="title function_">height</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line">struct <span class="title class_">Child</span> &#123;</span><br><span class="line">  <span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">Text</span>(<span class="string">&quot;hello&quot;</span>)</span><br><span class="line">      .<span class="title function_">fontSize</span>(<span class="number">50</span>)</span><br><span class="line">      .<span class="title function_">fontWeight</span>(<span class="title class_">FontWeight</span>.<span class="property">Bold</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h6 id="当定义的属性不需要从父组件初始化变量时，第一个参数需要传"><a href="#当定义的属性不需要从父组件初始化变量时，第一个参数需要传" class="headerlink" title="当定义的属性不需要从父组件初始化变量时，第一个参数需要传{}"></a>当定义的属性不需要从父组件初始化变量时，第一个参数需要传{}</h6><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="attr">localStorage1</span>: <span class="title class_">LocalStorage</span> = <span class="keyword">new</span> <span class="title class_">LocalStorage</span>();</span><br><span class="line">localStorage1.<span class="title function_">setOrCreate</span>(<span class="string">&#x27;PropA&#x27;</span>, <span class="string">&#x27;PropA&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> <span class="attr">localStorage2</span>: <span class="title class_">LocalStorage</span> = <span class="keyword">new</span> <span class="title class_">LocalStorage</span>();</span><br><span class="line">localStorage2.<span class="title function_">setOrCreate</span>(<span class="string">&#x27;PropB&#x27;</span>, <span class="string">&#x27;PropB&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="meta">@Entry</span>(localStorage1)</span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line">struct <span class="title class_">Index</span> &#123;</span><br><span class="line">  <span class="comment">// &#x27;PropA&#x27;，和localStorage1中&#x27;PropA&#x27;的双向同步</span></span><br><span class="line">  <span class="meta">@LocalStorageLink</span>(<span class="string">&#x27;PropA&#x27;</span>) <span class="title class_">PropA</span>: <span class="built_in">string</span> = <span class="string">&#x27;Hello World&#x27;</span>;</span><br><span class="line">  <span class="meta">@State</span> <span class="attr">count</span>: <span class="built_in">number</span> = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">Row</span>() &#123;</span><br><span class="line">      <span class="title class_">Column</span>() &#123;</span><br><span class="line">        <span class="title class_">Text</span>(<span class="variable language_">this</span>.<span class="property">PropA</span>)</span><br><span class="line">          .<span class="title function_">fontSize</span>(<span class="number">50</span>)</span><br><span class="line">          .<span class="title function_">fontWeight</span>(<span class="title class_">FontWeight</span>.<span class="property">Bold</span>)</span><br><span class="line">        <span class="comment">// 使用LocalStorage 实例localStorage2</span></span><br><span class="line">        <span class="title class_">Child</span>(&#123;&#125;, localStorage2)</span><br><span class="line">      &#125;</span><br><span class="line">      .<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    .<span class="title function_">height</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line">struct <span class="title class_">Child</span> &#123;</span><br><span class="line">  <span class="meta">@State</span> <span class="attr">count</span>: <span class="built_in">number</span> = <span class="number">5</span>;</span><br><span class="line">  <span class="comment">// &#x27;Hello World&#x27;，和localStorage2中&#x27;PropB&#x27;的双向同步，localStorage2中没有&#x27;PropB&#x27;，则使用默认值&#x27;Hello World&#x27;</span></span><br><span class="line">  <span class="meta">@LocalStorageLink</span>(<span class="string">&#x27;PropB&#x27;</span>) <span class="title class_">PropB</span>: <span class="built_in">string</span> = <span class="string">&#x27;Hello World&#x27;</span>;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">Text</span>(<span class="variable language_">this</span>.<span class="property">PropB</span>)</span><br><span class="line">      .<span class="title function_">fontSize</span>(<span class="number">50</span>)</span><br><span class="line">      .<span class="title function_">fontWeight</span>(<span class="title class_">FontWeight</span>.<span class="property">Bold</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h6 id="Navigation组件和LocalStorage联合使用"><a href="#Navigation组件和LocalStorage联合使用" class="headerlink" title="Navigation组件和LocalStorage联合使用"></a>Navigation组件和LocalStorage联合使用</h6><p>可以通过传递不同的LocalStorage实例给自定义组件，从而实现在navigation跳转到不同的页面时，绑定不同的LocalStorage实例，显示对应绑定的值。</p>
<p>本示例以@LocalStorageLink为例，展示了：</p>
<ul>
<li>点击父组件中的Button “Next Page”,创建并跳转到name为”pageOne”的子页面，Text显示信息为LocalStorage实例localStorageA中绑定的PropA的值，为”PropA”。</li>
<li>继续点击页面上的Button “Next Page”,创建并跳转到name为”pageTwo”的子页面，Text显示信息为LocalStorage实例localStorageB中绑定的PropB的值，为”PropB”。</li>
<li>继续点击页面上的Button “Next Page”,创建并跳转到name为”pageTree”的子页面，Text显示信息为LocalStorage实例localStorageC中绑定的PropC的值，为”PropC”。</li>
<li>继续点击页面上的Button “Next Page”,创建并跳转到name为”pageOne”的子页面，Text显示信息为LocalStorage实例localStorageA中绑定的PropA的值，为”PropA”。</li>
<li>NavigationContentMsgStack自定义组件中的Text组件，共享对应自定义组件树上LocalStorage实例绑定的PropA的值。</li>
</ul>
<figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="attr">localStorageA</span>: <span class="title class_">LocalStorage</span> = <span class="keyword">new</span> <span class="title class_">LocalStorage</span>();</span><br><span class="line">localStorageA.<span class="title function_">setOrCreate</span>(<span class="string">&#x27;PropA&#x27;</span>, <span class="string">&#x27;PropA&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> <span class="attr">localStorageB</span>: <span class="title class_">LocalStorage</span> = <span class="keyword">new</span> <span class="title class_">LocalStorage</span>();</span><br><span class="line">localStorageB.<span class="title function_">setOrCreate</span>(<span class="string">&#x27;PropB&#x27;</span>, <span class="string">&#x27;PropB&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> <span class="attr">localStorageC</span>: <span class="title class_">LocalStorage</span> = <span class="keyword">new</span> <span class="title class_">LocalStorage</span>();</span><br><span class="line">localStorageC.<span class="title function_">setOrCreate</span>(<span class="string">&#x27;PropC&#x27;</span>, <span class="string">&#x27;PropC&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="meta">@Entry</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line">struct <span class="title class_">MyNavigationTestStack</span> &#123;</span><br><span class="line">  <span class="meta">@Provide</span>(<span class="string">&#x27;pageInfo&#x27;</span>) <span class="attr">pageInfo</span>: <span class="title class_">NavPathStack</span> = <span class="keyword">new</span> <span class="title class_">NavPathStack</span>();</span><br><span class="line"></span><br><span class="line">  <span class="meta">@Builder</span></span><br><span class="line">  <span class="title class_">PageMap</span>(<span class="attr">name</span>: <span class="built_in">string</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (name === <span class="string">&#x27;pageOne&#x27;</span>) &#123;</span><br><span class="line">      <span class="comment">// 传递不同的LocalStorage实例</span></span><br><span class="line">      <span class="title function_">pageOneStack</span>(&#123;&#125;, localStorageA)</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (name === <span class="string">&#x27;pageTwo&#x27;</span>) &#123;</span><br><span class="line">      <span class="title function_">pageTwoStack</span>(&#123;&#125;, localStorageB)</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (name === <span class="string">&#x27;pageThree&#x27;</span>) &#123;</span><br><span class="line">      <span class="title function_">pageThreeStack</span>(&#123;&#125;, localStorageC)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">Column</span>(&#123; <span class="attr">space</span>: <span class="number">5</span> &#125;) &#123;</span><br><span class="line">      <span class="title class_">Navigation</span>(<span class="variable language_">this</span>.<span class="property">pageInfo</span>) &#123;</span><br><span class="line">        <span class="title class_">Column</span>() &#123;</span><br><span class="line">          <span class="title class_">Button</span>(<span class="string">&#x27;Next Page&#x27;</span>, &#123; <span class="attr">stateEffect</span>: <span class="literal">true</span>, <span class="attr">type</span>: <span class="title class_">ButtonType</span>.<span class="property">Capsule</span> &#125;)</span><br><span class="line">            .<span class="title function_">width</span>(<span class="string">&#x27;80%&#x27;</span>)</span><br><span class="line">            .<span class="title function_">height</span>(<span class="number">40</span>)</span><br><span class="line">            .<span class="title function_">margin</span>(<span class="number">20</span>)</span><br><span class="line">            .<span class="title function_">onClick</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">              <span class="variable language_">this</span>.<span class="property">pageInfo</span>.<span class="title function_">pushPath</span>(&#123; <span class="attr">name</span>: <span class="string">&#x27;pageOne&#x27;</span> &#125;); <span class="comment">//将name指定的NavDestination页面信息入栈</span></span><br><span class="line">            &#125;)</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;.<span class="title function_">title</span>(<span class="string">&#x27;NavIndex&#x27;</span>)</span><br><span class="line">      .<span class="title function_">navDestination</span>(<span class="variable language_">this</span>.<span class="property">PageMap</span>)</span><br><span class="line">      .<span class="title function_">mode</span>(<span class="title class_">NavigationMode</span>.<span class="property">Stack</span>)</span><br><span class="line">      .<span class="title function_">borderWidth</span>(<span class="number">1</span>)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line">struct pageOneStack &#123;</span><br><span class="line">  <span class="meta">@Consume</span>(<span class="string">&#x27;pageInfo&#x27;</span>) <span class="attr">pageInfo</span>: <span class="title class_">NavPathStack</span>;</span><br><span class="line">  <span class="meta">@LocalStorageLink</span>(<span class="string">&#x27;PropA&#x27;</span>) <span class="title class_">PropA</span>: <span class="built_in">string</span> = <span class="string">&#x27;Hello World&#x27;</span>;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">NavDestination</span>() &#123;</span><br><span class="line">      <span class="title class_">Column</span>() &#123;</span><br><span class="line">        <span class="title class_">NavigationContentMsgStack</span>()</span><br><span class="line">        <span class="comment">// 显示绑定的LocalStorage中PropA的值&#x27;PropA&#x27;</span></span><br><span class="line">        <span class="title class_">Text</span>(<span class="string">`<span class="subst">$&#123;<span class="variable language_">this</span>.PropA&#125;</span>`</span>)</span><br><span class="line">        <span class="title class_">Button</span>(<span class="string">&#x27;Next Page&#x27;</span>, &#123; <span class="attr">stateEffect</span>: <span class="literal">true</span>, <span class="attr">type</span>: <span class="title class_">ButtonType</span>.<span class="property">Capsule</span> &#125;)</span><br><span class="line">          .<span class="title function_">width</span>(<span class="string">&#x27;80%&#x27;</span>)</span><br><span class="line">          .<span class="title function_">height</span>(<span class="number">40</span>)</span><br><span class="line">          .<span class="title function_">margin</span>(<span class="number">20</span>)</span><br><span class="line">          .<span class="title function_">onClick</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">pageInfo</span>.<span class="title function_">pushPathByName</span>(<span class="string">&#x27;pageTwo&#x27;</span>, <span class="literal">null</span>);</span><br><span class="line">          &#125;)</span><br><span class="line">      &#125;.<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>).<span class="title function_">height</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">    &#125;.<span class="title function_">title</span>(<span class="string">&#x27;pageOne&#x27;</span>)</span><br><span class="line">    .<span class="title function_">onBackPressed</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">pageInfo</span>.<span class="title function_">pop</span>();</span><br><span class="line">      <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line">struct pageTwoStack &#123;</span><br><span class="line">  <span class="meta">@Consume</span>(<span class="string">&#x27;pageInfo&#x27;</span>) <span class="attr">pageInfo</span>: <span class="title class_">NavPathStack</span>;</span><br><span class="line">  <span class="meta">@LocalStorageLink</span>(<span class="string">&#x27;PropB&#x27;</span>) <span class="title class_">PropB</span>: <span class="built_in">string</span> = <span class="string">&#x27;Hello World&#x27;</span>;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">NavDestination</span>() &#123;</span><br><span class="line">      <span class="title class_">Column</span>() &#123;</span><br><span class="line">        <span class="title class_">NavigationContentMsgStack</span>()</span><br><span class="line">        <span class="comment">// 绑定的LocalStorage中没有PropA,显示本地初始化的值 &#x27;Hello World&#x27;</span></span><br><span class="line">        <span class="title class_">Text</span>(<span class="string">`<span class="subst">$&#123;<span class="variable language_">this</span>.PropB&#125;</span>`</span>)</span><br><span class="line">        <span class="title class_">Button</span>(<span class="string">&#x27;Next Page&#x27;</span>, &#123; <span class="attr">stateEffect</span>: <span class="literal">true</span>, <span class="attr">type</span>: <span class="title class_">ButtonType</span>.<span class="property">Capsule</span> &#125;)</span><br><span class="line">          .<span class="title function_">width</span>(<span class="string">&#x27;80%&#x27;</span>)</span><br><span class="line">          .<span class="title function_">height</span>(<span class="number">40</span>)</span><br><span class="line">          .<span class="title function_">margin</span>(<span class="number">20</span>)</span><br><span class="line">          .<span class="title function_">onClick</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">pageInfo</span>.<span class="title function_">pushPathByName</span>(<span class="string">&#x27;pageThree&#x27;</span>, <span class="literal">null</span>);</span><br><span class="line">          &#125;)</span><br><span class="line"></span><br><span class="line">      &#125;.<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>).<span class="title function_">height</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">    &#125;.<span class="title function_">title</span>(<span class="string">&#x27;pageTwo&#x27;</span>)</span><br><span class="line">    .<span class="title function_">onBackPressed</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">pageInfo</span>.<span class="title function_">pop</span>();</span><br><span class="line">      <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line">struct pageThreeStack &#123;</span><br><span class="line">  <span class="meta">@Consume</span>(<span class="string">&#x27;pageInfo&#x27;</span>) <span class="attr">pageInfo</span>: <span class="title class_">NavPathStack</span>;</span><br><span class="line">  <span class="meta">@LocalStorageLink</span>(<span class="string">&#x27;PropC&#x27;</span>) <span class="title class_">PropC</span>: <span class="built_in">string</span> = <span class="string">&#x27;pageThreeStack&#x27;</span>;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">NavDestination</span>() &#123;</span><br><span class="line">      <span class="title class_">Column</span>() &#123;</span><br><span class="line">        <span class="title class_">NavigationContentMsgStack</span>()</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 绑定的LocalStorage中没有PropA,显示本地初始化的值 &#x27;pageThreeStack&#x27;</span></span><br><span class="line">        <span class="title class_">Text</span>(<span class="string">`<span class="subst">$&#123;<span class="variable language_">this</span>.PropC&#125;</span>`</span>)</span><br><span class="line">        <span class="title class_">Button</span>(<span class="string">&#x27;Next Page&#x27;</span>, &#123; <span class="attr">stateEffect</span>: <span class="literal">true</span>, <span class="attr">type</span>: <span class="title class_">ButtonType</span>.<span class="property">Capsule</span> &#125;)</span><br><span class="line">          .<span class="title function_">width</span>(<span class="string">&#x27;80%&#x27;</span>)</span><br><span class="line">          .<span class="title function_">height</span>(<span class="number">40</span>)</span><br><span class="line">          .<span class="title function_">margin</span>(<span class="number">20</span>)</span><br><span class="line">          .<span class="title function_">onClick</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">pageInfo</span>.<span class="title function_">pushPathByName</span>(<span class="string">&#x27;pageOne&#x27;</span>, <span class="literal">null</span>);</span><br><span class="line">          &#125;)</span><br><span class="line"></span><br><span class="line">      &#125;.<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>).<span class="title function_">height</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">    &#125;.<span class="title function_">title</span>(<span class="string">&#x27;pageThree&#x27;</span>)</span><br><span class="line">    .<span class="title function_">onBackPressed</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">pageInfo</span>.<span class="title function_">pop</span>();</span><br><span class="line">      <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line">struct <span class="title class_">NavigationContentMsgStack</span> &#123;</span><br><span class="line">  <span class="meta">@LocalStorageLink</span>(<span class="string">&#x27;PropA&#x27;</span>) <span class="title class_">PropA</span>: <span class="built_in">string</span> = <span class="string">&#x27;Hello&#x27;</span>;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">Column</span>() &#123;</span><br><span class="line">      <span class="title class_">Text</span>(<span class="string">`<span class="subst">$&#123;<span class="variable language_">this</span>.PropA&#125;</span>`</span>)</span><br><span class="line">        .<span class="title function_">fontSize</span>(<span class="number">30</span>)</span><br><span class="line">        .<span class="title function_">fontWeight</span>(<span class="title class_">FontWeight</span>.<span class="property">Bold</span>)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h6 id="LocalStorage支持联合类型"><a href="#LocalStorage支持联合类型" class="headerlink" title="LocalStorage支持联合类型"></a>LocalStorage支持联合类型</h6><p>在下面的示例中，变量A的类型为number | null，变量B的类型为number | undefined。Text组件初始化分别显示为null和undefined，点击切换为数字，再次点击切换回null和undefined。</p>
<figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Component</span></span><br><span class="line">struct <span class="title class_">LocalStorLink</span> &#123;</span><br><span class="line">  <span class="meta">@LocalStorageLink</span>(<span class="string">&quot;AA&quot;</span>) <span class="attr">A</span>: <span class="built_in">number</span> | <span class="literal">null</span> = <span class="literal">null</span>;</span><br><span class="line">  <span class="meta">@LocalStorageLink</span>(<span class="string">&quot;BB&quot;</span>) <span class="attr">B</span>: <span class="built_in">number</span> | <span class="literal">undefined</span> = <span class="literal">undefined</span>;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">Column</span>() &#123;</span><br><span class="line">      <span class="title class_">Text</span>(<span class="string">&quot;@LocalStorageLink接口初始化，@LocalStorageLink取值&quot;</span>)</span><br><span class="line">      <span class="title class_">Text</span>(<span class="variable language_">this</span>.<span class="property">A</span> + <span class="string">&quot;&quot;</span>).<span class="title function_">fontSize</span>(<span class="number">20</span>).<span class="title function_">onClick</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">A</span> ? <span class="variable language_">this</span>.<span class="property">A</span> = <span class="literal">null</span> : <span class="variable language_">this</span>.<span class="property">A</span> = <span class="number">1</span>;</span><br><span class="line">      &#125;)</span><br><span class="line">      <span class="title class_">Text</span>(<span class="variable language_">this</span>.<span class="property">B</span> + <span class="string">&quot;&quot;</span>).<span class="title function_">fontSize</span>(<span class="number">20</span>).<span class="title function_">onClick</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">B</span> ? <span class="variable language_">this</span>.<span class="property">B</span> = <span class="literal">undefined</span> : <span class="variable language_">this</span>.<span class="property">B</span> = <span class="number">1</span>;</span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">    .<span class="title function_">borderWidth</span>(<span class="number">3</span>).<span class="title function_">borderColor</span>(<span class="title class_">Color</span>.<span class="property">Green</span>)</span><br><span class="line"></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line">struct <span class="title class_">LocalStorProp</span> &#123;</span><br><span class="line">  <span class="meta">@LocalStorageProp</span>(<span class="string">&quot;AAA&quot;</span>) <span class="attr">A</span>: <span class="built_in">number</span> | <span class="literal">null</span> = <span class="literal">null</span>;</span><br><span class="line">  <span class="meta">@LocalStorageProp</span>(<span class="string">&quot;BBB&quot;</span>) <span class="attr">B</span>: <span class="built_in">number</span> | <span class="literal">undefined</span> = <span class="literal">undefined</span>;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">Column</span>() &#123;</span><br><span class="line">      <span class="title class_">Text</span>(<span class="string">&quot;@LocalStorageProp接口初始化，@LocalStorageProp取值&quot;</span>)</span><br><span class="line">      <span class="title class_">Text</span>(<span class="variable language_">this</span>.<span class="property">A</span> + <span class="string">&quot;&quot;</span>).<span class="title function_">fontSize</span>(<span class="number">20</span>).<span class="title function_">onClick</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">A</span> ? <span class="variable language_">this</span>.<span class="property">A</span> = <span class="literal">null</span> : <span class="variable language_">this</span>.<span class="property">A</span> = <span class="number">1</span>;</span><br><span class="line">      &#125;)</span><br><span class="line">      <span class="title class_">Text</span>(<span class="variable language_">this</span>.<span class="property">B</span> + <span class="string">&quot;&quot;</span>).<span class="title function_">fontSize</span>(<span class="number">20</span>).<span class="title function_">onClick</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">B</span> ? <span class="variable language_">this</span>.<span class="property">B</span> = <span class="literal">undefined</span> : <span class="variable language_">this</span>.<span class="property">B</span> = <span class="number">1</span>;</span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">    .<span class="title function_">borderWidth</span>(<span class="number">3</span>).<span class="title function_">borderColor</span>(<span class="title class_">Color</span>.<span class="property">Yellow</span>)</span><br><span class="line"></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> <span class="attr">storage1</span>: <span class="title class_">LocalStorage</span> = <span class="keyword">new</span> <span class="title class_">LocalStorage</span>();</span><br><span class="line"></span><br><span class="line"><span class="meta">@Entry</span>(storage1)</span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line">struct <span class="title class_">TestCase3</span> &#123;</span><br><span class="line">  <span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">Row</span>() &#123;</span><br><span class="line">      <span class="title class_">Column</span>() &#123;</span><br><span class="line">        <span class="title class_">LocalStorLink</span>()</span><br><span class="line">        <span class="title class_">LocalStorProp</span>()</span><br><span class="line">      &#125;</span><br><span class="line">      .<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    .<span class="title function_">height</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h6 id="装饰Date类型变量"><a href="#装饰Date类型变量" class="headerlink" title="装饰Date类型变量"></a>装饰Date类型变量</h6><blockquote>
<p>说明：</p>
<p>从API version 12开始，LocalStorage支持Date类型。</p>
</blockquote>
<p>在下面的示例中，@LocalStorageLink装饰的selectedDate类型为Date，点击Button改变selectedDate的值，视图会随之刷新。</p>
<figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Entry</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line">struct <span class="title class_">LocalDateSample</span> &#123;</span><br><span class="line">  <span class="meta">@LocalStorageLink</span>(<span class="string">&quot;date&quot;</span>) <span class="attr">selectedDate</span>: <span class="title class_">Date</span> = <span class="keyword">new</span> <span class="title class_">Date</span>(<span class="string">&#x27;2021-08-08&#x27;</span>);</span><br><span class="line"></span><br><span class="line">  <span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">Column</span>() &#123;</span><br><span class="line">      <span class="title class_">Button</span>(<span class="string">&#x27;set selectedDate to 2023-07-08&#x27;</span>)</span><br><span class="line">        .<span class="title function_">margin</span>(<span class="number">10</span>)</span><br><span class="line">        .<span class="title function_">onClick</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">selectedDate</span> = <span class="keyword">new</span> <span class="title class_">Date</span>(<span class="string">&#x27;2023-07-08&#x27;</span>);</span><br><span class="line">        &#125;)</span><br><span class="line">      <span class="title class_">Button</span>(<span class="string">&#x27;increase the year by 1&#x27;</span>)</span><br><span class="line">        .<span class="title function_">margin</span>(<span class="number">10</span>)</span><br><span class="line">        .<span class="title function_">onClick</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">selectedDate</span>.<span class="title function_">setFullYear</span>(<span class="variable language_">this</span>.<span class="property">selectedDate</span>.<span class="title function_">getFullYear</span>() + <span class="number">1</span>);</span><br><span class="line">        &#125;)</span><br><span class="line">      <span class="title class_">Button</span>(<span class="string">&#x27;increase the month by 1&#x27;</span>)</span><br><span class="line">        .<span class="title function_">margin</span>(<span class="number">10</span>)</span><br><span class="line">        .<span class="title function_">onClick</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">selectedDate</span>.<span class="title function_">setMonth</span>(<span class="variable language_">this</span>.<span class="property">selectedDate</span>.<span class="title function_">getMonth</span>() + <span class="number">1</span>);</span><br><span class="line">        &#125;)</span><br><span class="line">      <span class="title class_">Button</span>(<span class="string">&#x27;increase the day by 1&#x27;</span>)</span><br><span class="line">        .<span class="title function_">margin</span>(<span class="number">10</span>)</span><br><span class="line">        .<span class="title function_">onClick</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">selectedDate</span>.<span class="title function_">setDate</span>(<span class="variable language_">this</span>.<span class="property">selectedDate</span>.<span class="title function_">getDate</span>() + <span class="number">1</span>);</span><br><span class="line">        &#125;)</span><br><span class="line">      <span class="title class_">DatePicker</span>(&#123;</span><br><span class="line">        <span class="attr">start</span>: <span class="keyword">new</span> <span class="title class_">Date</span>(<span class="string">&#x27;1970-1-1&#x27;</span>),</span><br><span class="line">        <span class="attr">end</span>: <span class="keyword">new</span> <span class="title class_">Date</span>(<span class="string">&#x27;2100-1-1&#x27;</span>),</span><br><span class="line">        <span class="attr">selected</span>: $$this.<span class="property">selectedDate</span></span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;.<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h6 id="装饰Map类型变量"><a href="#装饰Map类型变量" class="headerlink" title="装饰Map类型变量"></a>装饰Map类型变量</h6><blockquote>
<p>说明：</p>
<p>从API version 12开始，LocalStorage支持Map类型。</p>
</blockquote>
<p>在下面的示例中，@LocalStorageLink装饰的message类型为Map&lt;number, string&gt;，点击Button改变message的值，视图会随之刷新。</p>
<figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Entry</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line">struct <span class="title class_">LocalMapSample</span> &#123;</span><br><span class="line">  <span class="meta">@LocalStorageLink</span>(<span class="string">&quot;map&quot;</span>) <span class="attr">message</span>: <span class="title class_">Map</span>&lt;<span class="built_in">number</span>, <span class="built_in">string</span>&gt; = <span class="keyword">new</span> <span class="title class_">Map</span>([[<span class="number">0</span>, <span class="string">&quot;a&quot;</span>], [<span class="number">1</span>, <span class="string">&quot;b&quot;</span>], [<span class="number">3</span>, <span class="string">&quot;c&quot;</span>]]);</span><br><span class="line"></span><br><span class="line">  <span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">Row</span>() &#123;</span><br><span class="line">      <span class="title class_">Column</span>() &#123;</span><br><span class="line">        <span class="title class_">ForEach</span>(<span class="title class_">Array</span>.<span class="title function_">from</span>(<span class="variable language_">this</span>.<span class="property">message</span>.<span class="title function_">entries</span>()), <span class="function">(<span class="params">item: [<span class="built_in">number</span>, <span class="built_in">string</span>]</span>) =&gt;</span> &#123;</span><br><span class="line">          <span class="title class_">Text</span>(<span class="string">`<span class="subst">$&#123;item[<span class="number">0</span>]&#125;</span>`</span>).<span class="title function_">fontSize</span>(<span class="number">30</span>)</span><br><span class="line">          <span class="title class_">Text</span>(<span class="string">`<span class="subst">$&#123;item[<span class="number">1</span>]&#125;</span>`</span>).<span class="title function_">fontSize</span>(<span class="number">30</span>)</span><br><span class="line">          <span class="title class_">Divider</span>()</span><br><span class="line">        &#125;)</span><br><span class="line">        <span class="title class_">Button</span>(<span class="string">&#x27;init map&#x27;</span>).<span class="title function_">onClick</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">message</span> = <span class="keyword">new</span> <span class="title class_">Map</span>([[<span class="number">0</span>, <span class="string">&quot;a&quot;</span>], [<span class="number">1</span>, <span class="string">&quot;b&quot;</span>], [<span class="number">3</span>, <span class="string">&quot;c&quot;</span>]]);</span><br><span class="line">        &#125;)</span><br><span class="line">        <span class="title class_">Button</span>(<span class="string">&#x27;set new one&#x27;</span>).<span class="title function_">onClick</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">message</span>.<span class="title function_">set</span>(<span class="number">4</span>, <span class="string">&quot;d&quot;</span>);</span><br><span class="line">        &#125;)</span><br><span class="line">        <span class="title class_">Button</span>(<span class="string">&#x27;clear&#x27;</span>).<span class="title function_">onClick</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">message</span>.<span class="title function_">clear</span>();</span><br><span class="line">        &#125;)</span><br><span class="line">        <span class="title class_">Button</span>(<span class="string">&#x27;replace the existing one&#x27;</span>).<span class="title function_">onClick</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">message</span>.<span class="title function_">set</span>(<span class="number">0</span>, <span class="string">&quot;aa&quot;</span>);</span><br><span class="line">        &#125;)</span><br><span class="line">        <span class="title class_">Button</span>(<span class="string">&#x27;delete the existing one&#x27;</span>).<span class="title function_">onClick</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">message</span>.<span class="title function_">delete</span>(<span class="number">0</span>);</span><br><span class="line">        &#125;)</span><br><span class="line">      &#125;</span><br><span class="line">      .<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    .<span class="title function_">height</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h6 id="装饰Set类型变量"><a href="#装饰Set类型变量" class="headerlink" title="装饰Set类型变量"></a>装饰Set类型变量</h6><blockquote>
<p>说明：</p>
<p>从API version 12开始，LocalStorage支持Set类型。</p>
</blockquote>
<p>在下面的示例中，@LocalStorageLink装饰的memberSet类型为Set<number>，点击Button改变memberSet的值，视图会随之刷新。</p>
<figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Entry</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line">struct <span class="title class_">LocalSetSample</span> &#123;</span><br><span class="line">  <span class="meta">@LocalStorageLink</span>(<span class="string">&quot;set&quot;</span>) <span class="attr">memberSet</span>: <span class="title class_">Set</span>&lt;<span class="built_in">number</span>&gt; = <span class="keyword">new</span> <span class="title class_">Set</span>([<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>]);</span><br><span class="line"></span><br><span class="line">  <span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">Row</span>() &#123;</span><br><span class="line">      <span class="title class_">Column</span>() &#123;</span><br><span class="line">        <span class="title class_">ForEach</span>(<span class="title class_">Array</span>.<span class="title function_">from</span>(<span class="variable language_">this</span>.<span class="property">memberSet</span>.<span class="title function_">entries</span>()), <span class="function">(<span class="params">item: [<span class="built_in">number</span>, <span class="built_in">string</span>]</span>) =&gt;</span> &#123;</span><br><span class="line">          <span class="title class_">Text</span>(<span class="string">`<span class="subst">$&#123;item[<span class="number">0</span>]&#125;</span>`</span>)</span><br><span class="line">            .<span class="title function_">fontSize</span>(<span class="number">30</span>)</span><br><span class="line">          <span class="title class_">Divider</span>()</span><br><span class="line">        &#125;)</span><br><span class="line">        <span class="title class_">Button</span>(<span class="string">&#x27;init set&#x27;</span>)</span><br><span class="line">          .<span class="title function_">onClick</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">memberSet</span> = <span class="keyword">new</span> <span class="title class_">Set</span>([<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>]);</span><br><span class="line">          &#125;)</span><br><span class="line">        <span class="title class_">Button</span>(<span class="string">&#x27;set new one&#x27;</span>)</span><br><span class="line">          .<span class="title function_">onClick</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">memberSet</span>.<span class="title function_">add</span>(<span class="number">5</span>);</span><br><span class="line">          &#125;)</span><br><span class="line">        <span class="title class_">Button</span>(<span class="string">&#x27;clear&#x27;</span>)</span><br><span class="line">          .<span class="title function_">onClick</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">memberSet</span>.<span class="title function_">clear</span>();</span><br><span class="line">          &#125;)</span><br><span class="line">        <span class="title class_">Button</span>(<span class="string">&#x27;delete the first one&#x27;</span>)</span><br><span class="line">          .<span class="title function_">onClick</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">memberSet</span>.<span class="title function_">delete</span>(<span class="number">0</span>);</span><br><span class="line">          &#125;)</span><br><span class="line">      &#125;</span><br><span class="line">      .<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    .<span class="title function_">height</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="AppStorage：应用全局的-UI-状态存储"><a href="#AppStorage：应用全局的-UI-状态存储" class="headerlink" title="AppStorage：应用全局的 UI 状态存储"></a>AppStorage：应用全局的 UI 状态存储</h4><p>AppStorage 是应用全局的 UI 状态存储，是和应用的进程绑定的，由 UI 框架在应用程序启动时创建，为应用程序 UI 状态属性提供中央存储。</p>
<p>和 AppStorage 不同的是，LocalStorage 是页面级的，通常应用于页面内的数据共享。而 AppStorage 是应用级的全局状态共享，还相当于整个应用的“中枢”，<span class="exturl" data-url="aHR0cHM6Ly9kZXZlbG9wZXIuaHVhd2VpLmNvbS9jb25zdW1lci9jbi9kb2MvaGFybW9ueW9zLWd1aWRlcy1WNS9hcmt0cy1wZXJzaXN0c3RvcmFnZS1WNQ==">持久化数据 PersistentStorage<i class="fa fa-external-link-alt"></i></span> 和<span class="exturl" data-url="aHR0cHM6Ly9kZXZlbG9wZXIuaHVhd2VpLmNvbS9jb25zdW1lci9jbi9kb2MvaGFybW9ueW9zLWd1aWRlcy1WNS9hcmt0cy1lbnZpcm9ubWVudC1WNQ==">环境变量 Environment<i class="fa fa-external-link-alt"></i></span> 都是通过 AppStorage 中转，才可以和 UI 交互。</p>
<h5 id="概述-2"><a href="#概述-2" class="headerlink" title="概述"></a>概述</h5><p>AppStorage 是在应用启动的时候会被创建的单例。它的目的是为了提供应用状态数据的中心存储，这些状态数据在应用级别都是可访问的。AppStorage 将在应用运行过程保留其属性。属性通过唯一的键字符串值访问。</p>
<p>AppStorage 可以和 UI 组件同步，且可以在应用业务逻辑中被访问。</p>
<p>AppStorage 支持应用的<span class="exturl" data-url="aHR0cHM6Ly9kZXZlbG9wZXIuaHVhd2VpLmNvbS9jb25zdW1lci9jbi9kb2MvaGFybW9ueW9zLWd1aWRlcy1WNS90aHJlYWQtbW9kZWwtc3RhZ2UtVjU=">主线程<i class="fa fa-external-link-alt"></i></span>内多个 UIAbility 实例间的状态共享。</p>
<p>AppStorage 中的属性可以被双向同步，数据可以是存在于本地或远程设备上，并具有不同的功能，比如数据持久化（详见 <span class="exturl" data-url="aHR0cHM6Ly9kZXZlbG9wZXIuaHVhd2VpLmNvbS9jb25zdW1lci9jbi9kb2MvaGFybW9ueW9zLWd1aWRlcy1WNS9hcmt0cy1wZXJzaXN0c3RvcmFnZS1WNQ==">PersistentStorage<i class="fa fa-external-link-alt"></i></span>）。这些数据是通过业务逻辑中实现，与 UI 解耦，如果希望这些数据在 UI 中使用，需要用到 <span class="exturl" data-url="aHR0cHM6Ly9kZXZlbG9wZXIuaHVhd2VpLmNvbS9jb25zdW1lci9jbi9kb2MvaGFybW9ueW9zLWd1aWRlcy1WNS9hcmt0cy1hcHBzdG9yYWdlLVY1I3N0b3JhZ2Vwcm9w">@StorageProp<i class="fa fa-external-link-alt"></i></span> 和 <span class="exturl" data-url="aHR0cHM6Ly9kZXZlbG9wZXIuaHVhd2VpLmNvbS9jb25zdW1lci9jbi9kb2MvaGFybW9ueW9zLWd1aWRlcy1WNS9hcmt0cy1hcHBzdG9yYWdlLVY1I3N0b3JhZ2VsaW5r">@StorageLink<i class="fa fa-external-link-alt"></i></span>。</p>
<h5 id="StorageProp"><a href="#StorageProp" class="headerlink" title="@StorageProp"></a>@StorageProp</h5><p>要建立 AppStorage 和自定义组件的联系，需要使用 @StorageProp 和 @StorageLink 装饰器。使用 @StorageProp(key)&#x2F;@StorageLink(key) 装饰组件内的变量，key 标识了 AppStorage 的属性。</p>
<p>当自定义组件初始化的时候，会使用 AppStorage 中对应 key 的属性值将 @StorageProp(key)&#x2F;@StorageLink(key) 装饰的变量初始化。由于应用逻辑的差异，无法确认是否在组件初始化之前向 AppStorage 实例中存入了对应的属性，所以 AppStorage 不一定存在 key 对应的属性，因此 @StorageProp(key)&#x2F;@StorageLink(key) 装饰的变量进行本地初始化是必要的。</p>
<p>@StorageProp(key) 是和 AppStorage 中 key 对应的属性建立<strong>单向数据同步</strong>，允许本地改变，但是对于 @StorageProp，本地的修改永远不会同步回 AppStorage 中，相反，如果 AppStorage 给定 key 的属性发生改变，改变会被同步给 @StorageProp，并覆盖掉本地的修改。</p>
<p><strong>装饰器使用规则说明</strong></p>
<table>
<thead>
<tr>
<th>@StorageProp变量装饰器</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>装饰器参数</td>
<td>key：常量字符串，必填（字符串需要有引号）。</td>
</tr>
<tr>
<td>允许装饰的变量类型</td>
<td>Object、class、string、number、boolean、enum类型，以及这些类型的数组。API12及以上支持Map、Set、Date类型。嵌套类型的场景请参考<span class="exturl" data-url="aHR0cHM6Ly9kZXZlbG9wZXIuaHVhd2VpLmNvbS9jb25zdW1lci9jbi9kb2MvaGFybW9ueW9zLWd1aWRlcy1WNS9hcmt0cy1hcHBzdG9yYWdlLVY1IyVFOCVBNyU4MiVFNSVBRiU5RiVFNSU4RiU5OCVFNSU4QyU5NiVFNSU5MiU4QyVFOCVBMSU4QyVFNCVCOCVCQSVFOCVBMSVBOCVFNyU4RSVCMA==">观察变化和行为表现<i class="fa fa-external-link-alt"></i></span>。类型必须被指定，建议和AppStorage中对应属性类型相同，否则会发生类型隐式转换，从而导致应用行为异常。不支持any，API12及以上支持undefined和null类型。API12及以上支持上述支持类型的联合类型，比如string | number, string | undefined 或者 ClassA | null，示例见<span class="exturl" data-url="aHR0cHM6Ly9kZXZlbG9wZXIuaHVhd2VpLmNvbS9jb25zdW1lci9jbi9kb2MvaGFybW9ueW9zLWd1aWRlcy1WNS9hcmt0cy1hcHBzdG9yYWdlLVY1I2FwcHN0b3JhZ2UlRTYlOTQlQUYlRTYlOEMlODElRTglODElOTQlRTUlOTAlODglRTclQjElQkIlRTUlOUUlOEI=">AppStorage支持联合类型<i class="fa fa-external-link-alt"></i></span>。<strong>注意</strong>当使用undefined和null的时候，建议显式指定类型，遵循TypeScript类型校验，比如：@StorageProp(“AA”) a: number | null &#x3D; null是推荐的，不推荐@StorageProp(“AA”) a: number &#x3D; null。</td>
</tr>
<tr>
<td>同步类型</td>
<td>单向同步：从AppStorage的对应属性到组件的状态变量。组件本地的修改是允许的，但是AppStorage中给定的属性一旦发生变化，将覆盖本地的修改。</td>
</tr>
<tr>
<td>被装饰变量的初始值</td>
<td>必须指定，如果AppStorage实例中不存在属性，则用该初始值初始化该属性，并存入AppStorage中。</td>
</tr>
</tbody></table>
<p><strong>变量的传递&#x2F;访问规则说明</strong></p>
<table>
<thead>
<tr>
<th>传递&#x2F;访问</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>从父节点初始化和更新</td>
<td>禁止，@StorageProp不支持从父节点初始化，只能AppStorage中key对应的属性初始化，如果没有对应key的话，将使用本地默认值初始化</td>
</tr>
<tr>
<td>初始化子节点</td>
<td>支持，可用于初始化@State、@Link、@Prop、@Provide。</td>
</tr>
<tr>
<td>是否支持组件外访问</td>
<td>否。</td>
</tr>
</tbody></table>
<p><strong>观察变化和行为表现</strong></p>
<p><strong>观察变化</strong></p>
<ul>
<li>当装饰的数据类型为boolean、string、number类型时，可以观察到数值的变化。</li>
<li>当装饰的数据类型为class或者Object时，可以观察到对象整体赋值和对象属性变化（详见<span class="exturl" data-url="aHR0cHM6Ly9kZXZlbG9wZXIuaHVhd2VpLmNvbS9jb25zdW1lci9jbi9kb2MvaGFybW9ueW9zLWd1aWRlcy1WNS9hcmt0cy1hcHBzdG9yYWdlLVY1IyVFNCVCQiU4RXVpJUU1JTg2JTg1JUU5JTgzJUE4JUU0JUJEJUJGJUU3JTk0JUE4YXBwc3RvcmFnZSVFNSU5MiU4Q2xvY2Fsc3RvcmFnZQ==">从ui内部使用appstorage和localstorage<i class="fa fa-external-link-alt"></i></span>）。</li>
<li>当装饰的对象是array时，可以观察到数组添加、删除、更新数组单元的变化。</li>
<li>当装饰的对象是Date时，可以观察到Date整体的赋值，同时可通过调用Date的接口setFullYear, setMonth, setDate, setHours, setMinutes, setSeconds, setMilliseconds, setTime, setUTCFullYear, setUTCMonth, setUTCDate, setUTCHours, setUTCMinutes, setUTCSeconds, setUTCMilliseconds 更新Date的属性。详见<span class="exturl" data-url="aHR0cHM6Ly9kZXZlbG9wZXIuaHVhd2VpLmNvbS9jb25zdW1lci9jbi9kb2MvaGFybW9ueW9zLWd1aWRlcy1WNS9hcmt0cy1hcHBzdG9yYWdlLVY1IyVFOCVBMyU4NSVFOSVBNSVCMGRhdGUlRTclQjElQkIlRTUlOUUlOEIlRTUlOEYlOTglRTklODclOEY=">装饰Date类型变量<i class="fa fa-external-link-alt"></i></span>。</li>
<li>当装饰的变量是Map时，可以观察到Map整体的赋值，同时可通过调用Map的接口set, clear, delete 更新Map的值。详见<span class="exturl" data-url="aHR0cHM6Ly9kZXZlbG9wZXIuaHVhd2VpLmNvbS9jb25zdW1lci9jbi9kb2MvaGFybW9ueW9zLWd1aWRlcy1WNS9hcmt0cy1hcHBzdG9yYWdlLVY1IyVFOCVBMyU4NSVFOSVBNSVCMG1hcCVFNyVCMSVCQiVFNSU5RSU4QiVFNSU4RiU5OCVFOSU4NyU4Rg==">装饰Map类型变量<i class="fa fa-external-link-alt"></i></span>。</li>
<li>当装饰的变量是Set时，可以观察到Set整体的赋值，同时可通过调用Set的接口add, clear, delete 更新Set的值。详见<span class="exturl" data-url="aHR0cHM6Ly9kZXZlbG9wZXIuaHVhd2VpLmNvbS9jb25zdW1lci9jbi9kb2MvaGFybW9ueW9zLWd1aWRlcy1WNS9hcmt0cy1hcHBzdG9yYWdlLVY1IyVFOCVBMyU4NSVFOSVBNSVCMHNldCVFNyVCMSVCQiVFNSU5RSU4QiVFNSU4RiU5OCVFOSU4NyU4Rg==">装饰Set类型变量<i class="fa fa-external-link-alt"></i></span>。</li>
</ul>
<p><strong>框架行为</strong></p>
<ul>
<li>当@StorageProp(key)装饰的数值改变被观察到时，修改不会被同步回AppStorage对应属性键值key的属性中。</li>
<li>当前@StorageProp(key)单向绑定的数据会被修改，即仅限于当前组件的私有成员变量改变，其他的绑定该key的数据不会同步改变。</li>
<li>当@StorageProp(key)装饰的数据本身是状态变量，它的改变虽然不会同步回AppStorage中，但是会引起所属的自定义组件的重新渲染。</li>
<li>当AppStorage中key对应的属性发生改变时，会同步给所有@StorageProp(key)装饰的数据，@StorageProp(key)本地的修改将被覆盖。</li>
</ul>
<h5 id="StorageLink"><a href="#StorageLink" class="headerlink" title="@StorageLink"></a>@StorageLink</h5><p>@StorageLink(key)是和AppStorage中key对应的属性建立<strong>双向数据同步</strong>：</p>
<ol>
<li>本地修改发生，该修改会被写回AppStorage中；</li>
<li>AppStorage中的修改发生后，该修改会被同步到所有绑定AppStorage对应key的属性上，包括单向（@StorageProp和通过Prop创建的单向绑定变量）、双向（@StorageLink和通过Link创建的双向绑定变量）变量和其他实例（比如PersistentStorage）。</li>
</ol>
<p><strong>装饰器使用规则说明</strong></p>
<table>
<thead>
<tr>
<th>@StorageLink变量装饰器</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>装饰器参数</td>
<td>key：常量字符串，必填（字符串需要有引号）。</td>
</tr>
<tr>
<td>允许装饰的变量类型</td>
<td>Object、class、string、number、boolean、enum类型，以及这些类型的数组。API12及以上支持Map、Set、Date类型。嵌套类型的场景请参考<span class="exturl" data-url="aHR0cHM6Ly9kZXZlbG9wZXIuaHVhd2VpLmNvbS9jb25zdW1lci9jbi9kb2MvaGFybW9ueW9zLWd1aWRlcy1WNS9hcmt0cy1hcHBzdG9yYWdlLVY1IyVFOCVBNyU4MiVFNSVBRiU5RiVFNSU4RiU5OCVFNSU4QyU5NiVFNSU5MiU4QyVFOCVBMSU4QyVFNCVCOCVCQSVFOCVBMSVBOCVFNyU4RSVCMA==">观察变化和行为表现<i class="fa fa-external-link-alt"></i></span>。类型必须被指定，建议和AppStorage中对应属性类型相同，否则会发生类型隐式转换，从而导致应用行为异常。不支持any，API12及以上支持undefined和null类型。API12及以上支持上述支持类型的联合类型，比如string | number, string | undefined 或者 ClassA | null，示例见<span class="exturl" data-url="aHR0cHM6Ly9kZXZlbG9wZXIuaHVhd2VpLmNvbS9jb25zdW1lci9jbi9kb2MvaGFybW9ueW9zLWd1aWRlcy1WNS9hcmt0cy1hcHBzdG9yYWdlLVY1I2FwcHN0b3JhZ2UlRTYlOTQlQUYlRTYlOEMlODElRTglODElOTQlRTUlOTAlODglRTclQjElQkIlRTUlOUUlOEI=">AppStorage支持联合类型<i class="fa fa-external-link-alt"></i></span>。<strong>注意</strong>当使用undefined和null的时候，建议显式指定类型，遵循TypeScript类型校验，比如：@StorageLink(“AA”) a: number | null &#x3D; null是推荐的，不推荐@StorageLink(“AA”) a: number &#x3D; null。</td>
</tr>
<tr>
<td>同步类型</td>
<td>双向同步：从AppStorage的对应属性到自定义组件，从自定义组件到AppStorage对应属性。</td>
</tr>
<tr>
<td>被装饰变量的初始值</td>
<td>必须指定，如果AppStorage实例中不存在属性，则用该初始值初始化该属性，并存入AppStorage中。</td>
</tr>
</tbody></table>
<p><strong>变量的传递&#x2F;访问规则说明</strong></p>
<table>
<thead>
<tr>
<th>传递&#x2F;访问</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>从父节点初始化和更新</td>
<td>禁止。</td>
</tr>
<tr>
<td>初始化子节点</td>
<td>支持，可用于初始化常规变量、@State、@Link、@Prop、@Provide。</td>
</tr>
<tr>
<td>是否支持组件外访问</td>
<td>否。</td>
</tr>
</tbody></table>
<p><strong>观察变化和行为表现</strong></p>
<p><strong>观察变化</strong></p>
<ul>
<li>当装饰的数据类型为boolean、string、number类型时，可以观察到数值的变化。</li>
<li>当装饰的数据类型为class或者Object时，可以观察到对象整体赋值和对象属性变化（详见<span class="exturl" data-url="aHR0cHM6Ly9kZXZlbG9wZXIuaHVhd2VpLmNvbS9jb25zdW1lci9jbi9kb2MvaGFybW9ueW9zLWd1aWRlcy1WNS9hcmt0cy1hcHBzdG9yYWdlLVY1IyVFNCVCQiU4RXVpJUU1JTg2JTg1JUU5JTgzJUE4JUU0JUJEJUJGJUU3JTk0JUE4YXBwc3RvcmFnZSVFNSU5MiU4Q2xvY2Fsc3RvcmFnZQ==">从ui内部使用appstorage和localstorage<i class="fa fa-external-link-alt"></i></span>）。</li>
<li>当装饰的对象是array时，可以观察到数组添加、删除、更新数组单元的变化。</li>
<li>当装饰的对象是Date时，可以观察到Date整体的赋值，同时可通过调用Date的接口setFullYear, setMonth, setDate, setHours, setMinutes, setSeconds, setMilliseconds, setTime, setUTCFullYear, setUTCMonth, setUTCDate, setUTCHours, setUTCMinutes, setUTCSeconds, setUTCMilliseconds 更新Date的属性。详见<span class="exturl" data-url="aHR0cHM6Ly9kZXZlbG9wZXIuaHVhd2VpLmNvbS9jb25zdW1lci9jbi9kb2MvaGFybW9ueW9zLWd1aWRlcy1WNS9hcmt0cy1hcHBzdG9yYWdlLVY1IyVFOCVBMyU4NSVFOSVBNSVCMGRhdGUlRTclQjElQkIlRTUlOUUlOEIlRTUlOEYlOTglRTklODclOEY=">装饰Date类型变量<i class="fa fa-external-link-alt"></i></span>。</li>
<li>当装饰的变量是Map时，可以观察到Map整体的赋值，同时可通过调用Map的接口set, clear, delete 更新Map的值。详见<span class="exturl" data-url="aHR0cHM6Ly9kZXZlbG9wZXIuaHVhd2VpLmNvbS9jb25zdW1lci9jbi9kb2MvaGFybW9ueW9zLWd1aWRlcy1WNS9hcmt0cy1hcHBzdG9yYWdlLVY1IyVFOCVBMyU4NSVFOSVBNSVCMG1hcCVFNyVCMSVCQiVFNSU5RSU4QiVFNSU4RiU5OCVFOSU4NyU4Rg==">装饰Map类型变量<i class="fa fa-external-link-alt"></i></span>。</li>
<li>当装饰的变量是Set时，可以观察到Set整体的赋值，同时可通过调用Set的接口add, clear, delete 更新Set的值。详见<span class="exturl" data-url="aHR0cHM6Ly9kZXZlbG9wZXIuaHVhd2VpLmNvbS9jb25zdW1lci9jbi9kb2MvaGFybW9ueW9zLWd1aWRlcy1WNS9hcmt0cy1hcHBzdG9yYWdlLVY1IyVFOCVBMyU4NSVFOSVBNSVCMHNldCVFNyVCMSVCQiVFNSU5RSU4QiVFNSU4RiU5OCVFOSU4NyU4Rg==">装饰Set类型变量<i class="fa fa-external-link-alt"></i></span>。</li>
</ul>
<p><strong>框架行为</strong></p>
<ol>
<li>当@StorageLink(key)装饰的数值改变被观察到时，修改将被同步回AppStorage对应属性键值key的属性中。</li>
<li>AppStorage中属性键值key对应的数据一旦改变，属性键值key绑定的所有的数据（包括双向@StorageLink和单向@StorageProp）都将同步修改。</li>
<li>当@StorageLink(key)装饰的数据本身是状态变量，它的改变不仅仅会同步回AppStorage中，还会引起所属的自定义组件的重新渲染。</li>
</ol>
<h5 id="使用场景-1"><a href="#使用场景-1" class="headerlink" title="使用场景"></a>使用场景</h5><h6 id="从应用逻辑使用AppStorage和LocalStorage"><a href="#从应用逻辑使用AppStorage和LocalStorage" class="headerlink" title="从应用逻辑使用AppStorage和LocalStorage"></a>从应用逻辑使用AppStorage和LocalStorage</h6><p>AppStorage是单例，它的所有API都是静态的，使用方法类似于LocalStorage中对应的非静态方法。</p>
<figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">AppStorage</span>.<span class="title function_">setOrCreate</span>(<span class="string">&#x27;PropA&#x27;</span>, <span class="number">47</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> <span class="attr">storage</span>: <span class="title class_">LocalStorage</span> = <span class="keyword">new</span> <span class="title class_">LocalStorage</span>();</span><br><span class="line">storage.<span class="title function_">setOrCreate</span>(<span class="string">&#x27;PropA&#x27;</span>,<span class="number">17</span>);</span><br><span class="line"><span class="keyword">let</span> <span class="attr">propA</span>: <span class="built_in">number</span> | <span class="literal">undefined</span> = <span class="title class_">AppStorage</span>.<span class="title function_">get</span>(<span class="string">&#x27;PropA&#x27;</span>) <span class="comment">// propA in AppStorage == 47, propA in LocalStorage == 17</span></span><br><span class="line"><span class="keyword">let</span> <span class="attr">link1</span>: <span class="title class_">SubscribedAbstractProperty</span>&lt;<span class="built_in">number</span>&gt; = <span class="title class_">AppStorage</span>.<span class="title function_">link</span>(<span class="string">&#x27;PropA&#x27;</span>); <span class="comment">// link1.get() == 47</span></span><br><span class="line"><span class="keyword">let</span> <span class="attr">link2</span>: <span class="title class_">SubscribedAbstractProperty</span>&lt;<span class="built_in">number</span>&gt; = <span class="title class_">AppStorage</span>.<span class="title function_">link</span>(<span class="string">&#x27;PropA&#x27;</span>); <span class="comment">// link2.get() == 47</span></span><br><span class="line"><span class="keyword">let</span> <span class="attr">prop</span>: <span class="title class_">SubscribedAbstractProperty</span>&lt;<span class="built_in">number</span>&gt; = <span class="title class_">AppStorage</span>.<span class="title function_">prop</span>(<span class="string">&#x27;PropA&#x27;</span>); <span class="comment">// prop.get() == 47</span></span><br><span class="line"></span><br><span class="line">link1.<span class="title function_">set</span>(<span class="number">48</span>); <span class="comment">// two-way sync: link1.get() == link2.get() == prop.get() == 48</span></span><br><span class="line">prop.<span class="title function_">set</span>(<span class="number">1</span>); <span class="comment">// one-way sync: prop.get() == 1; but link1.get() == link2.get() == 48</span></span><br><span class="line">link1.<span class="title function_">set</span>(<span class="number">49</span>); <span class="comment">// two-way sync: link1.get() == link2.get() == prop.get() == 49</span></span><br><span class="line"></span><br><span class="line">storage.<span class="property">get</span>&lt;<span class="built_in">number</span>&gt;(<span class="string">&#x27;PropA&#x27;</span>) <span class="comment">// == 17</span></span><br><span class="line">storage.<span class="title function_">set</span>(<span class="string">&#x27;PropA&#x27;</span>, <span class="number">101</span>);</span><br><span class="line">storage.<span class="property">get</span>&lt;<span class="built_in">number</span>&gt;(<span class="string">&#x27;PropA&#x27;</span>) <span class="comment">// == 101</span></span><br><span class="line"></span><br><span class="line"><span class="title class_">AppStorage</span>.<span class="property">get</span>&lt;<span class="built_in">number</span>&gt;(<span class="string">&#x27;PropA&#x27;</span>) <span class="comment">// == 49</span></span><br><span class="line">link1.<span class="title function_">get</span>() <span class="comment">// == 49</span></span><br><span class="line">link2.<span class="title function_">get</span>() <span class="comment">// == 49</span></span><br><span class="line">prop.<span class="title function_">get</span>() <span class="comment">// == 49</span></span><br></pre></td></tr></table></figure>

<h6 id="从UI内部使用AppStorage和LocalStorage"><a href="#从UI内部使用AppStorage和LocalStorage" class="headerlink" title="从UI内部使用AppStorage和LocalStorage"></a>从UI内部使用AppStorage和LocalStorage</h6><p>@StorageLink变量装饰器与AppStorage配合使用，正如@LocalStorageLink与LocalStorage配合使用一样。此装饰器使用AppStorage中的属性创建双向数据同步。</p>
<figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">PropB</span> &#123;</span><br><span class="line">  <span class="attr">code</span>: <span class="built_in">number</span>;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params">code: <span class="built_in">number</span></span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">code</span> = code;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title class_">AppStorage</span>.<span class="title function_">setOrCreate</span>(<span class="string">&#x27;PropA&#x27;</span>, <span class="number">47</span>);</span><br><span class="line"><span class="title class_">AppStorage</span>.<span class="title function_">setOrCreate</span>(<span class="string">&#x27;PropB&#x27;</span>, <span class="keyword">new</span> <span class="title class_">PropB</span>(<span class="number">50</span>));</span><br><span class="line"><span class="keyword">let</span> storage = <span class="keyword">new</span> <span class="title class_">LocalStorage</span>();</span><br><span class="line">storage.<span class="title function_">setOrCreate</span>(<span class="string">&#x27;PropA&#x27;</span>, <span class="number">48</span>);</span><br><span class="line">storage.<span class="title function_">setOrCreate</span>(<span class="string">&#x27;PropB&#x27;</span>, <span class="keyword">new</span> <span class="title class_">PropB</span>(<span class="number">100</span>));</span><br><span class="line"></span><br><span class="line"><span class="meta">@Entry</span>(storage)</span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line">struct <span class="title class_">CompA</span> &#123;</span><br><span class="line">  <span class="meta">@StorageLink</span>(<span class="string">&#x27;PropA&#x27;</span>) <span class="attr">storageLink</span>: <span class="built_in">number</span> = <span class="number">1</span>;</span><br><span class="line">  <span class="meta">@LocalStorageLink</span>(<span class="string">&#x27;PropA&#x27;</span>) <span class="attr">localStorageLink</span>: <span class="built_in">number</span> = <span class="number">1</span>;</span><br><span class="line">  <span class="meta">@StorageLink</span>(<span class="string">&#x27;PropB&#x27;</span>) <span class="attr">storageLinkObject</span>: <span class="title class_">PropB</span> = <span class="keyword">new</span> <span class="title class_">PropB</span>(<span class="number">1</span>);</span><br><span class="line">  <span class="meta">@LocalStorageLink</span>(<span class="string">&#x27;PropB&#x27;</span>) <span class="attr">localStorageLinkObject</span>: <span class="title class_">PropB</span> = <span class="keyword">new</span> <span class="title class_">PropB</span>(<span class="number">1</span>);</span><br><span class="line"></span><br><span class="line">  <span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">Column</span>(&#123; <span class="attr">space</span>: <span class="number">20</span> &#125;) &#123;</span><br><span class="line">      <span class="title class_">Text</span>(<span class="string">`From AppStorage <span class="subst">$&#123;<span class="variable language_">this</span>.storageLink&#125;</span>`</span>)</span><br><span class="line">        .<span class="title function_">onClick</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">storageLink</span> += <span class="number">1</span>;</span><br><span class="line">        &#125;)</span><br><span class="line"></span><br><span class="line">      <span class="title class_">Text</span>(<span class="string">`From LocalStorage <span class="subst">$&#123;<span class="variable language_">this</span>.localStorageLink&#125;</span>`</span>)</span><br><span class="line">        .<span class="title function_">onClick</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">localStorageLink</span> += <span class="number">1</span>;</span><br><span class="line">        &#125;)</span><br><span class="line"></span><br><span class="line">      <span class="title class_">Text</span>(<span class="string">`From AppStorage <span class="subst">$&#123;<span class="variable language_">this</span>.storageLinkObject.code&#125;</span>`</span>)</span><br><span class="line">        .<span class="title function_">onClick</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">storageLinkObject</span>.<span class="property">code</span> += <span class="number">1</span>;</span><br><span class="line">        &#125;)</span><br><span class="line"></span><br><span class="line">      <span class="title class_">Text</span>(<span class="string">`From LocalStorage <span class="subst">$&#123;<span class="variable language_">this</span>.localStorageLinkObject.code&#125;</span>`</span>)</span><br><span class="line">        .<span class="title function_">onClick</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">localStorageLinkObject</span>.<span class="property">code</span> += <span class="number">1</span>;</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h6 id="不建议借助-StorageLink的双向同步机制实现事件通知"><a href="#不建议借助-StorageLink的双向同步机制实现事件通知" class="headerlink" title="不建议借助@StorageLink的双向同步机制实现事件通知"></a>不建议借助@StorageLink的双向同步机制实现事件通知</h6><p>不建议开发者使用@StorageLink和AppStorage的双向同步的机制来实现事件通知，因为AppStorage中的变量可能绑定在多个不同页面的组件中，但事件通知则不一定需要通知到所有的这些组件。并且，当这些@StorageLink装饰的变量在UI中使用时，会触发UI刷新，带来不必要的性能影响。</p>
<p>示例代码中，TapImage中的点击事件，会触发AppStorage中tapIndex对应属性的改变。因为@StorageLink是双向同步，修改会同步回AppStorage中，所以，所有绑定AppStorage的tapIndex自定义组件里都能感知到tapIndex的变化。使用@Watch监听到tapIndex的变化后，修改状态变量tapColor从而触发UI刷新（此处tapIndex并未直接绑定在UI上，因此tapIndex的变化不会直接触发UI刷新）。</p>
<p>使用该机制来实现事件通知需要确保AppStorage中的变量尽量不要直接绑定在UI上，且需要控制@Watch函数的复杂度（如果@Watch函数执行时间长，会影响UI刷新效率）。</p>
<figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// xxx.ets</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">ViewData</span> &#123;</span><br><span class="line">  <span class="attr">title</span>: <span class="built_in">string</span>;</span><br><span class="line">  <span class="attr">uri</span>: <span class="title class_">Resource</span>;</span><br><span class="line">  <span class="attr">color</span>: <span class="title class_">Color</span> = <span class="title class_">Color</span>.<span class="property">Black</span>;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params">title: <span class="built_in">string</span>, uri: Resource</span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">title</span> = title;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">uri</span> = uri</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Entry</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line">struct <span class="title class_">Gallery2</span> &#123;</span><br><span class="line">  <span class="attr">dataList</span>: <span class="title class_">Array</span>&lt;<span class="title class_">ViewData</span>&gt; = [<span class="keyword">new</span> <span class="title class_">ViewData</span>(<span class="string">&#x27;flower&#x27;</span>, $r(<span class="string">&#x27;app.media.icon&#x27;</span>)), <span class="keyword">new</span> <span class="title class_">ViewData</span>(<span class="string">&#x27;OMG&#x27;</span>, $r(<span class="string">&#x27;app.media.icon&#x27;</span>)), <span class="keyword">new</span> <span class="title class_">ViewData</span>(<span class="string">&#x27;OMG&#x27;</span>, $r(<span class="string">&#x27;app.media.icon&#x27;</span>))]</span><br><span class="line">  <span class="attr">scroller</span>: <span class="title class_">Scroller</span> = <span class="keyword">new</span> <span class="title class_">Scroller</span>()</span><br><span class="line"></span><br><span class="line">  <span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">Column</span>() &#123;</span><br><span class="line">      <span class="title class_">Grid</span>(<span class="variable language_">this</span>.<span class="property">scroller</span>) &#123;</span><br><span class="line">        <span class="title class_">ForEach</span>(<span class="variable language_">this</span>.<span class="property">dataList</span>, <span class="function">(<span class="params">item: ViewData, index?: <span class="built_in">number</span></span>) =&gt;</span> &#123;</span><br><span class="line">          <span class="title class_">GridItem</span>() &#123;</span><br><span class="line">            <span class="title class_">TapImage</span>(&#123;</span><br><span class="line">              <span class="attr">uri</span>: item.<span class="property">uri</span>,</span><br><span class="line">              <span class="attr">index</span>: index</span><br><span class="line">            &#125;)</span><br><span class="line">          &#125;.<span class="title function_">aspectRatio</span>(<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line">        &#125;, <span class="function">(<span class="params">item: ViewData, index?: <span class="built_in">number</span></span>) =&gt;</span> &#123;</span><br><span class="line">          <span class="keyword">return</span> <span class="title class_">JSON</span>.<span class="title function_">stringify</span>(item) + index;</span><br><span class="line">        &#125;)</span><br><span class="line">      &#125;.<span class="title function_">columnsTemplate</span>(<span class="string">&#x27;1fr 1fr&#x27;</span>)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">export</span> struct <span class="title class_">TapImage</span> &#123;</span><br><span class="line">  <span class="meta">@StorageLink</span>(<span class="string">&#x27;tapIndex&#x27;</span>) <span class="meta">@Watch</span>(<span class="string">&#x27;onTapIndexChange&#x27;</span>) <span class="attr">tapIndex</span>: <span class="built_in">number</span> = -<span class="number">1</span>;</span><br><span class="line">  <span class="meta">@State</span> <span class="attr">tapColor</span>: <span class="title class_">Color</span> = <span class="title class_">Color</span>.<span class="property">Black</span>;</span><br><span class="line">  <span class="keyword">private</span> <span class="attr">index</span>: <span class="built_in">number</span> = <span class="number">0</span>;</span><br><span class="line">  <span class="keyword">private</span> <span class="attr">uri</span>: <span class="title class_">Resource</span> = &#123;</span><br><span class="line">    <span class="attr">id</span>: <span class="number">0</span>,</span><br><span class="line">    <span class="attr">type</span>: <span class="number">0</span>,</span><br><span class="line">    <span class="attr">moduleName</span>: <span class="string">&quot;&quot;</span>,</span><br><span class="line">    <span class="attr">bundleName</span>: <span class="string">&quot;&quot;</span></span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 判断是否被选中</span></span><br><span class="line">  <span class="title function_">onTapIndexChange</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">tapIndex</span> &gt;= <span class="number">0</span> &amp;&amp; <span class="variable language_">this</span>.<span class="property">index</span> === <span class="variable language_">this</span>.<span class="property">tapIndex</span>) &#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">info</span>(<span class="string">`tapindex: <span class="subst">$&#123;<span class="variable language_">this</span>.tapIndex&#125;</span>, index: <span class="subst">$&#123;<span class="variable language_">this</span>.index&#125;</span>, red`</span>)</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">tapColor</span> = <span class="title class_">Color</span>.<span class="property">Red</span>;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">info</span>(<span class="string">`tapindex: <span class="subst">$&#123;<span class="variable language_">this</span>.tapIndex&#125;</span>, index: <span class="subst">$&#123;<span class="variable language_">this</span>.index&#125;</span>, black`</span>)</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">tapColor</span> = <span class="title class_">Color</span>.<span class="property">Black</span>;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">Column</span>() &#123;</span><br><span class="line">      <span class="title class_">Image</span>(<span class="variable language_">this</span>.<span class="property">uri</span>)</span><br><span class="line">        .<span class="title function_">objectFit</span>(<span class="title class_">ImageFit</span>.<span class="property">Cover</span>)</span><br><span class="line">        .<span class="title function_">onClick</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">tapIndex</span> = <span class="variable language_">this</span>.<span class="property">index</span>;</span><br><span class="line">        &#125;)</span><br><span class="line">        .<span class="title function_">border</span>(&#123; <span class="attr">width</span>: <span class="number">5</span>, <span class="attr">style</span>: <span class="title class_">BorderStyle</span>.<span class="property">Dotted</span>, <span class="attr">color</span>: <span class="variable language_">this</span>.<span class="property">tapColor</span> &#125;)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>相比借助@StorageLink的双向同步机制实现事件通知，开发者可以使用emit订阅某个事件并接收事件回调的方式来减少开销，增强代码的可读性。</p>
<blockquote>
<p>说明：</p>
<p>emit接口不支持在Previewer预览器中使用。</p>
</blockquote>
<figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// xxx.ets</span></span><br><span class="line"><span class="keyword">import</span> emitter <span class="keyword">from</span> <span class="string">&#x27;@ohos.events.emitter&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> <span class="title class_">NextID</span>: <span class="built_in">number</span> = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">ViewData</span> &#123;</span><br><span class="line">  <span class="attr">title</span>: <span class="built_in">string</span>;</span><br><span class="line">  <span class="attr">uri</span>: <span class="title class_">Resource</span>;</span><br><span class="line">  <span class="attr">color</span>: <span class="title class_">Color</span> = <span class="title class_">Color</span>.<span class="property">Black</span>;</span><br><span class="line">  <span class="attr">id</span>: <span class="built_in">number</span>;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params">title: <span class="built_in">string</span>, uri: Resource</span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">title</span> = title;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">uri</span> = uri</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">id</span> = <span class="title class_">NextID</span>++;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Entry</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line">struct <span class="title class_">Gallery2</span> &#123;</span><br><span class="line">  <span class="attr">dataList</span>: <span class="title class_">Array</span>&lt;<span class="title class_">ViewData</span>&gt; = [<span class="keyword">new</span> <span class="title class_">ViewData</span>(<span class="string">&#x27;flower&#x27;</span>, $r(<span class="string">&#x27;app.media.icon&#x27;</span>)), <span class="keyword">new</span> <span class="title class_">ViewData</span>(<span class="string">&#x27;OMG&#x27;</span>, $r(<span class="string">&#x27;app.media.icon&#x27;</span>)), <span class="keyword">new</span> <span class="title class_">ViewData</span>(<span class="string">&#x27;OMG&#x27;</span>, $r(<span class="string">&#x27;app.media.icon&#x27;</span>))]</span><br><span class="line">  <span class="attr">scroller</span>: <span class="title class_">Scroller</span> = <span class="keyword">new</span> <span class="title class_">Scroller</span>()</span><br><span class="line">  <span class="keyword">private</span> <span class="attr">preIndex</span>: <span class="built_in">number</span> = -<span class="number">1</span></span><br><span class="line"></span><br><span class="line">  <span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">Column</span>() &#123;</span><br><span class="line">      <span class="title class_">Grid</span>(<span class="variable language_">this</span>.<span class="property">scroller</span>) &#123;</span><br><span class="line">        <span class="title class_">ForEach</span>(<span class="variable language_">this</span>.<span class="property">dataList</span>, <span class="function">(<span class="params">item: ViewData</span>) =&gt;</span> &#123;</span><br><span class="line">          <span class="title class_">GridItem</span>() &#123;</span><br><span class="line">            <span class="title class_">TapImage</span>(&#123;</span><br><span class="line">              <span class="attr">uri</span>: item.<span class="property">uri</span>,</span><br><span class="line">              <span class="attr">index</span>: item.<span class="property">id</span></span><br><span class="line">            &#125;)</span><br><span class="line">          &#125;.<span class="title function_">aspectRatio</span>(<span class="number">1</span>)</span><br><span class="line">          .<span class="title function_">onClick</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">            <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">preIndex</span> === item.<span class="property">id</span>) &#123;</span><br><span class="line">              <span class="keyword">return</span></span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">let</span> <span class="attr">innerEvent</span>: emitter.<span class="property">InnerEvent</span> = &#123; <span class="attr">eventId</span>: item.<span class="property">id</span> &#125;</span><br><span class="line">            <span class="comment">// 选中态：黑变红</span></span><br><span class="line">            <span class="keyword">let</span> <span class="attr">eventData</span>: emitter.<span class="property">EventData</span> = &#123;</span><br><span class="line">              <span class="attr">data</span>: &#123;</span><br><span class="line">                <span class="string">&quot;colorTag&quot;</span>: <span class="number">1</span></span><br><span class="line">              &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            emitter.<span class="title function_">emit</span>(innerEvent, eventData)</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">preIndex</span> != -<span class="number">1</span>) &#123;</span><br><span class="line">              <span class="variable language_">console</span>.<span class="title function_">info</span>(<span class="string">`preIndex: <span class="subst">$&#123;<span class="variable language_">this</span>.preIndex&#125;</span>, index: <span class="subst">$&#123;item.id&#125;</span>, black`</span>)</span><br><span class="line">              <span class="keyword">let</span> <span class="attr">innerEvent</span>: emitter.<span class="property">InnerEvent</span> = &#123; <span class="attr">eventId</span>: <span class="variable language_">this</span>.<span class="property">preIndex</span> &#125;</span><br><span class="line">              <span class="comment">// 取消选中态：红变黑</span></span><br><span class="line">              <span class="keyword">let</span> <span class="attr">eventData</span>: emitter.<span class="property">EventData</span> = &#123;</span><br><span class="line">                <span class="attr">data</span>: &#123;</span><br><span class="line">                  <span class="string">&quot;colorTag&quot;</span>: <span class="number">0</span></span><br><span class="line">                &#125;</span><br><span class="line">              &#125;</span><br><span class="line">              emitter.<span class="title function_">emit</span>(innerEvent, eventData)</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">preIndex</span> = item.<span class="property">id</span></span><br><span class="line">          &#125;)</span><br><span class="line">        &#125;, <span class="function">(<span class="params">item: ViewData</span>) =&gt;</span> <span class="title class_">JSON</span>.<span class="title function_">stringify</span>(item))</span><br><span class="line">      &#125;.<span class="title function_">columnsTemplate</span>(<span class="string">&#x27;1fr 1fr&#x27;</span>)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">export</span> struct <span class="title class_">TapImage</span> &#123;</span><br><span class="line">  <span class="meta">@State</span> <span class="attr">tapColor</span>: <span class="title class_">Color</span> = <span class="title class_">Color</span>.<span class="property">Black</span>;</span><br><span class="line">  <span class="keyword">private</span> <span class="attr">index</span>: <span class="built_in">number</span> = <span class="number">0</span>;</span><br><span class="line">  <span class="keyword">private</span> <span class="attr">uri</span>: <span class="title class_">Resource</span> = &#123;</span><br><span class="line">    <span class="attr">id</span>: <span class="number">0</span>,</span><br><span class="line">    <span class="attr">type</span>: <span class="number">0</span>,</span><br><span class="line">    <span class="attr">moduleName</span>: <span class="string">&quot;&quot;</span>,</span><br><span class="line">    <span class="attr">bundleName</span>: <span class="string">&quot;&quot;</span></span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">onTapIndexChange</span>(<span class="params">colorTag: emitter.EventData</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (colorTag.<span class="property">data</span> != <span class="literal">null</span>) &#123;</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">tapColor</span> = colorTag.<span class="property">data</span>.<span class="property">colorTag</span> ? <span class="title class_">Color</span>.<span class="property">Red</span> : <span class="title class_">Color</span>.<span class="property">Black</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">aboutToAppear</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="comment">//定义事件ID</span></span><br><span class="line">    <span class="keyword">let</span> <span class="attr">innerEvent</span>: emitter.<span class="property">InnerEvent</span> = &#123; <span class="attr">eventId</span>: <span class="variable language_">this</span>.<span class="property">index</span> &#125;</span><br><span class="line">    emitter.<span class="title function_">on</span>(innerEvent, <span class="function"><span class="params">data</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="title function_">onTapIndexChange</span>(data)</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">Column</span>() &#123;</span><br><span class="line">      <span class="title class_">Image</span>(<span class="variable language_">this</span>.<span class="property">uri</span>)</span><br><span class="line">        .<span class="title function_">objectFit</span>(<span class="title class_">ImageFit</span>.<span class="property">Cover</span>)</span><br><span class="line">        .<span class="title function_">border</span>(&#123; <span class="attr">width</span>: <span class="number">5</span>, <span class="attr">style</span>: <span class="title class_">BorderStyle</span>.<span class="property">Dotted</span>, <span class="attr">color</span>: <span class="variable language_">this</span>.<span class="property">tapColor</span> &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>以上通知事件逻辑简单，也可以简化成三元表达式。</p>
<figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// xxx.ets</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">ViewData</span> &#123;</span><br><span class="line">  <span class="attr">title</span>: <span class="built_in">string</span>;</span><br><span class="line">  <span class="attr">uri</span>: <span class="title class_">Resource</span>;</span><br><span class="line">  <span class="attr">color</span>: <span class="title class_">Color</span> = <span class="title class_">Color</span>.<span class="property">Black</span>;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params">title: <span class="built_in">string</span>, uri: Resource</span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">title</span> = title;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">uri</span> = uri</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Entry</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line">struct <span class="title class_">Gallery2</span> &#123;</span><br><span class="line">  <span class="attr">dataList</span>: <span class="title class_">Array</span>&lt;<span class="title class_">ViewData</span>&gt; = [<span class="keyword">new</span> <span class="title class_">ViewData</span>(<span class="string">&#x27;flower&#x27;</span>, $r(<span class="string">&#x27;app.media.icon&#x27;</span>)), <span class="keyword">new</span> <span class="title class_">ViewData</span>(<span class="string">&#x27;OMG&#x27;</span>, $r(<span class="string">&#x27;app.media.icon&#x27;</span>)), <span class="keyword">new</span> <span class="title class_">ViewData</span>(<span class="string">&#x27;OMG&#x27;</span>, $r(<span class="string">&#x27;app.media.icon&#x27;</span>))]</span><br><span class="line">  <span class="attr">scroller</span>: <span class="title class_">Scroller</span> = <span class="keyword">new</span> <span class="title class_">Scroller</span>()</span><br><span class="line"></span><br><span class="line">  <span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">Column</span>() &#123;</span><br><span class="line">      <span class="title class_">Grid</span>(<span class="variable language_">this</span>.<span class="property">scroller</span>) &#123;</span><br><span class="line">        <span class="title class_">ForEach</span>(<span class="variable language_">this</span>.<span class="property">dataList</span>, <span class="function">(<span class="params">item: ViewData, index?: <span class="built_in">number</span></span>) =&gt;</span> &#123;</span><br><span class="line">          <span class="title class_">GridItem</span>() &#123;</span><br><span class="line">            <span class="title class_">TapImage</span>(&#123;</span><br><span class="line">              <span class="attr">uri</span>: item.<span class="property">uri</span>,</span><br><span class="line">              <span class="attr">index</span>: index</span><br><span class="line">            &#125;)</span><br><span class="line">          &#125;.<span class="title function_">aspectRatio</span>(<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line">        &#125;, <span class="function">(<span class="params">item: ViewData, index?: <span class="built_in">number</span></span>) =&gt;</span> &#123;</span><br><span class="line">          <span class="keyword">return</span> <span class="title class_">JSON</span>.<span class="title function_">stringify</span>(item) + index;</span><br><span class="line">        &#125;)</span><br><span class="line">      &#125;.<span class="title function_">columnsTemplate</span>(<span class="string">&#x27;1fr 1fr&#x27;</span>)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">export</span> struct <span class="title class_">TapImage</span> &#123;</span><br><span class="line">  <span class="meta">@StorageLink</span>(<span class="string">&#x27;tapIndex&#x27;</span>) <span class="attr">tapIndex</span>: <span class="built_in">number</span> = -<span class="number">1</span>;</span><br><span class="line">  <span class="keyword">private</span> <span class="attr">index</span>: <span class="built_in">number</span> = <span class="number">0</span>;</span><br><span class="line">  <span class="keyword">private</span> <span class="attr">uri</span>: <span class="title class_">Resource</span> = &#123;</span><br><span class="line">    <span class="attr">id</span>: <span class="number">0</span>,</span><br><span class="line">    <span class="attr">type</span>: <span class="number">0</span>,</span><br><span class="line">    <span class="attr">moduleName</span>: <span class="string">&quot;&quot;</span>,</span><br><span class="line">    <span class="attr">bundleName</span>: <span class="string">&quot;&quot;</span></span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">Column</span>() &#123;</span><br><span class="line">      <span class="title class_">Image</span>(<span class="variable language_">this</span>.<span class="property">uri</span>)</span><br><span class="line">        .<span class="title function_">objectFit</span>(<span class="title class_">ImageFit</span>.<span class="property">Cover</span>)</span><br><span class="line">        .<span class="title function_">onClick</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">tapIndex</span> = <span class="variable language_">this</span>.<span class="property">index</span>;</span><br><span class="line">        &#125;)</span><br><span class="line">        .<span class="title function_">border</span>(&#123;</span><br><span class="line">          <span class="attr">width</span>: <span class="number">5</span>,</span><br><span class="line">          <span class="attr">style</span>: <span class="title class_">BorderStyle</span>.<span class="property">Dotted</span>,</span><br><span class="line">          <span class="attr">color</span>: (<span class="variable language_">this</span>.<span class="property">tapIndex</span> &gt;= <span class="number">0</span> &amp;&amp; <span class="variable language_">this</span>.<span class="property">index</span> === <span class="variable language_">this</span>.<span class="property">tapIndex</span>) ? <span class="title class_">Color</span>.<span class="property">Red</span> : <span class="title class_">Color</span>.<span class="property">Black</span></span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h6 id="AppStorage支持联合类型"><a href="#AppStorage支持联合类型" class="headerlink" title="AppStorage支持联合类型"></a>AppStorage支持联合类型</h6><p>在下面的示例中，变量A的类型为number | null，变量B的类型为number | undefined。Text组件初始化分别显示为null和undefined，点击切换为数字，再次点击切换回null和undefined。</p>
<figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Component</span></span><br><span class="line">struct <span class="title class_">StorLink</span> &#123;</span><br><span class="line">  <span class="meta">@StorageLink</span>(<span class="string">&quot;AA&quot;</span>) <span class="attr">A</span>: <span class="built_in">number</span> | <span class="literal">null</span> = <span class="literal">null</span>;</span><br><span class="line">  <span class="meta">@StorageLink</span>(<span class="string">&quot;BB&quot;</span>) <span class="attr">B</span>: <span class="built_in">number</span> | <span class="literal">undefined</span> = <span class="literal">undefined</span>;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">Column</span>() &#123;</span><br><span class="line">      <span class="title class_">Text</span>(<span class="string">&quot;@StorageLink接口初始化，@StorageLink取值&quot;</span>)</span><br><span class="line">      <span class="title class_">Text</span>(<span class="variable language_">this</span>.<span class="property">A</span> + <span class="string">&quot;&quot;</span>).<span class="title function_">fontSize</span>(<span class="number">20</span>).<span class="title function_">onClick</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">A</span> ? <span class="variable language_">this</span>.<span class="property">A</span> = <span class="literal">null</span> : <span class="variable language_">this</span>.<span class="property">A</span> = <span class="number">1</span>;</span><br><span class="line">      &#125;)</span><br><span class="line">      <span class="title class_">Text</span>(<span class="variable language_">this</span>.<span class="property">B</span> + <span class="string">&quot;&quot;</span>).<span class="title function_">fontSize</span>(<span class="number">20</span>).<span class="title function_">onClick</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">B</span> ? <span class="variable language_">this</span>.<span class="property">B</span> = <span class="literal">undefined</span> : <span class="variable language_">this</span>.<span class="property">B</span> = <span class="number">1</span>;</span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">    .<span class="title function_">borderWidth</span>(<span class="number">3</span>).<span class="title function_">borderColor</span>(<span class="title class_">Color</span>.<span class="property">Red</span>)</span><br><span class="line"></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line">struct <span class="title class_">StorProp</span> &#123;</span><br><span class="line">  <span class="meta">@StorageProp</span>(<span class="string">&quot;AAA&quot;</span>) <span class="attr">A</span>: <span class="built_in">number</span> | <span class="literal">null</span> = <span class="literal">null</span>;</span><br><span class="line">  <span class="meta">@StorageProp</span>(<span class="string">&quot;BBB&quot;</span>) <span class="attr">B</span>: <span class="built_in">number</span> | <span class="literal">undefined</span> = <span class="literal">undefined</span>;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">Column</span>() &#123;</span><br><span class="line">      <span class="title class_">Text</span>(<span class="string">&quot;@StorageProp接口初始化，@StorageProp取值&quot;</span>)</span><br><span class="line">      <span class="title class_">Text</span>(<span class="variable language_">this</span>.<span class="property">A</span> + <span class="string">&quot;&quot;</span>).<span class="title function_">fontSize</span>(<span class="number">20</span>).<span class="title function_">onClick</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">A</span> ? <span class="variable language_">this</span>.<span class="property">A</span> = <span class="literal">null</span> : <span class="variable language_">this</span>.<span class="property">A</span> = <span class="number">1</span>;</span><br><span class="line">      &#125;)</span><br><span class="line">      <span class="title class_">Text</span>(<span class="variable language_">this</span>.<span class="property">B</span> + <span class="string">&quot;&quot;</span>).<span class="title function_">fontSize</span>(<span class="number">20</span>).<span class="title function_">onClick</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">B</span> ? <span class="variable language_">this</span>.<span class="property">B</span> = <span class="literal">undefined</span> : <span class="variable language_">this</span>.<span class="property">B</span> = <span class="number">1</span>;</span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">    .<span class="title function_">borderWidth</span>(<span class="number">3</span>).<span class="title function_">borderColor</span>(<span class="title class_">Color</span>.<span class="property">Blue</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Entry</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line">struct <span class="title class_">TestCase3</span> &#123;</span><br><span class="line">  <span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">Row</span>() &#123;</span><br><span class="line">      <span class="title class_">Column</span>() &#123;</span><br><span class="line">        <span class="title class_">StorLink</span>()</span><br><span class="line">        <span class="title class_">StorProp</span>()</span><br><span class="line">      &#125;</span><br><span class="line">      .<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    .<span class="title function_">height</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h6 id="装饰Date类型变量-1"><a href="#装饰Date类型变量-1" class="headerlink" title="装饰Date类型变量"></a>装饰Date类型变量</h6><blockquote>
<p>说明：</p>
<p>从API version 12开始，AppStorage支持Date类型。</p>
</blockquote>
<p>在下面的示例中，@StorageLink装饰的selectedDate类型为Date，点击Button改变selectedDate的值，视图会随之刷新。</p>
<figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Entry</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line">struct <span class="title class_">DateSample</span> &#123;</span><br><span class="line">  <span class="meta">@StorageLink</span>(<span class="string">&quot;date&quot;</span>) <span class="attr">selectedDate</span>: <span class="title class_">Date</span> = <span class="keyword">new</span> <span class="title class_">Date</span>(<span class="string">&#x27;2021-08-08&#x27;</span>);</span><br><span class="line"></span><br><span class="line">  <span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">Column</span>() &#123;</span><br><span class="line">      <span class="title class_">Button</span>(<span class="string">&#x27;set selectedDate to 2023-07-08&#x27;</span>)</span><br><span class="line">        .<span class="title function_">margin</span>(<span class="number">10</span>)</span><br><span class="line">        .<span class="title function_">onClick</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">          <span class="title class_">AppStorage</span>.<span class="title function_">setOrCreate</span>(<span class="string">&quot;date&quot;</span>, <span class="keyword">new</span> <span class="title class_">Date</span>(<span class="string">&#x27;2023-07-08&#x27;</span>));</span><br><span class="line">        &#125;)</span><br><span class="line">      <span class="title class_">Button</span>(<span class="string">&#x27;increase the year by 1&#x27;</span>)</span><br><span class="line">        .<span class="title function_">margin</span>(<span class="number">10</span>)</span><br><span class="line">        .<span class="title function_">onClick</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">selectedDate</span>.<span class="title function_">setFullYear</span>(<span class="variable language_">this</span>.<span class="property">selectedDate</span>.<span class="title function_">getFullYear</span>() + <span class="number">1</span>);</span><br><span class="line">        &#125;)</span><br><span class="line">      <span class="title class_">Button</span>(<span class="string">&#x27;increase the month by 1&#x27;</span>)</span><br><span class="line">        .<span class="title function_">margin</span>(<span class="number">10</span>)</span><br><span class="line">        .<span class="title function_">onClick</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">selectedDate</span>.<span class="title function_">setMonth</span>(<span class="variable language_">this</span>.<span class="property">selectedDate</span>.<span class="title function_">getMonth</span>() + <span class="number">1</span>);</span><br><span class="line">        &#125;)</span><br><span class="line">      <span class="title class_">Button</span>(<span class="string">&#x27;increase the day by 1&#x27;</span>)</span><br><span class="line">        .<span class="title function_">margin</span>(<span class="number">10</span>)</span><br><span class="line">        .<span class="title function_">onClick</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">selectedDate</span>.<span class="title function_">setDate</span>(<span class="variable language_">this</span>.<span class="property">selectedDate</span>.<span class="title function_">getDate</span>() + <span class="number">1</span>);</span><br><span class="line">        &#125;)</span><br><span class="line">      <span class="title class_">DatePicker</span>(&#123;</span><br><span class="line">        <span class="attr">start</span>: <span class="keyword">new</span> <span class="title class_">Date</span>(<span class="string">&#x27;1970-1-1&#x27;</span>),</span><br><span class="line">        <span class="attr">end</span>: <span class="keyword">new</span> <span class="title class_">Date</span>(<span class="string">&#x27;2100-1-1&#x27;</span>),</span><br><span class="line">        <span class="attr">selected</span>: $$this.<span class="property">selectedDate</span></span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;.<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h6 id="装饰Map类型变量-1"><a href="#装饰Map类型变量-1" class="headerlink" title="装饰Map类型变量"></a>装饰Map类型变量</h6><blockquote>
<p>说明：</p>
<p>从API version 12开始，AppStorage支持Map类型。</p>
</blockquote>
<p>在下面的示例中，@StorageLink装饰的message类型为Map&lt;number, string&gt;，点击Button改变message的值，视图会随之刷新。</p>
<figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Entry</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line">struct <span class="title class_">MapSample</span> &#123;</span><br><span class="line">  <span class="meta">@StorageLink</span>(<span class="string">&quot;map&quot;</span>) <span class="attr">message</span>: <span class="title class_">Map</span>&lt;<span class="built_in">number</span>, <span class="built_in">string</span>&gt; = <span class="keyword">new</span> <span class="title class_">Map</span>([[<span class="number">0</span>, <span class="string">&quot;a&quot;</span>], [<span class="number">1</span>, <span class="string">&quot;b&quot;</span>], [<span class="number">3</span>, <span class="string">&quot;c&quot;</span>]]);</span><br><span class="line"></span><br><span class="line">  <span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">Row</span>() &#123;</span><br><span class="line">      <span class="title class_">Column</span>() &#123;</span><br><span class="line">        <span class="title class_">ForEach</span>(<span class="title class_">Array</span>.<span class="title function_">from</span>(<span class="variable language_">this</span>.<span class="property">message</span>.<span class="title function_">entries</span>()), <span class="function">(<span class="params">item: [<span class="built_in">number</span>, <span class="built_in">string</span>]</span>) =&gt;</span> &#123;</span><br><span class="line">          <span class="title class_">Text</span>(<span class="string">`<span class="subst">$&#123;item[<span class="number">0</span>]&#125;</span>`</span>).<span class="title function_">fontSize</span>(<span class="number">30</span>)</span><br><span class="line">          <span class="title class_">Text</span>(<span class="string">`<span class="subst">$&#123;item[<span class="number">1</span>]&#125;</span>`</span>).<span class="title function_">fontSize</span>(<span class="number">30</span>)</span><br><span class="line">          <span class="title class_">Divider</span>()</span><br><span class="line">        &#125;)</span><br><span class="line">        <span class="title class_">Button</span>(<span class="string">&#x27;init map&#x27;</span>).<span class="title function_">onClick</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">message</span> = <span class="keyword">new</span> <span class="title class_">Map</span>([[<span class="number">0</span>, <span class="string">&quot;a&quot;</span>], [<span class="number">1</span>, <span class="string">&quot;b&quot;</span>], [<span class="number">3</span>, <span class="string">&quot;c&quot;</span>]]);</span><br><span class="line">        &#125;)</span><br><span class="line">        <span class="title class_">Button</span>(<span class="string">&#x27;set new one&#x27;</span>).<span class="title function_">onClick</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">message</span>.<span class="title function_">set</span>(<span class="number">4</span>, <span class="string">&quot;d&quot;</span>);</span><br><span class="line">        &#125;)</span><br><span class="line">        <span class="title class_">Button</span>(<span class="string">&#x27;clear&#x27;</span>).<span class="title function_">onClick</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">message</span>.<span class="title function_">clear</span>();</span><br><span class="line">        &#125;)</span><br><span class="line">        <span class="title class_">Button</span>(<span class="string">&#x27;replace the existing one&#x27;</span>).<span class="title function_">onClick</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">message</span>.<span class="title function_">set</span>(<span class="number">0</span>, <span class="string">&quot;aa&quot;</span>);</span><br><span class="line">        &#125;)</span><br><span class="line">        <span class="title class_">Button</span>(<span class="string">&#x27;delete the existing one&#x27;</span>).<span class="title function_">onClick</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">          <span class="title class_">AppStorage</span>.<span class="property">get</span>&lt;<span class="title class_">Map</span>&lt;<span class="built_in">number</span>, <span class="built_in">string</span>&gt;&gt;(<span class="string">&quot;map&quot;</span>)?.<span class="title function_">delete</span>(<span class="number">0</span>);</span><br><span class="line">        &#125;)</span><br><span class="line">      &#125;</span><br><span class="line">      .<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    .<span class="title function_">height</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h6 id="装饰Set类型变量-1"><a href="#装饰Set类型变量-1" class="headerlink" title="装饰Set类型变量"></a>装饰Set类型变量</h6><blockquote>
<p>说明：</p>
<p>从API version 12开始，AppStorage支持Set类型。</p>
</blockquote>
<p>在下面的示例中，@StorageLink装饰的memberSet类型为Set<number>，点击Button改变memberSet的值，视图会随之刷新。</p>
<figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Entry</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line">struct <span class="title class_">SetSample</span> &#123;</span><br><span class="line">  <span class="meta">@StorageLink</span>(<span class="string">&quot;set&quot;</span>) <span class="attr">memberSet</span>: <span class="title class_">Set</span>&lt;<span class="built_in">number</span>&gt; = <span class="keyword">new</span> <span class="title class_">Set</span>([<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>]);</span><br><span class="line"></span><br><span class="line">  <span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">Row</span>() &#123;</span><br><span class="line">      <span class="title class_">Column</span>() &#123;</span><br><span class="line">        <span class="title class_">ForEach</span>(<span class="title class_">Array</span>.<span class="title function_">from</span>(<span class="variable language_">this</span>.<span class="property">memberSet</span>.<span class="title function_">entries</span>()), <span class="function">(<span class="params">item: [<span class="built_in">number</span>, <span class="built_in">string</span>]</span>) =&gt;</span> &#123;</span><br><span class="line">          <span class="title class_">Text</span>(<span class="string">`<span class="subst">$&#123;item[<span class="number">0</span>]&#125;</span>`</span>)</span><br><span class="line">            .<span class="title function_">fontSize</span>(<span class="number">30</span>)</span><br><span class="line">          <span class="title class_">Divider</span>()</span><br><span class="line">        &#125;)</span><br><span class="line">        <span class="title class_">Button</span>(<span class="string">&#x27;init set&#x27;</span>)</span><br><span class="line">          .<span class="title function_">onClick</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">memberSet</span> = <span class="keyword">new</span> <span class="title class_">Set</span>([<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>]);</span><br><span class="line">          &#125;)</span><br><span class="line">        <span class="title class_">Button</span>(<span class="string">&#x27;set new one&#x27;</span>)</span><br><span class="line">          .<span class="title function_">onClick</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">            <span class="title class_">AppStorage</span>.<span class="property">get</span>&lt;<span class="title class_">Set</span>&lt;<span class="built_in">number</span>&gt;&gt;(<span class="string">&quot;set&quot;</span>)?.<span class="title function_">add</span>(<span class="number">5</span>);</span><br><span class="line">          &#125;)</span><br><span class="line">        <span class="title class_">Button</span>(<span class="string">&#x27;clear&#x27;</span>)</span><br><span class="line">          .<span class="title function_">onClick</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">memberSet</span>.<span class="title function_">clear</span>();</span><br><span class="line">          &#125;)</span><br><span class="line">        <span class="title class_">Button</span>(<span class="string">&#x27;delete the first one&#x27;</span>)</span><br><span class="line">          .<span class="title function_">onClick</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">memberSet</span>.<span class="title function_">delete</span>(<span class="number">0</span>);</span><br><span class="line">          &#125;)</span><br><span class="line">      &#125;</span><br><span class="line">      .<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    .<span class="title function_">height</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="限制条件-1"><a href="#限制条件-1" class="headerlink" title="限制条件"></a>限制条件</h5><p>AppStorage与<span class="exturl" data-url="aHR0cHM6Ly9kZXZlbG9wZXIuaHVhd2VpLmNvbS9jb25zdW1lci9jbi9kb2MvaGFybW9ueW9zLWd1aWRlcy1WNS9hcmt0cy1wZXJzaXN0c3RvcmFnZS1WNQ==">PersistentStorage<i class="fa fa-external-link-alt"></i></span>以及<span class="exturl" data-url="aHR0cHM6Ly9kZXZlbG9wZXIuaHVhd2VpLmNvbS9jb25zdW1lci9jbi9kb2MvaGFybW9ueW9zLWd1aWRlcy1WNS9hcmt0cy1lbnZpcm9ubWVudC1WNQ==">Environment<i class="fa fa-external-link-alt"></i></span>配合使用时，需要注意以下几点：</p>
<ul>
<li>在AppStorage中创建属性后，调用PersistentStorage.persistProp()接口时，会使用在AppStorage中已经存在的值，并覆盖PersistentStorage中的同名属性，所以建议要使用相反的调用顺序，反例可见<span class="exturl" data-url="aHR0cHM6Ly9kZXZlbG9wZXIuaHVhd2VpLmNvbS9jb25zdW1lci9jbi9kb2MvaGFybW9ueW9zLWd1aWRlcy1WNS9hcmt0cy1wZXJzaXN0c3RvcmFnZS1WNSMlRTUlOUMlQThwZXJzaXN0ZW50c3RvcmFnZSVFNCVCOSU4QiVFNSU4OSU4RCVFOCVBRSVCRiVFOSU5NyVBRWFwcHN0b3JhZ2UlRTQlQjglQUQlRTclOUElODQlRTUlQjElOUUlRTYlODAlQTc=">在PersistentStorage之前访问AppStorage中的属性<i class="fa fa-external-link-alt"></i></span>；</li>
<li>如果在AppStorage中已经创建属性后，再调用Environment.envProp()创建同名的属性，会调用失败。因为AppStorage已经有同名属性，Environment环境变量不会再写入AppStorage中，所以建议AppStorage中属性不要使用Environment预置环境变量名。</li>
<li>状态装饰器装饰的变量，改变会引起UI的渲染更新，如果改变的变量不是用于UI更新，只是用于消息传递，推荐使用 emitter方式。例子可见<span class="exturl" data-url="aHR0cHM6Ly9kZXZlbG9wZXIuaHVhd2VpLmNvbS9jb25zdW1lci9jbi9kb2MvaGFybW9ueW9zLWd1aWRlcy1WNS9hcmt0cy1hcHBzdG9yYWdlLVY1IyVFNCVCOCU4RCVFNSVCQiVCQSVFOCVBRSVBRSVFNSU4MCU5RiVFNSU4QSVBOXN0b3JhZ2VsaW5rJUU3JTlBJTg0JUU1JThGJThDJUU1JTkwJTkxJUU1JTkwJThDJUU2JUFEJUE1JUU2JTlDJUJBJUU1JTg4JUI2JUU1JUFFJTlFJUU3JThFJUIwJUU0JUJBJThCJUU0JUJCJUI2JUU5JTgwJTlBJUU3JTlGJUE1">不建议借助@StorageLink的双向同步机制实现事件通知<i class="fa fa-external-link-alt"></i></span>。</li>
</ul>
<h4 id="PersistentStorage：持久化存储UI状态"><a href="#PersistentStorage：持久化存储UI状态" class="headerlink" title="PersistentStorage：持久化存储UI状态"></a>PersistentStorage：持久化存储UI状态</h4><p>PersistentStorage是应用程序中的可选单例对象。此对象的作用是持久化存储选定的AppStorage属性，以确保这些属性在应用程序重新启动时的值与应用程序关闭时的值相同。</p>
<h5 id="概述-3"><a href="#概述-3" class="headerlink" title="概述"></a>概述</h5><p>PersistentStorage将选定的AppStorage属性保留在设备磁盘上。应用程序通过API，以决定哪些AppStorage属性应借助PersistentStorage持久化。UI和业务逻辑不直接访问PersistentStorage中的属性，所有属性访问都是对AppStorage的访问，AppStorage中的更改会自动同步到PersistentStorage。</p>
<p>PersistentStorage和AppStorage中的属性建立双向同步。应用开发通常通过AppStorage访问PersistentStorage，另外还有一些接口可以用于管理持久化属性，但是业务逻辑始终是通过AppStorage获取和设置属性的。</p>
<h5 id="限制条件-2"><a href="#限制条件-2" class="headerlink" title="限制条件"></a>限制条件</h5><p>PersistentStorage允许的类型和值有：</p>
<ul>
<li>number, string, boolean, enum 等简单类型。</li>
<li>可以被JSON.stringify()和JSON.parse()重构的对象，以及对象的属性方法不支持持久化。</li>
<li>API12及以上支持Map类型，可以观察到Map整体的赋值，同时可通过调用Map的接口set, clear, delete 更新Map的值。且更新的值被持久化存储。详见<span class="exturl" data-url="aHR0cHM6Ly9kZXZlbG9wZXIuaHVhd2VpLmNvbS9jb25zdW1lci9jbi9kb2MvaGFybW9ueW9zLWd1aWRlcy1WNS9hcmt0cy1wZXJzaXN0c3RvcmFnZS1WNSMlRTglQTMlODUlRTklQTUlQjBtYXAlRTclQjElQkIlRTUlOUUlOEIlRTUlOEYlOTglRTklODclOEY=">装饰Map类型变量<i class="fa fa-external-link-alt"></i></span>。</li>
<li>API12及以上支持Set类型，可以观察到Set整体的赋值，同时可通过调用Set的接口add, clear, delete 更新Set的值。且更新的值被持久化存储。详见<span class="exturl" data-url="aHR0cHM6Ly9kZXZlbG9wZXIuaHVhd2VpLmNvbS9jb25zdW1lci9jbi9kb2MvaGFybW9ueW9zLWd1aWRlcy1WNS9hcmt0cy1wZXJzaXN0c3RvcmFnZS1WNSMlRTglQTMlODUlRTklQTUlQjBzZXQlRTclQjElQkIlRTUlOUUlOEIlRTUlOEYlOTglRTklODclOEY=">装饰Set类型变量<i class="fa fa-external-link-alt"></i></span>。</li>
<li>API12及以上支持Date类型，可以观察到Date整体的赋值，同时可通过调用Date的接口setFullYear, setMonth, setDate, setHours, setMinutes, setSeconds, setMilliseconds, setTime, setUTCFullYear, setUTCMonth, setUTCDate, setUTCHours, setUTCMinutes, setUTCSeconds, setUTCMilliseconds 更新Date的属性。且更新的值被持久化存储。详见<span class="exturl" data-url="aHR0cHM6Ly9kZXZlbG9wZXIuaHVhd2VpLmNvbS9jb25zdW1lci9jbi9kb2MvaGFybW9ueW9zLWd1aWRlcy1WNS9hcmt0cy1wZXJzaXN0c3RvcmFnZS1WNSMlRTglQTMlODUlRTklQTUlQjBkYXRlJUU3JUIxJUJCJUU1JTlFJThCJUU1JThGJTk4JUU5JTg3JThG">装饰Date类型变量<i class="fa fa-external-link-alt"></i></span>。</li>
<li>API12及以上支持undefined 和 null。</li>
<li>API12及以上<span class="exturl" data-url="aHR0cHM6Ly9kZXZlbG9wZXIuaHVhd2VpLmNvbS9jb25zdW1lci9jbi9kb2MvaGFybW9ueW9zLWd1aWRlcy1WNS9hcmt0cy1wZXJzaXN0c3RvcmFnZS1WNSMlRTYlOTQlQUYlRTYlOEMlODElRTglODElOTQlRTUlOTAlODglRTclQjElQkIlRTUlOUUlOEI=">支持联合类型<i class="fa fa-external-link-alt"></i></span>。</li>
</ul>
<p>PersistentStorage不允许的类型和值有：</p>
<ul>
<li>不支持嵌套对象（对象数组，对象的属性是对象等）。因为目前框架无法检测AppStorage中嵌套对象（包括数组）值的变化，所以无法写回到PersistentStorage中。</li>
</ul>
<p>持久化数据是一个相对缓慢的操作，应用程序应避免以下情况：</p>
<ul>
<li>持久化大型数据集。</li>
<li>持久化经常变化的变量。</li>
</ul>
<p>PersistentStorage的持久化变量最好是小于2kb的数据，不要大量的数据持久化，因为PersistentStorage写入磁盘的操作是同步的，大量的数据本地化读写会同步在UI线程中执行，影响UI渲染性能。如果开发者需要存储大量的数据，建议使用数据库api。</p>
<p>PersistentStorage和UI实例相关联，持久化操作需要在UI实例初始化成功后（即<span class="exturl" data-url="aHR0cHM6Ly9kZXZlbG9wZXIuaHVhd2VpLmNvbS9jb25zdW1lci9jbi9kb2MvaGFybW9ueW9zLXJlZmVyZW5jZXMtVjUvanMtYXBpcy13aW5kb3ctVjUjbG9hZGNvbnRlbnQ5LTI=">loadContent<i class="fa fa-external-link-alt"></i></span>传入的回调被调用时）才可以被调用，早于该时机调用会导致持久化失败。</p>
<figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// EntryAbility.ets</span></span><br><span class="line"><span class="title function_">onWindowStageCreate</span>(<span class="attr">windowStage</span>: <span class="variable language_">window</span>.<span class="property">WindowStage</span>): <span class="built_in">void</span> &#123;</span><br><span class="line">  windowStage.<span class="title function_">loadContent</span>(<span class="string">&#x27;pages/Index&#x27;</span>, <span class="function">(<span class="params">err</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (err.<span class="property">code</span>) &#123;</span><br><span class="line">      <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="title class_">PersistentStorage</span>.<span class="title function_">persistProp</span>(<span class="string">&#x27;aProp&#x27;</span>, <span class="number">47</span>);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="使用场景-2"><a href="#使用场景-2" class="headerlink" title="使用场景"></a>使用场景</h5><h6 id="从AppStorage中访问PersistentStorage初始化的属性"><a href="#从AppStorage中访问PersistentStorage初始化的属性" class="headerlink" title="从AppStorage中访问PersistentStorage初始化的属性"></a>从AppStorage中访问PersistentStorage初始化的属性</h6><ol>
<li><p>初始化PersistentStorage：</p>
<figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">PersistentStorage</span>.<span class="title function_">persistProp</span>(<span class="string">&#x27;aProp&#x27;</span>, <span class="number">47</span>);</span><br></pre></td></tr></table></figure>
</li>
<li><p>在AppStorage获取对应属性：</p>
<figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">AppStorage</span>.<span class="property">get</span>&lt;<span class="built_in">number</span>&gt;(<span class="string">&#x27;aProp&#x27;</span>); <span class="comment">// returns 47</span></span><br></pre></td></tr></table></figure>

<p>或在组件内部定义：</p>
<figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@StorageLink</span>(<span class="string">&#x27;aProp&#x27;</span>) <span class="attr">aProp</span>: <span class="built_in">number</span> = <span class="number">48</span>;</span><br></pre></td></tr></table></figure></li>
</ol>
<p>完整代码如下：</p>
<figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">PersistentStorage</span>.<span class="title function_">persistProp</span>(<span class="string">&#x27;aProp&#x27;</span>, <span class="number">47</span>);</span><br><span class="line"></span><br><span class="line"><span class="meta">@Entry</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line">struct <span class="title class_">Index</span> &#123;</span><br><span class="line">  <span class="meta">@State</span> <span class="attr">message</span>: <span class="built_in">string</span> = <span class="string">&#x27;Hello World&#x27;</span></span><br><span class="line">  <span class="meta">@StorageLink</span>(<span class="string">&#x27;aProp&#x27;</span>) <span class="attr">aProp</span>: <span class="built_in">number</span> = <span class="number">48</span></span><br><span class="line"></span><br><span class="line">  <span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">Row</span>() &#123;</span><br><span class="line">      <span class="title class_">Column</span>() &#123;</span><br><span class="line">        <span class="title class_">Text</span>(<span class="variable language_">this</span>.<span class="property">message</span>)</span><br><span class="line">        <span class="comment">// 应用退出时会保存当前结果。重新启动后，会显示上一次的保存结果</span></span><br><span class="line">        <span class="title class_">Text</span>(<span class="string">`<span class="subst">$&#123;<span class="variable language_">this</span>.aProp&#125;</span>`</span>)</span><br><span class="line">          .<span class="title function_">onClick</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">aProp</span> += <span class="number">1</span>;</span><br><span class="line">          &#125;)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li><p>新应用安装后首次启动运行：</p>
<ol>
<li>调用persistProp初始化PersistentStorage，首先查询在PersistentStorage本地文件中是否存在“aProp”，查询结果为不存在，因为应用是第一次安装。</li>
<li>接着查询属性“aProp”在AppStorage中是否存在，依旧不存在。</li>
<li>在AppStorge中创建名为“aProp”的number类型属性，属性初始值是定义的默认值47。</li>
<li>PersistentStorage将属性“aProp”和值47写入磁盘，AppStorage中“aProp”对应的值和其后续的更改将被持久化。</li>
<li>在Index组件中创建状态变量@StorageLink(‘aProp’) aProp，和AppStorage中“aProp”双向绑定，在创建的过程中会在AppStorage中查找，成功找到“aProp”，所以使用其在AppStorage找到的值47。</li>
</ol>
</li>
<li><p>触发点击事件后：</p>
<ol>
<li>状态变量@StorageLink(‘aProp’) aProp改变，触发Text组件重新刷新。</li>
<li>@StorageLink装饰的变量是和AppStorage中建立双向同步的，所以@StorageLink(‘aProp’) aProp的变化会被同步回AppStorage中。</li>
<li>AppStorage中“aProp”属性的改变会同步到所有绑定该“aProp”的单向或者双向变量，在本示例中没有其他的绑定“aProp”的变量。</li>
<li>因为“aProp”对应的属性已经被持久化，所以在AppStorage中“aProp”的改变会触发PersistentStorage，将新的改变写入本地磁盘。后续启动应用：</li>
</ol>
</li>
<li><p>后续启动应用：</p>
<ol>
<li>执行PersistentStorage.persistProp(‘aProp’, 47)，在首先查询在PersistentStorage本地文件查询“aProp”属性，成功查询到。</li>
<li>将在PersistentStorage查询到的值写入AppStorage中。</li>
<li>在Index组件里，@StorageLink绑定的“aProp”为PersistentStorage写入AppStorage中的值，即为上一次退出应用存入的值。</li>
</ol>
</li>
</ul>
<h6 id="在PersistentStorage之前访问AppStorage中的属性"><a href="#在PersistentStorage之前访问AppStorage中的属性" class="headerlink" title="在PersistentStorage之前访问AppStorage中的属性"></a>在PersistentStorage之前访问AppStorage中的属性</h6><p>该示例为反例。在调用PersistentStorage.persistProp或者persistProps之前使用接口访问AppStorage中的属性是错误的，因为这样的调用顺序会丢失上一次应用程序运行中的属性值：</p>
<figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> aProp = <span class="title class_">AppStorage</span>.<span class="title function_">setOrCreate</span>(<span class="string">&#x27;aProp&#x27;</span>, <span class="number">47</span>);</span><br><span class="line"><span class="title class_">PersistentStorage</span>.<span class="title function_">persistProp</span>(<span class="string">&#x27;aProp&#x27;</span>, <span class="number">48</span>);</span><br></pre></td></tr></table></figure>

<p>应用在非首次运行时，先执行AppStorage.setOrCreate(‘aProp’, 47)：属性“aProp”在AppStorage中创建，其类型为number，其值设置为指定的默认值47。“aProp”是持久化的属性，所以会被写回PersistentStorage磁盘中，PersistentStorage存储的上次退出应用的值丢失。</p>
<p>PersistentStorage.persistProp(‘aProp’, 48)：在PersistentStorage中查找到“aProp”，值为刚刚使用AppStorage接口写入的47。</p>
<h6 id="在PersistentStorage之后访问AppStorage中的属性"><a href="#在PersistentStorage之后访问AppStorage中的属性" class="headerlink" title="在PersistentStorage之后访问AppStorage中的属性"></a>在PersistentStorage之后访问AppStorage中的属性</h6><p>开发者可以先判断是否需要覆盖上一次保存在PersistentStorage中的值，如果需要覆盖，再调用AppStorage的接口进行修改，如果不需要覆盖，则不调用AppStorage的接口。</p>
<figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">PersistentStorage</span>.<span class="title function_">persistProp</span>(<span class="string">&#x27;aProp&#x27;</span>, <span class="number">48</span>);</span><br><span class="line"><span class="keyword">if</span> (<span class="title class_">AppStorage</span>.<span class="title function_">get</span>(<span class="string">&#x27;aProp&#x27;</span>) &gt; <span class="number">50</span>) &#123;</span><br><span class="line">    <span class="comment">// 如果PersistentStorage存储的值超过50，设置为47</span></span><br><span class="line">    <span class="title class_">AppStorage</span>.<span class="title function_">setOrCreate</span>(<span class="string">&#x27;aProp&#x27;</span>,<span class="number">47</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>示例代码在读取PersistentStorage储存的数据后判断“aProp”的值是否大于50，如果大于50的话使用AppStorage的接口设置为47。</p>
<h6 id="支持联合类型"><a href="#支持联合类型" class="headerlink" title="支持联合类型"></a>支持联合类型</h6><p>PersistentStorage支持联合类型和undefined和null，在下面的示例中，使用persistProp方法初始化”P”为undefined。通过@StorageLink(“P”)绑定变量p，类型为number | undefined | null，点击Button改变P的值，视图会随之刷新。且P的值被持久化存储。</p>
<figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">PersistentStorage</span>.<span class="title function_">persistProp</span>(<span class="string">&quot;P&quot;</span>, <span class="literal">undefined</span>);</span><br><span class="line"></span><br><span class="line"><span class="meta">@Entry</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line">struct <span class="title class_">TestCase6</span> &#123;</span><br><span class="line">  <span class="meta">@StorageLink</span>(<span class="string">&quot;P&quot;</span>) <span class="attr">p</span>: <span class="built_in">number</span> | <span class="literal">undefined</span> | <span class="literal">null</span> = <span class="number">10</span>;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">Row</span>() &#123;</span><br><span class="line">      <span class="title class_">Column</span>() &#123;</span><br><span class="line">        <span class="title class_">Text</span>(<span class="variable language_">this</span>.<span class="property">p</span> + <span class="string">&quot;&quot;</span>)</span><br><span class="line">          .<span class="title function_">fontSize</span>(<span class="number">50</span>)</span><br><span class="line">          .<span class="title function_">fontWeight</span>(<span class="title class_">FontWeight</span>.<span class="property">Bold</span>)</span><br><span class="line">        <span class="title class_">Button</span>(<span class="string">&quot;changeToNumber&quot;</span>).<span class="title function_">onClick</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">p</span> = <span class="number">10</span>;</span><br><span class="line">        &#125;)</span><br><span class="line">        <span class="title class_">Button</span>(<span class="string">&quot;changeTo undefined&quot;</span>).<span class="title function_">onClick</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">p</span> = <span class="literal">undefined</span>;</span><br><span class="line">        &#125;)</span><br><span class="line">        <span class="title class_">Button</span>(<span class="string">&quot;changeTo null&quot;</span>).<span class="title function_">onClick</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">p</span> = <span class="literal">null</span>;</span><br><span class="line">        &#125;)</span><br><span class="line">      &#125;  </span><br><span class="line">      .<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    .<span class="title function_">height</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h6 id="装饰Date类型变量-2"><a href="#装饰Date类型变量-2" class="headerlink" title="装饰Date类型变量"></a>装饰Date类型变量</h6><p>在下面的示例中，@StorageLink装饰的persistedDate类型为Date，点击Button改变persistedDate的值，视图会随之刷新。且persistedDate的值被持久化存储。</p>
<figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">PersistentStorage</span>.<span class="title function_">persistProp</span>(<span class="string">&quot;persistedDate&quot;</span>, <span class="keyword">new</span> <span class="title class_">Date</span>());</span><br><span class="line"></span><br><span class="line"><span class="meta">@Entry</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line">struct <span class="title class_">PersistedDate</span> &#123;</span><br><span class="line">  <span class="meta">@StorageLink</span>(<span class="string">&quot;persistedDate&quot;</span>) <span class="attr">persistedDate</span>: <span class="title class_">Date</span> = <span class="keyword">new</span> <span class="title class_">Date</span>();</span><br><span class="line"></span><br><span class="line">  <span class="title function_">updateDate</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">persistedDate</span> = <span class="keyword">new</span> <span class="title class_">Date</span>();</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">List</span>() &#123;</span><br><span class="line">      <span class="title class_">ListItem</span>() &#123;</span><br><span class="line">        <span class="title class_">Column</span>() &#123;</span><br><span class="line">          <span class="title class_">Text</span>(<span class="string">`Persisted Date is <span class="subst">$&#123;<span class="variable language_">this</span>.persistedDate.toString()&#125;</span>`</span>)</span><br><span class="line">            .<span class="title function_">margin</span>(<span class="number">20</span>)</span><br><span class="line"></span><br><span class="line">          <span class="title class_">Text</span>(<span class="string">`Persisted Date month is <span class="subst">$&#123;<span class="variable language_">this</span>.persistedDate.getMonth()&#125;</span>`</span>)</span><br><span class="line">            .<span class="title function_">margin</span>(<span class="number">20</span>)</span><br><span class="line"></span><br><span class="line">          <span class="title class_">Text</span>(<span class="string">`Persisted Date day is <span class="subst">$&#123;<span class="variable language_">this</span>.persistedDate.getDay()&#125;</span>`</span>)</span><br><span class="line">            .<span class="title function_">margin</span>(<span class="number">20</span>)</span><br><span class="line"></span><br><span class="line">          <span class="title class_">Text</span>(<span class="string">`Persisted Date time is <span class="subst">$&#123;<span class="variable language_">this</span>.persistedDate.toLocaleTimeString()&#125;</span>`</span>)</span><br><span class="line">            .<span class="title function_">margin</span>(<span class="number">20</span>)</span><br><span class="line"></span><br><span class="line">          <span class="title class_">Button</span>() &#123;</span><br><span class="line">            <span class="title class_">Text</span>(<span class="string">&#x27;Update Date&#x27;</span>)</span><br><span class="line">              .<span class="title function_">fontSize</span>(<span class="number">25</span>)</span><br><span class="line">              .<span class="title function_">fontWeight</span>(<span class="title class_">FontWeight</span>.<span class="property">Bold</span>)</span><br><span class="line">              .<span class="title function_">fontColor</span>(<span class="title class_">Color</span>.<span class="property">White</span>)</span><br><span class="line">          &#125;</span><br><span class="line">          .<span class="title function_">type</span>(<span class="title class_">ButtonType</span>.<span class="property">Capsule</span>)</span><br><span class="line">          .<span class="title function_">margin</span>(&#123;</span><br><span class="line">            <span class="attr">top</span>: <span class="number">20</span></span><br><span class="line">          &#125;)</span><br><span class="line">          .<span class="title function_">backgroundColor</span>(<span class="string">&#x27;#0D9FFB&#x27;</span>)</span><br><span class="line">          .<span class="title function_">width</span>(<span class="string">&#x27;60%&#x27;</span>)</span><br><span class="line">          .<span class="title function_">height</span>(<span class="string">&#x27;5%&#x27;</span>)</span><br><span class="line">          .<span class="title function_">onClick</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">            <span class="variable language_">this</span>.<span class="title function_">updateDate</span>();</span><br><span class="line">          &#125;)</span><br><span class="line"></span><br><span class="line">        &#125;.<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h6 id="装饰Map类型变量-2"><a href="#装饰Map类型变量-2" class="headerlink" title="装饰Map类型变量"></a>装饰Map类型变量</h6><p>在下面的示例中，@StorageLink装饰的persistedMapString类型为Map&lt;number, string&gt;，点击Button改变persistedMapString的值，视图会随之刷新。且persistedMapString的值被持久化存储。</p>
<figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">PersistentStorage</span>.<span class="title function_">persistProp</span>(<span class="string">&quot;persistedMapString&quot;</span>, <span class="keyword">new</span> <span class="title class_">Map</span>&lt;<span class="built_in">number</span>, <span class="built_in">string</span>&gt;([]));</span><br><span class="line"></span><br><span class="line"><span class="meta">@Entry</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line">struct <span class="title class_">PersistedMap</span> &#123;</span><br><span class="line">  <span class="meta">@StorageLink</span>(<span class="string">&quot;persistedMapString&quot;</span>) <span class="attr">persistedMapString</span>: <span class="title class_">Map</span>&lt;<span class="built_in">number</span>, <span class="built_in">string</span>&gt; = <span class="keyword">new</span> <span class="title class_">Map</span>&lt;<span class="built_in">number</span>, <span class="built_in">string</span>&gt;([]);</span><br><span class="line"></span><br><span class="line">  <span class="title function_">persistMapString</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">persistedMapString</span> = <span class="keyword">new</span> <span class="title class_">Map</span>&lt;<span class="built_in">number</span>, <span class="built_in">string</span>&gt;([[<span class="number">3</span>, <span class="string">&quot;one&quot;</span>], [<span class="number">6</span>, <span class="string">&quot;two&quot;</span>], [<span class="number">9</span>, <span class="string">&quot;three&quot;</span>]]);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">List</span>() &#123;</span><br><span class="line">      <span class="title class_">ListItem</span>() &#123;</span><br><span class="line">        <span class="title class_">Column</span>() &#123;</span><br><span class="line">          <span class="title class_">Text</span>(<span class="string">`Persisted Map String is `</span>)</span><br><span class="line">            .<span class="title function_">margin</span>(<span class="number">20</span>)</span><br><span class="line">          <span class="title class_">ForEach</span>(<span class="title class_">Array</span>.<span class="title function_">from</span>(<span class="variable language_">this</span>.<span class="property">persistedMapString</span>.<span class="title function_">entries</span>()), <span class="function">(<span class="params">item: [<span class="built_in">number</span>, <span class="built_in">string</span>]</span>) =&gt;</span> &#123;</span><br><span class="line">            <span class="title class_">Text</span>(<span class="string">`<span class="subst">$&#123;item[<span class="number">0</span>]&#125;</span> <span class="subst">$&#123;item[<span class="number">1</span>]&#125;</span>`</span>)</span><br><span class="line">          &#125;)</span><br><span class="line"></span><br><span class="line">          <span class="title class_">Button</span>() &#123;</span><br><span class="line">            <span class="title class_">Text</span>(<span class="string">&#x27;Persist Map String&#x27;</span>)</span><br><span class="line">              .<span class="title function_">fontSize</span>(<span class="number">25</span>)</span><br><span class="line">              .<span class="title function_">fontWeight</span>(<span class="title class_">FontWeight</span>.<span class="property">Bold</span>)</span><br><span class="line">              .<span class="title function_">fontColor</span>(<span class="title class_">Color</span>.<span class="property">White</span>)</span><br><span class="line">          &#125;</span><br><span class="line">          .<span class="title function_">type</span>(<span class="title class_">ButtonType</span>.<span class="property">Capsule</span>)</span><br><span class="line">          .<span class="title function_">margin</span>(&#123;</span><br><span class="line">            <span class="attr">top</span>: <span class="number">20</span></span><br><span class="line">          &#125;)</span><br><span class="line">          .<span class="title function_">backgroundColor</span>(<span class="string">&#x27;#0D9FFB&#x27;</span>)</span><br><span class="line">          .<span class="title function_">width</span>(<span class="string">&#x27;60%&#x27;</span>)</span><br><span class="line">          .<span class="title function_">height</span>(<span class="string">&#x27;5%&#x27;</span>)</span><br><span class="line">          .<span class="title function_">onClick</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">            <span class="variable language_">this</span>.<span class="title function_">persistMapString</span>();</span><br><span class="line">          &#125;)</span><br><span class="line"></span><br><span class="line">        &#125;.<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h6 id="装饰Set类型变量-2"><a href="#装饰Set类型变量-2" class="headerlink" title="装饰Set类型变量"></a>装饰Set类型变量</h6><p>在下面的示例中，@StorageLink装饰的persistedSet类型为Set<number>，点击Button改变persistedSet的值，视图会随之刷新。且persistedSet的值被持久化存储。</p>
<figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">PersistentStorage</span>.<span class="title function_">persistProp</span>(<span class="string">&quot;persistedSet&quot;</span>, <span class="keyword">new</span> <span class="title class_">Set</span>&lt;<span class="built_in">number</span>&gt;([]));</span><br><span class="line"></span><br><span class="line"><span class="meta">@Entry</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line">struct <span class="title class_">PersistedSet</span> &#123;</span><br><span class="line">  <span class="meta">@StorageLink</span>(<span class="string">&quot;persistedSet&quot;</span>) <span class="attr">persistedSet</span>: <span class="title class_">Set</span>&lt;<span class="built_in">number</span>&gt; = <span class="keyword">new</span> <span class="title class_">Set</span>&lt;<span class="built_in">number</span>&gt;([]);</span><br><span class="line"></span><br><span class="line">  <span class="title function_">persistSet</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">persistedSet</span> = <span class="keyword">new</span> <span class="title class_">Set</span>&lt;<span class="built_in">number</span>&gt;([<span class="number">33</span>, <span class="number">1</span>, <span class="number">3</span>]);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">clearSet</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">persistedSet</span>.<span class="title function_">clear</span>();</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">List</span>() &#123;</span><br><span class="line">      <span class="title class_">ListItem</span>() &#123;</span><br><span class="line">        <span class="title class_">Column</span>() &#123;</span><br><span class="line">          <span class="title class_">Text</span>(<span class="string">`Persisted Set is `</span>)</span><br><span class="line">            .<span class="title function_">margin</span>(<span class="number">20</span>)</span><br><span class="line">          <span class="title class_">ForEach</span>(<span class="title class_">Array</span>.<span class="title function_">from</span>(<span class="variable language_">this</span>.<span class="property">persistedSet</span>.<span class="title function_">entries</span>()), <span class="function">(<span class="params">item: [<span class="built_in">number</span>, <span class="built_in">string</span>]</span>) =&gt;</span> &#123;</span><br><span class="line">            <span class="title class_">Text</span>(<span class="string">`<span class="subst">$&#123;item[<span class="number">1</span>]&#125;</span>`</span>)</span><br><span class="line">          &#125;)</span><br><span class="line"></span><br><span class="line">          <span class="title class_">Button</span>() &#123;</span><br><span class="line">            <span class="title class_">Text</span>(<span class="string">&#x27;Persist Set&#x27;</span>)</span><br><span class="line">              .<span class="title function_">fontSize</span>(<span class="number">25</span>)</span><br><span class="line">              .<span class="title function_">fontWeight</span>(<span class="title class_">FontWeight</span>.<span class="property">Bold</span>)</span><br><span class="line">              .<span class="title function_">fontColor</span>(<span class="title class_">Color</span>.<span class="property">White</span>)</span><br><span class="line">          &#125;</span><br><span class="line">          .<span class="title function_">type</span>(<span class="title class_">ButtonType</span>.<span class="property">Capsule</span>)</span><br><span class="line">          .<span class="title function_">margin</span>(&#123;</span><br><span class="line">            <span class="attr">top</span>: <span class="number">20</span></span><br><span class="line">          &#125;)</span><br><span class="line">          .<span class="title function_">backgroundColor</span>(<span class="string">&#x27;#0D9FFB&#x27;</span>)</span><br><span class="line">          .<span class="title function_">width</span>(<span class="string">&#x27;60%&#x27;</span>)</span><br><span class="line">          .<span class="title function_">height</span>(<span class="string">&#x27;5%&#x27;</span>)</span><br><span class="line">          .<span class="title function_">onClick</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">            <span class="variable language_">this</span>.<span class="title function_">persistSet</span>();</span><br><span class="line">          &#125;)</span><br><span class="line"></span><br><span class="line">          <span class="title class_">Button</span>() &#123;</span><br><span class="line">            <span class="title class_">Text</span>(<span class="string">&#x27;Persist Clear&#x27;</span>)</span><br><span class="line">              .<span class="title function_">fontSize</span>(<span class="number">25</span>)</span><br><span class="line">              .<span class="title function_">fontWeight</span>(<span class="title class_">FontWeight</span>.<span class="property">Bold</span>)</span><br><span class="line">              .<span class="title function_">fontColor</span>(<span class="title class_">Color</span>.<span class="property">White</span>)</span><br><span class="line">          &#125;</span><br><span class="line">          .<span class="title function_">type</span>(<span class="title class_">ButtonType</span>.<span class="property">Capsule</span>)</span><br><span class="line">          .<span class="title function_">margin</span>(&#123;</span><br><span class="line">            <span class="attr">top</span>: <span class="number">20</span></span><br><span class="line">          &#125;)</span><br><span class="line">          .<span class="title function_">backgroundColor</span>(<span class="string">&#x27;#0D9FFB&#x27;</span>)</span><br><span class="line">          .<span class="title function_">width</span>(<span class="string">&#x27;60%&#x27;</span>)</span><br><span class="line">          .<span class="title function_">height</span>(<span class="string">&#x27;5%&#x27;</span>)</span><br><span class="line">          .<span class="title function_">onClick</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">            <span class="variable language_">this</span>.<span class="title function_">clearSet</span>();</span><br><span class="line">          &#125;)</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line">        .<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="Environment：设备环境查询"><a href="#Environment：设备环境查询" class="headerlink" title="Environment：设备环境查询"></a>Environment：设备环境查询</h4><p>开发者如果需要应用程序运行的设备的环境参数，以此来作出不同的场景判断，比如多语言，暗黑模式等，需要用到Environment设备环境查询。</p>
<p>Environment是ArkUI框架在应用程序启动时创建的单例对象。它为AppStorage提供了一系列描述应用程序运行状态的属性。Environment的所有属性都是不可变的（即应用不可写入），所有的属性都是简单类型。</p>
<h5 id="Environment内置参数"><a href="#Environment内置参数" class="headerlink" title="Environment内置参数"></a>Environment内置参数</h5><table>
<thead>
<tr>
<th>键</th>
<th>数据类型</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td>accessibilityEnabled</td>
<td>boolean</td>
<td>获取无障碍屏幕读取是否启用。</td>
</tr>
<tr>
<td>colorMode</td>
<td>ColorMode</td>
<td>色彩模型类型：选项为ColorMode.LIGHT: 浅色，ColorMode.DARK: 深色。</td>
</tr>
<tr>
<td>fontScale</td>
<td>number</td>
<td>字体大小比例，范围: [0.85, 1.45]。</td>
</tr>
<tr>
<td>fontWeightScale</td>
<td>number</td>
<td>字体粗细程度，范围: [0.6, 1.6]。</td>
</tr>
<tr>
<td>layoutDirection</td>
<td>LayoutDirection</td>
<td>布局方向类型：包括LayoutDirection.LTR: 从左到右，LayoutDirection.RTL: 从右到左。</td>
</tr>
<tr>
<td>languageCode</td>
<td>string</td>
<td>当前系统语言值，取值必须为小写字母, 例如zh。</td>
</tr>
</tbody></table>
<h5 id="使用场景-3"><a href="#使用场景-3" class="headerlink" title="使用场景"></a>使用场景</h5><h6 id="从UI中访问Environment参数"><a href="#从UI中访问Environment参数" class="headerlink" title="从UI中访问Environment参数"></a>从UI中访问Environment参数</h6><ul>
<li><p>从UI中访问Environment参数</p>
<figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 将设备的语言code存入AppStorage，默认值为en</span></span><br><span class="line"><span class="title class_">Environment</span>.<span class="title function_">envProp</span>(<span class="string">&#x27;languageCode&#x27;</span>, <span class="string">&#x27;en&#x27;</span>);</span><br></pre></td></tr></table></figure>
</li>
<li><p>可以使用@StorageProp链接到Component中。</p>
<figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@StorageProp</span>(<span class="string">&#x27;languageCode&#x27;</span>) lang : <span class="built_in">string</span> = <span class="string">&#x27;en&#x27;</span>;</span><br></pre></td></tr></table></figure></li>
</ul>
<p>设备环境到Component的更新链：Environment –&gt; AppStorage –&gt;Component。</p>
<blockquote>
<p>说明：</p>
<p>@StorageProp关联的环境参数可以在本地更改，但不能同步回AppStorage中，因为应用对环境变量参数是不可写的，只能在Environment中查询。</p>
</blockquote>
<figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 将设备languageCode存入AppStorage中</span></span><br><span class="line"><span class="title class_">Environment</span>.<span class="title function_">envProp</span>(<span class="string">&#x27;languageCode&#x27;</span>, <span class="string">&#x27;en&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="meta">@Entry</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line">struct <span class="title class_">Index</span> &#123;</span><br><span class="line">  <span class="meta">@StorageProp</span>(<span class="string">&#x27;languageCode&#x27;</span>) <span class="attr">languageCode</span>: <span class="built_in">string</span> = <span class="string">&#x27;en&#x27;</span>;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">Row</span>() &#123;</span><br><span class="line">      <span class="title class_">Column</span>() &#123;</span><br><span class="line">        <span class="comment">// 输出当前设备的languageCode</span></span><br><span class="line">        <span class="title class_">Text</span>(<span class="variable language_">this</span>.<span class="property">languageCode</span>)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h6 id="应用逻辑使用Environment"><a href="#应用逻辑使用Environment" class="headerlink" title="应用逻辑使用Environment"></a>应用逻辑使用Environment</h6><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 使用Environment.EnvProp将设备运行languageCode存入AppStorage中；</span></span><br><span class="line"><span class="title class_">Environment</span>.<span class="title function_">envProp</span>(<span class="string">&#x27;languageCode&#x27;</span>, <span class="string">&#x27;en&#x27;</span>);</span><br><span class="line"><span class="comment">// 从AppStorage获取单向绑定的languageCode的变量</span></span><br><span class="line"><span class="keyword">const</span> <span class="attr">lang</span>: <span class="title class_">SubscribedAbstractProperty</span>&lt;<span class="built_in">string</span>&gt; = <span class="title class_">AppStorage</span>.<span class="title function_">prop</span>(<span class="string">&#x27;languageCode&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (lang.<span class="title function_">get</span>() === <span class="string">&#x27;zh&#x27;</span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">info</span>(<span class="string">&#x27;你好&#x27;</span>);</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">info</span>(<span class="string">&#x27;Hello!&#x27;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="限制条件-3"><a href="#限制条件-3" class="headerlink" title="限制条件"></a>限制条件</h5><p>Environment和UIContext相关联，需要在<span class="exturl" data-url="aHR0cHM6Ly9kZXZlbG9wZXIuaHVhd2VpLmNvbS9jb25zdW1lci9jbi9kb2MvaGFybW9ueW9zLXJlZmVyZW5jZXMtVjUvanMtYXBpcy1hcmt1aS11aWNvbnRleHQtVjUjdWljb250ZXh0">UIContext<i class="fa fa-external-link-alt"></i></span>明确的时候才可以调用。可以通过在<span class="exturl" data-url="aHR0cHM6Ly9kZXZlbG9wZXIuaHVhd2VpLmNvbS9jb25zdW1lci9jbi9kb2MvaGFybW9ueW9zLXJlZmVyZW5jZXMtVjUvanMtYXBpcy1hcmt1aS11aWNvbnRleHQtVjUjcnVuc2NvcGVkdGFzaw==">runScopedTask<i class="fa fa-external-link-alt"></i></span>里明确上下文。如果没有在UIContext明确的地方调用，将导致无法查询到设备环境数据。</p>
<figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// EntryAbility.ets</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">UIAbility</span> <span class="keyword">from</span> <span class="string">&#x27;@ohos.app.ability.UIAbility&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="variable language_">window</span> <span class="keyword">from</span> <span class="string">&#x27;@ohos.window&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">class</span> <span class="title class_">EntryAbility</span> <span class="keyword">extends</span> <span class="title class_ inherited__">UIAbility</span> &#123;</span><br><span class="line">  <span class="title function_">onWindowStageCreate</span>(<span class="params">windowStage: <span class="variable language_">window</span>.WindowStage</span>) &#123;</span><br><span class="line">    windowStage.<span class="title function_">loadContent</span>(<span class="string">&#x27;pages/Index&#x27;</span>);</span><br><span class="line">    <span class="keyword">let</span> <span class="variable language_">window</span> = windowStage.<span class="title function_">getMainWindow</span>()</span><br><span class="line">    <span class="variable language_">window</span>.<span class="title function_">then</span>(<span class="function"><span class="params">window</span> =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">let</span> uicontext = <span class="variable language_">window</span>.<span class="title function_">getUIContext</span>()</span><br><span class="line">      uicontext.<span class="title function_">runScopedTask</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">        <span class="title class_">Environment</span>.<span class="title function_">envProp</span>(<span class="string">&#x27;languageCode&#x27;</span>, <span class="string">&#x27;en&#x27;</span>);</span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


    </div>

    
    
    

    <footer class="post-footer">
          

<div class="post-copyright">
<ul>
  <li class="post-copyright-author">
      <strong>本文作者： </strong>明年今日
  </li>
  <li class="post-copyright-link">
      <strong>本文链接：</strong>
      <a href="https://zhich.github.io/2024/05/18/%E9%B8%BF%E8%92%99%E5%BC%80%E5%8F%91%E6%95%99%E7%A8%8B/" title="鸿蒙开发教程">https://zhich.github.io/2024/05/18/鸿蒙开发教程/</a>
  </li>
  <li class="post-copyright-license">
      <strong>版权声明： </strong>本博客所有文章除特别声明外，均采用 <span class="exturl" data-url="aHR0cHM6Ly9jcmVhdGl2ZWNvbW1vbnMub3JnL2xpY2Vuc2VzL2J5LW5jLXNhLzQuMC9kZWVkLnpo"><i class="fab fa-fw fa-creative-commons"></i>BY-NC-SA</span> 许可协议。转载请注明出处！
  </li>
</ul>
</div>

          <div class="post-tags">
              <a href="/tags/%E9%B8%BF%E8%92%99%E5%BC%80%E5%8F%91/" rel="tag"><i class="fa fa-tag"></i> 鸿蒙开发</a>
              <a href="/tags/HarmonyOS/" rel="tag"><i class="fa fa-tag"></i> HarmonyOS</a>
          </div>

        

          <div class="post-nav">
            <div class="post-nav-item">
                <a href="/2023/08/08/Kotlin-%E5%8D%8F%E7%A8%8B/" rel="prev" title="Kotlin 协程">
                  <i class="fa fa-angle-left"></i> Kotlin 协程
                </a>
            </div>
            <div class="post-nav-item">
            </div>
          </div>
    </footer>
  </article>
</div>






</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">

  <div class="copyright">
    &copy; 2016 – 
    <span itemprop="copyrightYear">2024</span>
    <span class="with-love">
      <i class="fa fa-heart"></i>
    </span>
    <span class="author" itemprop="copyrightHolder">Copyright © 明年今日。 All Rights Reserved.</span>
  </div>
<div class="busuanzi-count">
    <span class="post-meta-item" id="busuanzi_container_site_uv">
      <span class="post-meta-item-icon">
        <i class="fa fa-user"></i>
      </span>
      <span class="site-uv" title="总访客量">
        <span id="busuanzi_value_site_uv"></span>
      </span>
    </span>
    <span class="post-meta-item" id="busuanzi_container_site_pv">
      <span class="post-meta-item-icon">
        <i class="fa fa-eye"></i>
      </span>
      <span class="site-pv" title="总访问量">
        <span id="busuanzi_value_site_pv"></span>
      </span>
    </span>
</div>
  <div class="powered-by">由 <span class="exturl" data-url="aHR0cHM6Ly9oZXhvLmlv">Hexo</span> & <span class="exturl" data-url="aHR0cHM6Ly90aGVtZS1uZXh0LmpzLm9yZw==">NexT.Gemini</span> 强力驱动
  </div>

    </div>
  </footer>

  
  <div class="toggle sidebar-toggle" role="button">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>
  <div class="sidebar-dimmer"></div>
  <div class="back-to-top" role="button" aria-label="返回顶部">
    <i class="fa fa-arrow-up fa-lg"></i>
    <span>0%</span>
  </div>

  <span class="exturl github-corner" data-url="aHR0cHM6Ly9naXRodWIuY29tL3poaWNo" title="在 GitHub 上关注我" aria-label="在 GitHub 上关注我"><svg width="80" height="80" viewBox="0 0 250 250" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg></span>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/lozad.js/1.16.0/lozad.min.js" integrity="sha256-mOFREFhqmHeQbXpK2lp4nA3qooVgACfh88fpJftLBbc=" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/pangu/4.0.7/pangu.min.js" integrity="sha256-j+yj56cdEY2CwkVtGyz18fNybFGpMGJ8JxG3GSyO2+I=" crossorigin="anonymous"></script>
<script src="/js/comments.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/sidebar.js"></script><script src="/js/next-boot.js"></script>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/hexo-generator-searchdb/1.4.1/search.js" integrity="sha256-1kfA5uHPf65M5cphT2dvymhkuyHPQp5A53EGZOnOLmc=" crossorigin="anonymous"></script>
<script src="/js/third-party/search/local-search.js"></script>


  <script class="next-config" data-name="mermaid" type="application/json">{"enable":true,"theme":{"light":"default","dark":"dark"},"js":{"url":"https://cdnjs.cloudflare.com/ajax/libs/mermaid/10.9.0/mermaid.min.js","integrity":"sha256-stuqcu2FrjYCXDOytWFA5SoUE/r3nkp6gTglzNSlavU="}}</script>
  <script src="/js/third-party/tags/mermaid.js"></script>



  <script src="/js/third-party/pace.js"></script>


  
  <script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>




  <script src="https://cdnjs.cloudflare.com/ajax/libs/quicklink/2.3.0/quicklink.umd.js" integrity="sha256-yvJQOINiH9fWemHn0vCA5lsHWJaHs6/ZmO+1Ft04SvM=" crossorigin="anonymous"></script>
  <script class="next-config" data-name="quicklink" type="application/json">{"enable":true,"home":true,"archive":true,"delay":true,"timeout":3000,"priority":true,"url":"https://zhich.github.io/2024/05/18/%E9%B8%BF%E8%92%99%E5%BC%80%E5%8F%91%E6%95%99%E7%A8%8B/"}</script>
  <script src="/js/third-party/quicklink.js"></script>

</body>
</html>
